(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2353],{33473:function(e,n,t){"use strict";var r=t(35944),i=t(69346),o=t(81255),l=t(61756),a=t(81456);n.Z=function(e){return(0,r.BX)(i.Z,{css:[o.l0.rowWithGap(2),o.l0.flex.growAndShrink(1)],children:[(0,r.tZ)(l.ZP,{colorway:e.colorway,iconLeft:e.icon,stretch:!0,onClick:e.onClick,text:e.text,css:[o.l0.flex.growAndShrink(1),o.l0.borderRadius(8,0,0,8)]}),(0,r.tZ)(l.ZP,{colorway:e.colorway,onClick:e.onCountClick,text:(0,a.d)(e.count),css:[o.l0.borderRadius(1,8,8,1)]})]})}},98923:function(e,n,t){"use strict";t.d(n,{Z:function(){return s}});var r=t(26042),i=t(7297),o=t(31230),l=t(37887);function a(){var e=(0,i.Z)(["\n  query IsUserEnrolled($courseSlug: String!) {\n    currentUser {\n      id\n      course(slug: $courseSlug) {\n        ... on UserCourse {\n          id\n          __typename\n        }\n        ... on NotFoundError {\n          __typename\n        }\n        ... on UnauthorizedError {\n          __typename\n        }\n        ... on UserError {\n          __typename\n        }\n      }\n    }\n  }\n"]);return a=function(){return e},e}var c={},u=(0,o.Ps)(a());var s=function(e){var n,t,i=function(e){var n=(0,r.Z)({},c,e);return l.a(u,n)}({variables:{courseSlug:e.courseSlug}}),o=i.data,a=i.loading,s=i.refetch,d="CurrentUser"===(null===o||void 0===o||null===(n=o.currentUser)||void 0===n?void 0:n.__typename),m=d&&"UserCourse"===(null===(t=o.currentUser)||void 0===t?void 0:t.course.__typename)?o.currentUser.course.id:void 0;return{isLoggedIn:d,isEnrolled:!!m,isLoading:a,userCourseId:m,refetch:s}}},57249:function(e,n,t){"use strict";t.d(n,{Z:function(){return X},S:function(){return D}});var r=t(47568),i=t(26042),o=t(69396),l=t(70655),a=t(35944),c=t(67294),u=t(7297),s=t(31230);function d(){var e=(0,u.Z)(["\n  fragment PostBodyTextAreaUser on User {\n    id\n    username\n    image\n  }\n"]);return d=function(){return e},e}function m(){var e=(0,u.Z)(["\n  query PostBodyTextAreaUsernameSearch($query: String!, $limit: Int) {\n    usernameSearch(query: $query, limit: $limit) {\n      id\n      ...PostBodyTextAreaUser\n    }\n  }\n  ","\n"]);return m=function(){return e},e}var p=(0,s.Ps)(d()),h=(0,s.Ps)(m(),p);var f=t(16965),Z=t(10253),v=t(16496),g=t.n(v),b=t(18332),C=t(96594);var w=t(30758),y=t(82670),x=t(29815),R=t(32703),S=t(62722),k=t(7657);function B(e){var n=e.initialValue,t=e.textTriggers,i=(0,c.useState)(n||""),o=i[0],a=i[1],u=(0,c.useRef)(null),s=function(e){var n=e.textTriggers,t=e.applySuggestion,r=(0,c.useRef)(null),i=(0,Z.Z)((0,b.Z)(n),2),o=i[0].suggestions,l=i[1],a=(0,C.Kb)({items:(null===o||void 0===o?void 0:o.results)||[],defaultHighlightedIndex:0,isOpen:Boolean(o),onSelectedItemChange:function(e){var n=e.selectedItem;if(o&&n){var i=r.current;if(i){var l=o.applySuggestion({targetValue:i.value,suggestionValue:n.value}),a=l.fullValue,c=l.cursorIndex;t({fullValue:a,cursorIndex:c})}}}}),u=(0,c.useMemo)((function(){if(o&&r.current)return g()(r.current,o.textTrigger.index)}),[o]);return{ref:(0,c.useCallback)((function(e){r.current=e,l(e)}),[l]),suggestions:null===o||void 0===o?void 0:o.results,caretCoordinates:u,combobox:a}}({textTriggers:t,applySuggestion:function(e){var n=e.cursorIndex,t=e.fullValue;a(t),setTimeout((function(){u.current&&u.current.setSelectionRange(n,n)}))}}),d=s.combobox,m=s.caretCoordinates,p=s.suggestions,h=s.ref,v=function(e){var n=(0,c.useRef)(null),t=(0,f.Z)(e.onChange),i=(0,f.Z)(e.onError),o=(0,c.useCallback)((function(e){n.current=e}),[]),a=(0,c.useCallback)(function(){var e=(0,r.Z)((function(e){var r,o,a,c,u,s,d,m,p,h,f,Z;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:if(!(r=n.current))return[2];o=r.value,a=r.selectionStart?r.selectionStart:o.length,c=e.map((function(e){return"![Uploading ".concat(e.name,"...]()")})),u=o.substr(0,a),s=o.substr(a),d=(0,x.Z)(c),u&&d.unshift(u),s&&d.push(s),t.current(d.join("\n")),m=[],l.label=1;case 1:return l.trys.push([1,3,,4]),[4,(0,R.L0)(e)];case 2:return m=l.sent(),[3,4];case 3:return p=l.sent(),i.current(p),[2];case 4:h=[],l.label=5;case 5:return l.trys.push([5,7,,8]),[4,Promise.all(m.map((function(e){return(0,S.mh)(e,k.N.CommunityPost)})))];case 6:return h=l.sent(),[3,8];case 7:return f=l.sent(),i.current(f),[2];case 8:return n.current?(Z=c.reduce((function(n,t,r){var i=e[r].name.replace(/\.[^/.]+$/,""),o=h[r],l=(0,y.Z)(o,Error)?"Error uploading":o.url;return n.replace(t,"![".concat(i,"](").concat(l,")"))}),n.current.value),t.current(Z),[2]):[2]}}))}));return function(n){return e.apply(this,arguments)}}(),[t,i]),u=(0,c.useCallback)((function(e){var n=Array.from(e.clipboardData.items).filter((function(e){return"file"===e.kind})).map((function(e){return e.getAsFile()})).filter((function(e){return null!==e}));n.length&&a(n)}),[a]);return{ref:o,handleFiles:a,handlePaste:u}}({onChange:a,onError:function(){}}),B=v.handleFiles,P=v.handlePaste,I=v.ref,U=(0,Z.Z)((0,w.Z)((function(e){null!==e&&B(e)})),2)[1],E=(0,c.useCallback)((function(e){u.current=e,h(e),I(e)}),[h,I]),G=(0,c.useCallback)((function(e,n){var t;null===(t=u.current)||void 0===t||t.setSelectionRange(e,n)}),[]);return{ref:E,value:o,setValue:a,dropZoneHandlers:U,handlePaste:P,combobox:d,caretCoordinates:m,suggestions:p,setSelectionRange:G}}var P=t(57731),I=t(32951),U=t(25019),E=t(4306),G=t(17780),T=t(15085),_=t(37424),H=T.KD.div,W=T.KD.li;function D(e){return A.apply(this,arguments)}function A(){return(A=(0,r.Z)((function(e){return(0,l.__generator)(this,(function(n){switch(n.label){case 0:if(!G.l)throw new Error("Expected apolloClient");return[4,G.l.query({query:h,variables:{query:e,limit:5}})];case 1:return[2,n.sent().data.usernameSearch]}}))}))).apply(this,arguments)}function X(e){var n,t=e.onChange,u=e.initialValue,s=e.autoFocus,d=e.placeholder,m=e.onKeyDown,p=e.onBlur,h=e.onFocus,Z=e.userSearch,v=e.showLabel,g=(0,c.useRef)(u),b=(0,f.Z)(t),C=function(e){var n=e.initialValue,t=e.userSearch,i=void 0===t?D:t,o=B({initialValue:n,textTriggers:{"@":function(){var e=(0,r.Z)((function(e){return(0,l.__generator)(this,(function(n){switch(n.label){case 0:return[4,i(e)];case 1:return[2,n.sent().map((function(e){return{icon:(0,a.tZ)(P.Z,{alt:e.username,src:e.image,size:16}),value:e.username}}))]}}))}));return function(n){return e.apply(this,arguments)}}()}});return o}({initialValue:u,userSearch:Z}),w=C.setSelectionRange;(0,I.Z)((function(){b.current(C.value)}),[C.value]),(0,c.useEffect)((function(){if(s&&g.current){var e=g.current.length;w(e,e)}}),[s,w]);var y=(0,_.H)();return(0,a.BX)(H,(0,o.Z)((0,i.Z)({css:{position:"relative"}},C.combobox.getComboboxProps()),{children:[(0,a.BX)(T.G7,{css:[T.l0.colWithGap(4)],children:[v?(0,a.tZ)("label",{htmlFor:y("description"),children:(0,a.tZ)(T.xv,{color:"dimmer",variant:"small",children:"Description"})}):null,(0,a.tZ)(T.B,(0,o.Z)((0,i.Z)({},C.combobox.getInputProps({placeholder:d||"Write something about this post",ref:C.ref,onKeyDown:function(e){C.combobox.isOpen||"ArrowUp"!==e.key&&"ArrowDown"!==e.key||(e.nativeEvent.preventDownshiftDefault=!0),m&&m(e)},onBlur:p,onFocus:h,value:C.value,onChange:function(e){return C.setValue(e.currentTarget.value)},onPaste:C.handlePaste,autoFocus:s})),{css:[T.l0.width("100%"),{minHeight:T.TV.space128,resize:"vertical"}],id:y("description")}))]}),(0,a.tZ)(H,(0,o.Z)((0,i.Z)({},C.combobox.getMenuProps()),{css:[{position:"absolute"},C.caretCoordinates&&{top:C.caretCoordinates.top+C.caretCoordinates.height,left:C.caretCoordinates.left-4}],children:(null===(n=C.suggestions)||void 0===n?void 0:n.length)?(0,a.tZ)(U.Z,{css:{position:"relative",maxWidth:180},children:C.suggestions.map((function(e,n){return(0,a.tZ)(W,(0,o.Z)((0,i.Z)({},C.combobox.getItemProps({item:e,index:n})),{children:(0,a.tZ)(E.Z,{title:e.value,selected:C.combobox.selectedItem===e,highlighted:C.combobox.highlightedIndex===n,icon:e.icon?(0,a.tZ)(T.G7,{children:e.icon}):void 0})}),e.value)}))}):null}))]}))}},54917:function(e,n,t){"use strict";t.d(n,{EQ:function(){return G},Ex:function(){return U},Sh:function(){return E},Yt:function(){return S},g4:function(){return w},l0:function(){return P},nQ:function(){return x},pl:function(){return B},tE:function(){return y},wb:function(){return k}});var r=t(35944),i=t(67294),o=t(59369),l=t(34847),a=t(69346),c=t(33773),u=t(82447),s=t(94718),d=t(57249),m=t(75026),p=t(64080),h=t(53429),f=t(42844),Z=t(64184),v=t(18757),g=t(57704),b=t(88808),C=t(15085);function w(e){var n=e.onClick;return(0,r.tZ)(C.zx,{small:!0,onClick:n,outlined:!0,text:"Reply",colorway:"primary",css:[C.l0.p(4),{background:"transparent",borderColor:"transparent"}]})}function y(e){var n=e.onClick,t=e.repliesCount,i=e.isExpanded,o="".concat(i?"Hide":"View"," ").concat(t," ").concat((0,l.Z)("reply",t));return(0,r.tZ)(C.zx,{small:!0,onClick:n,outlined:!0,text:o,css:[C.l0.color.foregroundDimmer,C.l0.p(4),{background:"transparent",borderColor:"transparent","&> span":{marginRight:2}}],iconRight:(0,r.tZ)(c.Z,{size:12,rotate:i?0:270})})}var x,R=a.K.a;function S(e){var n=e.user;return(0,r.tZ)(s.Z,{username:n.username,children:(0,r.tZ)(u.ZP,{user:n,children:(0,r.tZ)(C.qE,{size:32,username:n.username,src:n.image})})})}function k(e){var n=e.user,t=e.action,i=e.timeCreated;return(0,r.BX)(a.Z,{css:[C.l0.flex.row,C.l0.align.center,C.l0.flex.wrap,{maxWidth:"100%",gap:C.TV.space4}],children:[(0,r.tZ)(s.Z,{username:n.username,children:(0,r.tZ)(u.ZP,{user:n,children:(0,r.tZ)(R,{css:[{color:"inherit"}],children:n.username})})}),t?(0,r.tZ)(C.xv,{color:"dimmer",children:t}):null,(0,r.tZ)(C.EK,{date:i,textColor:"dimmest",textVariant:"small"})]})}function B(e){var n=e.canEdit,t=e.canDelete,l=e.canReport,c=e.canEditSettings,u=e.canHideComment,s=e.canShowComment,d=e.onAction,m=e.className,C=(0,i.useState)(!1),w=C[0],y=C[1],R=[{label:x.CopyLink,icon:(0,r.tZ)(b.Z,{})}];return n&&R.push({label:x.Edit,icon:(0,r.tZ)(p.Z,{})}),l&&R.push({label:x.Report,icon:(0,r.tZ)(h.Z,{})}),c&&R.push({label:x.Settings,icon:(0,r.tZ)(f.Z,{})}),u&&R.push({label:x.Hide,icon:(0,r.tZ)(Z.Z,{})}),s&&R.push({label:x.Show,icon:(0,r.tZ)(v.Z,{})}),t&&R.push({label:x.Delete,isDestructive:!0,icon:(0,r.tZ)(g.Z,{})}),R.length?(0,r.tZ)(a.Z,{className:m,css:[{opacity:w?1:0,".is-touch-device &":{opacity:1}}],children:(0,r.tZ)(o.Z,{label:"Comment Actions",onOpenChange:y,items:R,onItemClick:function(e){d(e.label)}})}):null}!function(e){e.Edit="Edit",e.Delete="Delete",e.Report="Report",e.Settings="Settings",e.Hide="Hide comment",e.Show="Show comment",e.CopyLink="Copy Link"}(x||(x={}));var P=a.K.form,I=i.createContext(void 0);function U(){return i.useContext(I)}var E=I.Provider;function G(e){var n=e.initialValue,t=e.placeholder,o=e.onCancel,l=e.onSubmit,c=e.hideControls,u=e.buttonText,s=void 0===u?"Comment":u,p=e.buttonIcon,h=void 0===p?(0,r.tZ)(m.Z,{}):p,f=e.error,Z=(0,i.useState)(!1),v=Z[0],g=Z[1],b=(0,i.useState)(n),w=b[0],y=b[1],x=U();return(0,r.BX)(P,{css:[C.l0.colWithGap(8)],onSubmit:function(e){e.preventDefault(),l(w)},children:[(0,r.tZ)(d.Z,{onKeyDown:function(e){"Enter"===e.key&&e.metaKey&&l(w)},initialValue:w,placeholder:t,onChange:y,onFocus:function(){return g(!0)},userSearch:x}),f?(0,r.BX)(a.Z,{css:[C.l0.flex.column,C.l0.colWithGap(8)],children:[(0,r.tZ)(C.xv,{css:[C.l0.color.redDefault],multiline:!0,children:f})," ",(0,r.BX)(C.xv,{children:["For more information,"," ",(0,r.tZ)("a",{href:"https://docs.replit.com/hosting/browsing-publishing-repls",target:"_blank",children:"check out the guidelines."})]})]}):null,v||!c?(0,r.BX)(a.Z,{css:[C.l0.rowWithGap(8),C.l0.justify.end],children:[(0,r.tZ)(C.zx,{text:"Cancel",onClick:function(e){g(!1),o&&o(e)}}),(0,r.tZ)(C.zx,{type:"submit",text:s,onClick:function(){},iconLeft:h,colorway:"primary",disabled:!w})]}):null]})}},2353:function(e,n,t){"use strict";t.d(n,{G:function(){return Ae},Z:function(){return Xe}});var r=t(14924),i=t(26042),o=t(69396),l=t(10253),a=t(29815),c=t(35944),u=t(67294),s=t(90317),d=t(8181),m=t(47568),p=t(70655),h=t(90473),f=t(81255),Z=t(11163),v=t(15085),g=t(58057),b=t(67620),C=t(69346),w=t(1144),y=t(93058),x=t(34847),R=t(519);function S(e){var n=e.count;return n>0?(0,c.BX)(C.Z,{css:[f.l0.rowWithGap(4),f.l0.align.center],children:[(0,c.tZ)(w.x,{children:n}),(0,c.tZ)(w.x,{color:"dimmer",children:(0,x.Z)("comment",n)})]}):(0,c.tZ)(w.x,{color:"dimmer",multiline:!0,children:"No comments yet"})}function k(e){var n,t=e.repl,r=(0,y.Z)(),a=r.showConfirm,u=r.showError,s=(0,l.Z)((0,b.k2)({onError:function(e){return u(e.message)},onCompleted:function(e){var n,t=e.setReplCommentSettings;"UserError"!==t.__typename?"Repl"===t.__typename&&a("Comments "+((null===(n=t.commentSettings)||void 0===n?void 0:n.enabled)?"enabled":"disabled")):u(t.message)}}),1),d=s[0],m=!(null===t||void 0===t?void 0:t.commentSettings)||t.commentSettings.enabled;return(0,c.BX)(C.Z,{css:[f.l0.rowWithGap(8),f.l0.justify.spaceBetween,f.l0.align.center],children:[m?(0,c.tZ)(S,{count:t.commentCount}):(0,c.tZ)(w.x,{color:"dimmer",multiline:!0,children:"Adding comments has been turned off for this Repl."}),(null===(n=t.currentUserPermissions)||void 0===n?void 0:n.changeCommentSettings)?(0,c.BX)(C.Z,{css:[f.l0.rowWithGap(8),f.l0.align.center],children:[(0,c.tZ)(w.x,{children:"Allow comments"}),(0,c.tZ)(R.Z,{isOn:m,onChange:function(){return d({variables:{input:{replId:t.id,enabled:!m}},optimisticResponse:{setReplCommentSettings:(0,o.Z)((0,i.Z)({},t),{commentSettings:{__typename:"ReplCommentSetting",id:-1,enabled:!m}})}})}})]}):null]})}var B=t(57249),P=t(54917),I=t(77365);function U(e){var n,t,l,s=e.replId,d=(0,Z.useRouter)().query,b=(0,h.ex)({ssr:!1,variables:{replId:s,after:d.after?d.after.toString():void 0,count:25}}),C=b.data,w=b.loading,y=b.fetchMore,x=b.refetch,R="Repl"===(null===C||void 0===C?void 0:C.repl.__typename)?C.repl:null,S=!(!R||"User"!==(null===(n=R.owner)||void 0===n?void 0:n.__typename))&&(null===R||void 0===R?void 0:R.owner.isBlockingCurrentUser),U=null===C||void 0===C?void 0:C.currentUser,E=null===R||void 0===R?void 0:R.comments.pageInfo,G=(0,u.useMemo)((function(){return R&&U?function(e){var n,t=e.repl,i=e.currentUser,o="User"===(null===(n=t.owner)||void 0===n?void 0:n.__typename)?(0,r.Z)({},t.owner.username,t.owner):{};return t.comments.items.forEach((function(e){e.user&&(o[e.user.username]=e.user),e.replies&&e.replies.forEach((function(e){(null===e||void 0===e?void 0:e.user)&&(o[e.user.username]=e.user)}))})),t.multiplayers.forEach((function(e){o[e.username]=e})),i&&delete o[i.username],Object.values(o)}({repl:R,currentUser:U}):[]}),[R,U]),T=!(null===R||void 0===R?void 0:R.commentSettings)||R.commentSettings.enabled,_=(l=G,function(){var e=(0,m.Z)((function(e){var n,t;return(0,p.__generator)(this,(function(r){switch(r.label){case 0:return n=null===e||void 0===e?void 0:e.toLowerCase(),(t=l.filter((function(e){return!n||e.username.toLowerCase().includes(n)}))).length<5&&e?[4,(0,B.S)(e)]:[3,2];case 1:r.sent().forEach((function(e){t.some((function(n){return n.username===e.username}))||t.push(e)})),r.label=2;case 2:return[2,t.slice(0,5)]}}))}));return function(n){return e.apply(this,arguments)}}());return(0,c.BX)(v.G7,{css:[f.l0.colWithGap(16)],children:[w?(0,c.BX)(v.G7,{css:[f.l0.rowWithGap(4),f.l0.align.center],children:[(0,c.tZ)(I.Z,{}),(0,c.tZ)(v.xv,{children:"Loading comments..."})]}):null,R&&!S?(0,c.BX)(c.HY,{children:[(0,c.BX)(P.Sh,{value:_,children:[(0,c.tZ)(k,{repl:R}),U&&T?(0,c.tZ)(g.H,{onComment:function(){return x()},replId:R.id,placeholder:R?"Say something about ".concat(R.title):""}):null,null===(t=R.comments)||void 0===t?void 0:t.items.filter((function(e){var n;return Boolean(null===e||void 0===e||null===(n=e.currentUserPermissions)||void 0===n?void 0:n.canHideComment)||!e.isHidden})).map((function(e){return(0,c.tZ)(g.x,{commentsEnabled:T,comment:e,onReply:function(){return x()},onDelete:function(){return x()}},e.id)}))]}),(null===E||void 0===E?void 0:E.nextCursor)&&R?(0,c.tZ)(v.G7,{children:(0,c.tZ)("a",{href:R.url+"?after="+E.nextCursor,onClick:function(e){e.preventDefault(),w||y({variables:{after:E.nextCursor},updateQuery:function(e,n){if(!n||!n.fetchMoreResult)return e;var t="Repl"===e.repl.__typename?e.repl:null;if(!t)return e;var r=n.fetchMoreResult,l="Repl"===r.repl.__typename?r.repl:null;return l?(0,o.Z)((0,i.Z)({},r),{repl:(0,o.Z)((0,i.Z)({},l),{comments:(0,o.Z)((0,i.Z)({},l.comments),{items:(0,a.Z)(t.comments.items).concat((0,a.Z)(l.comments.items))})})}):e}})},children:w?"Loading...":"Load more comments"})}):null]}):null,R&&S?(0,c.BX)(v.G7,{css:[f.l0.colWithGap(24),f.l0.align.center,f.l0.textAlign.center],children:[(0,c.tZ)(v.xv,{variant:"subheadBig",multiline:!0,children:"You\u2019re blocked"}),(0,c.BX)(v.xv,{children:["You can\u2019t follow, comment or see"," ",R.owner&&"User"===R.owner.__typename?R.owner.username:"user","\u2019s Repls on their profile."]})]}):null]})}var E=t(60977),G=t(4924),T=t(70917),_=t(61756),H=t(5886),W=t(92002),D=t(83074),A=t(64080),X=t(75026),V=t(99843),L=t(57263),F=t(88046),M=t(59292),$=t(1879),z=t(98967),q=t(65400),j=t(41664),N=t.n(j),O=t(23223),Q=t(70570),Y=t(82447),K=t(94718),J=t(5804),ee=t(2896),ne=t(53427),te=t(81456),re=t(47024),ie=C.K.a,oe={template:{background:f.TV.yellowDimmest,foreground:f.TV.yellowStrongest},app:{background:f.TV.accentPrimaryDimmest,foreground:f.TV.accentPrimaryStrongest}};function le(e){var n=e.colorway,t=e.text;return(0,c.tZ)(C.Z,{css:[{backgroundColor:n.background},f.l0.borderRadius(8),f.l0.px(4),f.l0.py(2)],children:(0,c.tZ)(C.Z,{css:[{color:n.foreground,fontSize:f.TV.fontSizeSmall}],children:t})})}function ae(e){var n,t,l,a,u,d,m,p,h=e.repl,Z=e.currentUser,v=h.owner,g=h.lastPublishedAt||(null===(n=h.deployment)||void 0===n||null===(t=n.activeRelease)||void 0===t?void 0:t.timeCreated),b=v&&v.id===(null===Z||void 0===Z?void 0:Z.id);return(0,c.BX)(C.Z,{css:[f.l0.colWithGap(32)],children:[(0,c.BX)(C.Z,{css:[f.l0.colWithGap(16)],children:[(0,c.tZ)(C.Z,{css:[f.l0.rowWithGap(8),f.l0.align.start],children:(0,c.BX)(C.Z,{css:[f.l0.colWithGap(8),f.l0.flex.growAndShrink(1)],children:[(0,c.BX)(C.Z,{css:(m={},(0,r.Z)(m,"@media (max-width: ".concat(L.j.tabletMin-1,"px)"),[f.l0.colWithGap(8)]),(0,r.Z)(m,"@media (min-width: ".concat(L.j.tabletMin,"px)"),[f.l0.rowWithGap(8),f.l0.justify.spaceBetween,f.l0.align.center]),m),children:[v?(0,c.tZ)(c.HY,{children:(0,c.BX)(C.Z,{css:[f.l0.flex.row,f.l0.align.center,f.l0.flex.wrap,{gap:f.TV.space8}],dataCy:"cover-page-user",children:[(0,c.tZ)(K.Z,{inline:!0,username:v.username,children:(0,c.tZ)(Y.ZP,{user:v,children:(0,c.tZ)(ie,{css:[f.l0.color.foregroundDefault],children:(0,c.tZ)(Q.Z,{username:v.username,src:(null===v||void 0===v?void 0:v.image)||null})})})}),!b&&(0,c.tZ)(re.Z,{subtle:!0,small:!0,user:v}),(0,c.tZ)(w.x,{color:"dimmer",children:"User"===v.__typename&&v.followerCount>0?(0,te.d)(v.followerCount)+(p=v.followerCount,p>1?" followers":" follower"):null})," "]})}):(0,c.tZ)(Q.Z,{small:!0,src:null,username:"[deleted]"}),(null===(l=h.source)||void 0===l||null===(a=l.deployment)||void 0===a||null===(u=a.repl)||void 0===u?void 0:u.owner)?(0,c.BX)(C.Z,{css:[f.l0.rowWithGap(4),f.l0.align.center],children:[(0,c.tZ)(w.x,{color:"dimmest",children:"Made with "}),(0,c.tZ)(N(),(0,o.Z)((0,i.Z)({},(0,F.aq)(h.source.deployment.repl)),{passHref:!0,children:(0,c.BX)(ie,{css:[f.l0.rowWithGap(4),f.l0.align.center,f.l0.color.foregroundDefault],children:[(0,c.tZ)(ne.ZP,{size:24,alt:h.source.deployment.repl.templateLabel,iconUrl:h.source.deployment.repl.iconUrl}),(0,c.tZ)(w.x,{children:h.source.deployment.repl.templateLabel})]})}))]}):null]}),(0,c.BX)(C.Z,{css:[f.l0.rowWithGap(8),f.l0.align.center,(0,r.Z)({},"@media (max-width: ".concat(L.j.tabletMin,"px)"),[f.l0.colWithGap(8),f.l0.align.start])],children:[(0,c.BX)(C.Z,{css:[f.l0.rowWithGap(8),f.l0.align.center],children:[h.publishedAs===s.O2.Template?(0,c.tZ)(le,{colorway:oe.template,text:"Template"}):null,h.publishedAs===s.O2.App?(0,c.tZ)(le,{colorway:oe.app,text:"App"}):null,g?(0,c.BX)(w.x,{color:"dimmer",variant:"small",children:["Published on"," ",new Date(g).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]}):null]}),(null===(d=h.origin)||void 0===d?void 0:d.owner)?(0,c.BX)(w.x,{color:"dimmer",variant:"small",children:["Forked from"," ",(0,c.tZ)(Y.ZP,{user:h.origin.owner,children:(0,c.tZ)("a",{children:h.origin.owner.username})}),"/",(0,c.tZ)(N(),(0,o.Z)((0,i.Z)({},(0,F.aq)(h.origin)),{children:(0,c.tZ)("a",{children:h.origin.title})}))]}):null]})]})}),h.tags.length?(0,c.tZ)(C.Z,{children:(0,c.tZ)(C.Z,{tag:"ul","aria-label":"Tags",css:[{flexWrap:"wrap",margin:"calc(".concat(f.TV.space4," * -1)")},f.l0.flex.row],children:h.tags.map((function(e){var n=(0,J.M6)(e.id);return(0,c.tZ)("li",{css:{listStyle:"none"},children:(0,c.tZ)(ee.Z,{text:"#"+e.id,css:[{margin:f.TV.space4}],href:n.href,as:n.as})},e.id)}))})}):null,h.description?(0,c.tZ)(C.Z,{children:(0,c.tZ)(O.Z,{css:{backgroundColor:"transparent"},children:h.description})}):(0,c.tZ)(w.x,{color:"dimmest",children:"This Repl has no description"})]}),(0,c.tZ)(C.Z,{css:[{borderBottom:"1px solid ".concat(f.TV.outlineDefault)}]})]})}var ce,ue,se,de,me=t(71158),pe=t(93160),he=t(25958),fe=t(33473),Ze=t(6600),ve=t(80658),ge=t(61193),be=t(98923),Ce=t(28592),we=t(97808),ye=t(87514),xe=t(62913),Re=function(e){var n=e.variant,t=void 0===n?"default":n,i=e.backgroundImage,o=e.title,l=e.body,s=e.ctaText,d=e.icon,m=e.onClick,p=e.href,h=e.isLoggedIn,f=e.needsAuthentication,Z=e.disabled,g=(0,u.useState)(!1),b=g[0],C=g[1],w=(0,y.Z)().showError,x=(0,u.useState)(!1),R=x[0],S=x[1];if(!m&&!p)throw new Error("BaseBanner: onClick or href must be provided");if(!m&&f)throw new Error("BaseBanner: onClick must be provided if needsAuthentication is true");var k,B=(0,c.BX)(v.G7,{onClick:function(){if(f&&!h&&!R)return C(!0),void(0,E.j)(E.U3.SIGNUP_REQUESTED,{from:"cover-page",location:"related-repls"});Z||void 0===m||m()},css:["default"===t?v.l0.flex.row:v.l0.flex.column,v.l0.width("100%"),v.l0.maxWidth(535),v.l0.cursor.pointer,v.l0.overflow("hidden"),v.l0.borderRadius(8),v.l0.backgroundColor.backgroundDefault,(k={},(0,r.Z)(k,"@media(max-width: ".concat(L.j.mobileMax,"px)"),[v.l0.flex.column]),(0,r.Z)(k,"margin","auto"),k),{boxShadow:"0px 0px 18px rgba(178, 217, 255, 0.25)",border:"1px solid #B2D9FF"}],children:[(0,c.tZ)(v.G7,{css:(0,a.Z)(["default"===t?[v.l0.width("50%")]:[v.l0.width("100%"),v.l0.height(132)]]).concat([{background:"url(".concat((0,xe.X)({src:i,width:876}),")"),backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat"},(0,r.Z)({},"@media(max-width: ".concat(L.j.mobileMax,"px)"),[v.l0.width("100%"),v.l0.height(100)])])}),(0,c.BX)(v.G7,{css:(0,a.Z)(["default"===t?[v.l0.width("50%")]:[v.l0.width("100%"),v.l0.height("100%")]]).concat([v.l0.p(16),v.l0.textAlign.left,(0,r.Z)({},"@media(max-width: ".concat(L.j.mobileMax,"px)"),[v.l0.width("100%"),v.l0.height("100%")])]),children:[(0,c.tZ)(v.xv,{variant:"subheadDefault",multiline:!0,css:[v.l0.pb(4)],children:o}),(0,c.tZ)(v.xv,{variant:"text",multiline:!0,css:[v.l0.pb(8)],children:l}),(0,c.tZ)(v.zx,{text:s,outlined:!0,css:[v.l0.width("fit-content"),v.l0.align.start],iconLeft:d})]})]}),P=f?(0,c.tZ)($.Z,{onRequestClose:function(){return C(!1)},isOpen:b,maxWidth:872,children:(0,c.tZ)(z.Z,{onSuccess:function(){S(!0),Z||void 0===m||m()},onFailure:function(e){var n=e.error;S(!1),w(n)},title:R&&Z?"Sit tight":"Sign up",description:R&&Z?"We\u2019re setting up your workspace\u2026":"Sign up and create your first repl."})}):null;return p?(0,c.BX)(c.HY,{children:[(0,c.tZ)(N(),{href:p,passHref:!0,children:(0,c.tZ)("a",{css:[v.l0.color.foregroundDefault],children:B})}),P]}):(0,c.BX)(c.HY,{children:[B,P]})},Se=function(){var e=(0,we.QW)(we.yb);return(0,c.tZ)(Re,{variant:"vertical",backgroundImage:"/public/images/100-days-of-python/banner.jpg",title:"Brand new to coding?",body:"Write your first line of Python today.",ctaText:"Start This Course",href:"/learn/".concat(e.slug,"?utm_source=cover_page"),icon:(0,c.tZ)(ye.Z,{})})},ke=function(){return(0,c.tZ)(v.jL,{backgroundImage:"/public/images/ghostwriter/ghostwriter-banner.png",headerText:"",bodyText:"Meet Ghostwriter, your partner in code.",verticalAlign:"start",buttons:[{href:"http://replit.com/ai",text:"Learn more"}]})},Be=t(92876),Pe=function(e){var n=e.isLoggedIn,t="b7292411-5efe-4c15-be23-060d48a9a6d6",r=(0,l.Z)((0,M.Z)({onError:function(){Be.$e((function(e){e.setExtra("templateId",t),Be.Tb(new Error("BaseBanner: Failed to fork template"))}))}}),2),i=r[0],o=r[1].loading;return(0,c.tZ)(Re,{variant:"vertical",isLoggedIn:n,needsAuthentication:!0,backgroundImage:"/public/images/javascript-tutorial-banner-1.jpg",title:"Learn JavaScript",body:"Make a calculator that can determine the total bill after tip.",ctaText:"Start Tutorial",icon:(0,c.tZ)(ye.Z,{}),onClick:function(){o||i({originId:t,trackingData:{forkSource:"relatedReplsSection"}})},disabled:o})},Ie=function(){return(0,c.tZ)(v.jL,{backgroundImage:"/public/images/mobile-promo-small.jpeg",headerText:"",bodyText:"Code anywhere with the Replit mobile app",verticalAlign:"end",buttons:[{href:"http://replit.com/mobile",target:"_blank",text:"Learn more"}]})},Ue=function(e){var n,t,r=e.repl,i=null===(n=(0,Ce.useLDClient)())||void 0===n?void 0:n.variation("flag-mobile-banner"),o=null===(t=(0,Ce.useLDClient)())||void 0===t?void 0:t.variation("flag-glowing-wrist"),l=(0,be.Z)({courseSlug:we.yb}),a=l.isLoggedIn,u=l.isEnrolled,s=l.isLoading;if(o)return(0,c.tZ)(ke,{});if(i)return(0,c.tZ)(Ie,{});if(s)return null;var d=("Repl"===r.__typename?r.tags.map((function(e){return e.id})):[]).includes("javascript");return a&&u?d?(0,c.tZ)(Pe,{isLoggedIn:a}):null:(0,c.tZ)(Se,{})},Ee=function(e){return"@media (max-width: ".concat(e,"px)")},Ge={mobile:Ee(L.j.tabletMin),small:(ue=L.j.tabletMin+1,se=L.j.tabletMax,"@media (min-width: ".concat(ue,"px) and (max-width: ").concat(se,"px)")),smallAndMobile:Ee(L.j.tabletMax),desktop:(ce=L.j.tabletMax+1,"@media (min-width: ".concat(ce,"px)"))},Te=function(e){return{name:e,gridArea:(0,T.iv)({gridArea:e})}},_e={header:Te("header"),cta:Te("cta"),main:Te("main"),secondary:Te("secondary"),auxiliary:Te("auxiliary")},He={mobile:(0,T.iv)({gridTemplateAreas:'\n      "'.concat(_e.header.name,'"\n      "').concat(_e.cta.name,'"\n      "').concat(_e.main.name,'"\n      "').concat(_e.auxiliary.name,'"\n      "').concat(_e.secondary.name,'"\n      ')}),small:(0,T.iv)({gridTemplateColumns:"1fr auto auto 25%",gridTemplateRows:"auto",gridTemplateAreas:'\n      "'.concat(_e.header.name," ").concat(_e.header.name," ").concat(_e.cta.name," ").concat(_e.cta.name,'"\n      "').concat(_e.main.name," ").concat(_e.main.name," ").concat(_e.main.name," ").concat(_e.main.name,'"\n      "').concat(_e.secondary.name," ").concat(_e.secondary.name," ").concat(_e.secondary.name," ").concat(_e.auxiliary.name,'"\n      ')}),desktop:(0,T.iv)({columnGap:f.TV.space32,alignItems:"baseline",gridTemplateColumns:"1fr 25%",gridTemplateRows:"auto auto auto auto 1fr",gridTemplateAreas:'\n      "'.concat(_e.header.name," ").concat(_e.cta.name,'"\n      "').concat(_e.main.name," ").concat(_e.cta.name,'"\n      "').concat(_e.main.name," ").concat(_e.auxiliary.name,'"\n      "').concat(_e.main.name," ").concat(_e.auxiliary.name,'"\n      "').concat(_e.secondary.name," ").concat(_e.auxiliary.name,'"\n      ')})},We=function(e){var n,t=e.withSidebar;return(0,T.iv)([f.l0.px(16),f.l0.py(32),(n={maxWidth:1200,margin:"0 auto",display:"grid",gap:f.TV.space16},(0,r.Z)(n,Ge.mobile,He.mobile),(0,r.Z)(n,Ge.small,[f.l0.px(16),He.small]),(0,r.Z)(n,Ge.desktop,[f.l0.p(32),t?He.desktop:He.small]),n)])};function De(e){var n,t=e.repl,r=e.currentUser,a=function(){if(!r)return p(de.AuthPrompt),void(0,E.j)(E.U3.SIGNUP_REQUESTED,{from:"cover-page",location:"fork"});v||p(de.ForkModal)},d=(0,l.Z)(u.useState(null),2),m=d[0],p=d[1],h=(0,l.Z)((0,M.Z)(),2),Z=h[0],v=h[1].loading,g=(0,ge.c)("flag-repl-analytics"),b=g.enabled,w=(g.loading,(0,F.aq)(t)),y=t.currentUserPermissions.containerWrite?(0,c.tZ)(H.Z,{colorway:"primary",iconLeft:(0,c.tZ)(A.Z,{}),stretch:!0,text:"Edit in workspace",as:w.as,href:w.href}):null,x=t.currentUserPermissions.containerWrite&&b&&t.analyticsUrl?(0,c.tZ)(H.Z,{iconLeft:(0,c.tZ)(V.Z,{}),stretch:!0,text:"Analytics",href:t.analyticsUrl}):null,R=t.currentUserPermissions.publish&&t.publishedAs&&t.publishedAs!==s.O2.Template?(0,c.tZ)(_.ZP,{text:"Add an update",type:"button",iconLeft:(0,c.tZ)(X.Z,{}),onClick:function(){return p(de.UpdateModal)}}):null,S=t.publishedAs===s.O2.Template?{text:v?"Forking...":"Use Template",icon:(0,c.tZ)(W.Z,{}),count:t.publicReleasesForkCount}:{text:v?"Forking...":"Fork Repl",icon:(0,c.tZ)(D.Z,{}),count:t.publicForkCount},k=(0,c.tZ)(fe.Z,(0,o.Z)((0,i.Z)({},S),{onClick:a,icon:(0,c.tZ)(D.Z,{}),colorway:null===y?"primary":void 0,onCountClick:function(){return p(de.ForksModal)}})),B=(0,c.tZ)($.Z,{maxWidth:768,isOpen:"ForksModal"===m,onRequestClose:function(){return p(null)},children:(0,c.tZ)(q.Z,{replId:t.id})}),P=(0,c.tZ)($.Z,{isOpen:"UpdateModal"===m,onRequestClose:function(){return p(null)},children:(0,c.tZ)(Ze.Z,{repl:t,onDone:function(){return p(null)},source:"coverPage"})}),I=(0,c.tZ)($.Z,{isOpen:m===de.ForkModal,onRequestClose:function(){return p(null)},children:(0,c.tZ)(ve.Z,{onFork:function(e,n,r,i){var o,l;Z({originId:t.id,teamId:e,title:n,description:r,isPrivate:i,replReleaseId:(null===(o=t.deployment)||void 0===o||null===(l=o.activeRelease)||void 0===l?void 0:l.id)||void 0,forkToPersonal:!e,trackingData:{forkSource:"replViewHeader",isApp:t.publishedAs===s.O2.App,isTemplate:t.publishedAs===s.O2.Template}})},initialTitle:t.title,initialDescription:null!==(n=t.description)&&void 0!==n?n:"",initialPrivacy:!1,hideModal:function(){return p(null)},teamContext:null===r||void 0===r?void 0:r.username})});return y?(0,c.BX)(c.HY,{children:[(0,c.BX)(C.Z,{css:[f.l0.colWithGap(8)],children:[y,x,R,k]}),B,I,P]}):(0,c.BX)(c.HY,{children:[k,(0,c.tZ)($.Z,{isOpen:m===de.AuthPrompt,onRequestClose:function(){p(null)},children:(0,c.tZ)(z.Z,{title:"Sign up or log in to fork this Repl",onSuccess:function(){return a()},source:"fork"})}),B,I]})}function Ae(e){var n=e.title,t=e.withSidebar,r=void 0===t||t;return(0,c.tZ)(C.Z,{css:[f.l0.flex.row,f.l0.flex.growAndShrink(1)],children:(0,c.BX)(C.Z,{css:[f.l0.p(16),f.l0.flex.growAndShrink(1),We({withSidebar:r})],children:[(0,c.BX)(C.Z,{css:[_e.header.gridArea,f.l0.rowWithGap(8),f.l0.align.center],children:[(0,c.tZ)(pe.Z,{elevated:!0,css:[f.l0.width(32),f.l0.height(32),f.l0.borderRadius("full")]}),(0,c.tZ)(w.h,{color:"dimmest",variant:"headerBig",level:1,css:[f.l0.flex.growAndShrink(1),{wordBreak:"break-word"}],children:n||"Loading..."})]}),(0,c.tZ)(C.Z,{css:[_e.cta.gridArea],children:(0,c.tZ)(_.ZP,{disabled:!0,text:" "})}),(0,c.tZ)(C.Z,{css:[_e.main.gridArea,f.l0.colWithGap(16)],children:(0,c.tZ)(pe.Z,{elevated:!0,css:[f.l0.height(500),f.l0.borderRadius(8)]})}),(0,c.tZ)(C.Z,{css:[_e.auxiliary.gridArea,f.l0.colWithGap(16)],children:(0,c.BX)(C.Z,{css:f.l0.colWithGap(16),children:[(0,c.tZ)(w.x,{color:"dimmest",variant:"subheadDefault",children:"Loading..."}),(0,c.tZ)(C.Z,{css:f.l0.colWithGap(16),children:(0,a.Z)(Array(3)).map((function(e,n){return(0,c.tZ)(pe.Z,{elevated:!0,css:[f.l0.height(100),f.l0.borderRadius(8)]},n.toString())}))})]})}),(0,c.tZ)(C.Z,{css:[_e.secondary.gridArea]})]})})}function Xe(e){var n=e.repl,t=e.currentUser,r=e.withSidebar,i=void 0===r||r;return u.useEffect((function(){t&&!n.currentUserPermissions.containerWrite&&(0,E.j)(E.U3.REPL_GUEST_VIEW,{page:"replView"})}),[t,n.currentUserPermissions.containerWrite]),(0,c.tZ)(C.Z,{css:[f.l0.flex.row,f.l0.flex.growAndShrink(1)],children:(0,c.BX)(C.Z,{css:[f.l0.p(16),f.l0.flex.growAndShrink(1),We({withSidebar:i})],children:[(0,c.tZ)(C.Z,{css:[_e.header.gridArea],children:(0,c.tZ)(he.Z,{repl:n,iconEditable:n.currentUserPermissions.changeIconUrl,canModerate:(null===t||void 0===t?void 0:t.isModerator)||(null===t||void 0===t?void 0:t.isAdmin)})}),(0,c.tZ)(C.Z,{css:[_e.cta.gridArea],children:(0,c.tZ)(De,{repl:n,currentUser:t})}),(0,c.BX)(C.Z,{css:[_e.main.gridArea,f.l0.colWithGap(16)],children:[(0,c.tZ)(C.Z,{css:[{height:500,"> *":{height:"100%"}}],children:(0,c.tZ)(d.Z,{repl:n,currentUser:t,enableDeeplinks:!0})}),(0,c.tZ)(ae,{repl:n,currentUser:t})]}),(0,c.BX)(C.Z,{tag:"aside",css:[_e.auxiliary.gridArea,f.l0.colWithGap(16)],children:[(0,c.tZ)(C.Z,{children:(0,c.tZ)(Ue,{repl:n})}),(0,c.tZ)(C.Z,{"data-nosnippet":!0,children:n.relatedRepls.map((function(e){var n=e.name,t=e.repls;return(0,c.BX)(C.Z,{css:f.l0.colWithGap(16),children:[(0,c.tZ)(w.h,{level:3,variant:"subheadDefault",children:n}),(0,c.tZ)(C.Z,{css:f.l0.colWithGap(16),children:t.map((function(e){return e.publishedAs===s.O2.Template?(0,c.tZ)(me.Z,{repl:e},e.id):(0,c.tZ)(G.ZP,{showOwner:!0,repl:e,maxVisibleTags:1},e.id)}))})]},n)}))})]}),(0,c.tZ)(C.Z,{css:[_e.secondary.gridArea],children:(0,c.tZ)(U,{replId:n.id})})]})})}!function(e){e.ForksModal="ForksModal",e.AuthPrompt="AuthPrompt",e.UpdateModal="UpdateModal",e.ForkModal="ForkModal"}(de||(de={}))},23223:function(e,n,t){"use strict";t.d(n,{Z:function(){return o}});var r=t(35944),i=(t(67294),t(92350));function o(e){var n=e.children,t=e.className;return(0,r.tZ)(i.ZP,{background:!1,skipHtml:!0,mentionsLink:!0,unwrapDisallowed:!0,lineBreaks:!0,className:t,children:n})}},65400:function(e,n,t){"use strict";t.d(n,{Z:function(){return w}});var r=t(26042),i=t(69396),o=t(29815),l=t(35944),a=(t(67294),t(1144)),c=t(69346),u=t(81255),s=t(7297),d=t(31230),m=t(47174),p=t(37887);function h(){var e=(0,s.Z)(["\n  query ReplViewForks($replId: String!, $count: Int!, $after: String) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        publicForkCount\n        publicReleasesForkCount\n        publicForks(count: $count, after: $after) {\n          items {\n            id\n            ...ReplPostReplCardRepl\n          }\n          pageInfo {\n            nextCursor\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return h=function(){return e},e}var f={},Z=(0,d.Ps)(h(),m.n);var v=t(6951),g=t(34847),b=t(4924),C=t(15085);function w(e){var n=function(e){var n=(0,r.Z)({},f,e);return p.a(Z,n)}({variables:{replId:e.replId,count:100}}),t=n.data,s=n.fetchMore,d=n.loading,m="Repl"===(null===t||void 0===t?void 0:t.repl.__typename)?t.repl:null,h=m?m.publicForks:null,w=m?m.publicForkCount+m.publicReleasesForkCount:null;return(0,l.BX)(c.Z,{css:[u.l0.colWithGap(8)],children:[(0,l.BX)(c.Z,{children:[null!==w?(0,l.BX)(c.Z,{css:[u.l0.display.block],children:[(0,l.tZ)(a.x,{variant:"subheadDefault",children:w})," ",(0,l.tZ)(a.x,{color:"dimmest",variant:"subheadDefault",children:(0,g.Z)("forks",w)})]}):null,d?(0,l.tZ)(a.x,{color:"dimmest",variant:"subheadDefault",children:"Loading forks..."}):null]}),(0,l.BX)(c.Z,{css:[u.l0.flex.growAndShrink(1)],children:[(0,l.tZ)(c.Z,{css:[u.l0.p(8),{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:u.TV.space16,gridAutoFlow:"dense"}],children:h?h.items.map((function(e){return(0,l.tZ)(C.Tg,{elevated:!0,css:[u.l0.borderRadius(8)],children:(0,l.tZ)(b.ZP,{showOwner:!0,repl:e})},e.id)})):null}),(null===h||void 0===h?void 0:h.pageInfo.nextCursor)?(0,l.tZ)(v.Z,{disabled:d,border:!1,color:"primary",filled:!1,fullWidth:!0,onClick:function(){d||s({variables:{after:h.pageInfo.nextCursor},updateQuery:function(e,n){if(!n||!n.fetchMoreResult)return e;var t="Repl"===e.repl.__typename?e.repl:null;if(!t)return e;var l=n.fetchMoreResult,a="Repl"===l.repl.__typename?l.repl:null;return a?(0,i.Z)((0,r.Z)({},l),{repl:(0,i.Z)((0,r.Z)({},a),{publicForks:(0,i.Z)((0,r.Z)({},a.publicForks),{items:(0,o.Z)(t.publicForks.items).concat((0,o.Z)(a.publicForks.items))})})}):e}})},children:d?"Loading...":"Load more"}):null]})]})}},33607:function(e,n,t){"use strict";t.d(n,{P9:function(){return b},Qp:function(){return x},cT:function(){return S},cq:function(){return I},g:function(){return B},kz:function(){return E},oY:function(){return T},pn:function(){return H},xB:function(){return w}});var r=t(26042),i=t(7297),o=t(31230),l=t(16092),a=t(50319);function c(){var e=(0,i.Z)(["\n  fragment ReplViewCommentsUser on User {\n    id\n    username\n    image\n    fullName\n    isBlockingCurrentUser\n    ...UserLinkUser\n  }\n  ","\n"]);return c=function(){return e},e}function u(){var e=(0,i.Z)(["\n  fragment ReplViewCommentsReplComment on ReplComment {\n    id\n    body\n    repl {\n      id\n      url\n    }\n    timeCreated\n    currentUserPermissions {\n      id\n      edit\n      delete\n      canHideComment\n      report\n    }\n    user {\n      id\n      ...ReplViewCommentsUser\n    }\n    post {\n      id\n      title\n      canPin\n      canHide\n      canChangeBoard\n      canReport\n      hasReported\n    }\n    isHidden\n  }\n  ","\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  fragment ReplViewCommentsReplCommentThread on ReplComment {\n    id\n    ...ReplViewCommentsReplComment\n    replies {\n      id\n      ...ReplViewCommentsReplComment\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function d(){var e=(0,i.Z)(["\n  mutation ReplViewCreateReplComment($input: CreateReplCommentInput!) {\n    createReplComment(input: $input) {\n      ... on ReplComment {\n        id\n        ...ReplViewCommentsReplComment\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function m(){var e=(0,i.Z)(["\n  mutation ReplViewCreateReplCommentReply(\n    $input: CreateReplCommentReplyInput!\n  ) {\n    createReplCommentReply(input: $input) {\n      ... on ReplComment {\n        id\n        ...ReplViewCommentsReplComment\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}function p(){var e=(0,i.Z)(["\n  mutation ReplViewCommentsUpdateReplComment($input: UpdateReplCommentInput!) {\n    updateReplComment(input: $input) {\n      ... on ReplComment {\n        id\n        body\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return p=function(){return e},e}function h(){var e=(0,i.Z)(["\n  mutation ReplViewCommentsDeleteReplComment($id: Int!) {\n    deleteReplComment(id: $id) {\n      ... on ReplComment {\n        id\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return h=function(){return e},e}function f(){var e=(0,i.Z)(["\n  mutation ReplViewCommentsUpdateReplPost($input: UpdatePostInput!) {\n    updatePost(input: $input) {\n      post {\n        id\n        title\n      }\n    }\n  }\n"]);return f=function(){return e},e}function Z(){var e=(0,i.Z)(["\n  mutation ToggleHiddenComment($commentId: Int!, $isHidden: Boolean!) {\n    toggleHiddenComment(commentId: $commentId, isHidden: $isHidden) {\n      ... on ReplComment {\n        id\n        ...ReplViewCommentsReplComment\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return Z=function(){return e},e}function v(){var e=(0,i.Z)(["\n  mutation ReportReplComment($commentId: Int!, $reason: String!) {\n    reportReplComment(replCommentId: $commentId, reason: $reason) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on BoardReport {\n        id\n      }\n    }\n  }\n"]);return v=function(){return e},e}var g={},b=(0,o.Ps)(c(),l._),C=(0,o.Ps)(u(),b),w=(0,o.Ps)(s(),C),y=(0,o.Ps)(d(),C);function x(e){var n=(0,r.Z)({},g,e);return a.D(y,n)}var R=(0,o.Ps)(m(),C);function S(e){var n=(0,r.Z)({},g,e);return a.D(R,n)}var k=(0,o.Ps)(p());function B(e){var n=(0,r.Z)({},g,e);return a.D(k,n)}var P=(0,o.Ps)(h());function I(e){var n=(0,r.Z)({},g,e);return a.D(P,n)}var U=(0,o.Ps)(f());function E(e){var n=(0,r.Z)({},g,e);return a.D(U,n)}var G=(0,o.Ps)(Z(),C);function T(e){var n=(0,r.Z)({},g,e);return a.D(G,n)}var _=(0,o.Ps)(v());function H(e){var n=(0,r.Z)({},g,e);return a.D(_,n)}},58057:function(e,n,t){"use strict";t.d(n,{x:function(){return O},H:function(){return $}});var r=t(26042),i=t(69396),o=t(10253),l=t(35944),a=t(87603),c=t.n(a),u=t(67294),s=t(33607),d=t(88075),m=t(93058),p=t(23223),h=t(74591),f=t(57249),Z=t(1144),v=t(69346),g=t(81255);function b(e){var n=e.title;return(0,l.BX)(v.Z,{css:[g.l0.rowWithGap(8),g.l0.py(8)],children:[(0,l.tZ)(Z.x,{variant:"subheadBig",multiline:!0,css:[{wordBreak:"break-all",flexShrink:1}],children:n}),(0,l.tZ)(Z.x,{color:"dimmer",css:[g.l0.borderRadius(16),g.l0.p(4),{border:"1px solid "+g.TV.outlineDimmer,height:"fit-content"}],children:"Post"})]})}var C=t(37424),w=t(7297),y=t(31230),x=t(37887),R=t(50319);function S(){var e=(0,w.Z)(["\n  fragment ReplPostSettingsPost on Post {\n    id\n    isAnnouncement\n    isPinned\n    isLocked\n    isHidden\n    board {\n      id\n      name\n    }\n  }\n"]);return S=function(){return e},e}function k(){var e=(0,w.Z)(["\n  query ReplPostSettings($postId: Int!) {\n    boards {\n      id\n      name\n    }\n    post(id: $postId) {\n      id\n      canPin\n      canHide\n      canChangeBoard\n      board {\n        id\n        name\n      }\n      ...ReplPostSettingsPost\n    }\n  }\n  ","\n"]);return k=function(){return e},e}function B(){var e=(0,w.Z)(["\n  mutation ReplPostSettingsUpdatePost($input: UpdatePostInput!) {\n    updatePost(input: $input) {\n      post {\n        id\n        ...ReplPostSettingsPost\n      }\n    }\n  }\n  ","\n"]);return B=function(){return e},e}var P={},I=(0,y.Ps)(S()),U=(0,y.Ps)(k(),I);var E=(0,y.Ps)(B(),I);var G=t(15085),T=G.KD.label;function _(e){var n=e.children;return(0,l.tZ)(G.G7,{css:[G.l0.rowWithGap(8),G.l0.align.center],children:n})}function H(e){var n,t=e.postId,i=function(e){p.loading||h&&m({variables:{input:(0,r.Z)({id:h.id},e)}})},a=(0,C.H)(),c=function(e){var n=(0,r.Z)({},P,e);return x.a(U,n)}({variables:{postId:t}}),u=c.data,s=c.loading,d=(0,o.Z)(function(e){var n=(0,r.Z)({},P,e);return R.D(E,n)}(),2),m=d[0],p=d[1];if(s)return null;var h="Post"===(null===u||void 0===u||null===(n=u.post)||void 0===n?void 0:n.__typename)?u.post:null,f=null===u||void 0===u?void 0:u.boards;if(!h||!f)return(0,l.tZ)(G.xv,{children:"Something went wrong"});var Z={isPinned:a("isPinned"),isHidden:a("isHidden"),boardId:a("boardId")};return(0,l.BX)(G.G7,{css:[G.l0.colWithGap(24)],children:[(0,l.tZ)(G.h4,{level:1,variant:"headerDefault",children:"Post settings"}),(0,l.BX)(G.G7,{css:[G.l0.colWithGap(8)],children:[(0,l.BX)(_,{children:[(0,l.tZ)(G.XZ,{id:Z.isPinned,checked:Boolean(h.isPinned),onChange:function(){return i({isPinned:!h.isPinned})}}),(0,l.tZ)(T,{htmlFor:Z.isPinned,children:"Pin post to Talk feed"})]}),h.canHide?(0,l.BX)(_,{children:[(0,l.tZ)(G.XZ,{id:Z.isHidden,checked:Boolean(h.isHidden),onChange:function(e){return i({isHidden:e.target.checked})}}),(0,l.tZ)(T,{htmlFor:Z.isHidden,children:"Hide post from listing"})]}):null]}),h.canChangeBoard?(0,l.BX)(_,{children:[(0,l.tZ)(G.Ph,{id:Z.boardId,placeholder:"Select a board",items:f.map((function(e){return{value:e,title:e.name}})),initialSelectedItem:h.board?{value:h.board,title:h.board.name}:void 0,onChange:function(e){return i({boardId:e.value.id})}}),(0,l.tZ)(T,{htmlFor:Z.isHidden,children:"Change board (requires reload)"})]}):null]})}var W=t(11163),D=t(54917),A=t(60977),X=t(64184),V=t(53429),L=G.KD.form;function F(e){var n=e.commentId,t=e.onDone,r=(0,u.useState)(""),i=r[0],a=r[1],c=(0,m.Z)(),d=c.showConfirm,p=c.showError,h=(0,o.Z)((0,s.pn)({variables:{commentId:n,reason:i},onCompleted:function(e){"BoardReport"===e.reportReplComment.__typename?(d("Comment reported"),t()):p(e.reportReplComment.message)}}),2),f=h[0],Z=h[1].loading;return(0,l.BX)(G.G7,{css:[G.l0.colWithGap(24)],children:[(0,l.tZ)(G.h4,{level:2,variant:"subheadBig",children:"Report Comment"}),(0,l.BX)(L,{onSubmit:function(e){e.preventDefault(),i?f():p("Please specify a reason to report this comment.")},css:[G.l0.colWithGap(32)],children:[(0,l.tZ)(G.G7,{css:[G.l0.colWithGap(8)],children:(0,l.tZ)(G.B,{placeholder:"Why do you want to report this comment?",value:i,onChange:function(e){return a(e.currentTarget.value)},css:[G.l0.minHeight(64),G.l0.maxHeight(128),{resize:"vertical"}]})}),(0,l.BX)(G.G7,{css:[G.l0.rowWithGap(16),G.l0.justify.end],children:[(0,l.tZ)(G.G7,{children:(0,l.tZ)(G.zx,{type:"button",text:"Cancel",onClick:function(){return t()}})}),(0,l.tZ)(G.G7,{children:(0,l.tZ)(G.zx,{disabled:Z,text:Z?"Reporting":"Report Comment",type:"submit",colorway:"negative",iconLeft:(0,l.tZ)(V.Z,{})})})]})]})]})}function M(e){var n=e.initialValue,t=e.commentId,r=e.onReply,i=e.onCancel,a=(0,u.useState)(null),c=a[0],d=a[1],m=(0,o.Z)((0,s.cT)({onCompleted:function(e){var n="ReplComment"===e.createReplCommentReply.__typename?e.createReplCommentReply:null;if(n)return(0,A.j)(A.U3.COMMENT_MADE,{source:"spotlight"}),void r(n);var t="UserError"===e.createReplCommentReply.__typename||"UnauthorizedError"===e.createReplCommentReply.__typename?e.createReplCommentReply.message:null;t&&d(t)}}),2),p=m[0],h=m[1];return(0,l.tZ)(D.EQ,{error:c,initialValue:n,onCancel:i,onSubmit:function(e){h.loading||p({variables:{input:{body:e,replCommentId:t}}})}})}function $(e){var n=e.replId,t=e.placeholder,r=e.onComment,i=e.autoFocus,a=void 0!==i&&i,c=e.onCancel,m=void 0===c?function(){}:c,p=(0,u.useState)(!1),h=p[0],f=p[1],Z=(0,u.useState)(null),v=Z[0],g=Z[1],b=(0,o.Z)((0,s.Qp)({onCompleted:function(e){var n="ReplComment"===e.createReplComment.__typename?e.createReplComment:null;if(n)return(0,A.j)(A.U3.COMMENT_MADE,{source:"spotlight"}),f(!0),void r(n);var t="UserError"===e.createReplComment.__typename||"UnauthorizedError"===e.createReplComment.__typename?e.createReplComment.message:null;t&&g(t)}}),2),C=b[0],w=b[1];return h?(0,l.tZ)(G.E_,{icon:(0,l.tZ)(d.Z,{}),closable:!0,closeAction:function(){m(),f(!1)},colorway:"positive",text:"Comment added"}):(0,l.tZ)(D.EQ,{autoFocus:a,initialValue:"",placeholder:t,hideControls:!0,error:v,onCancel:function(){m(),g(null)},onSubmit:function(e){w.loading||C({variables:{input:{body:e,replId:n}}})}})}var z={background:g.TV.backgroundDefault,boxShadow:"0 0 0 ".concat(g.TV.space8," ").concat(g.TV.backgroundDefault,",0 0 0 10px ").concat(g.TV.accentPrimaryDimmest),borderRadius:g.TV.borderRadius4,scrollPaddingTop:"100px"};function q(e){var n=e.comment,t=e.onReply,a=e.onDelete,f=e.replyToId,Z=e.toggleRepliesButton,v=e.commentsEnabled,g=(0,W.useRouter)().query,b=g.c,C=Number(b),w=(0,m.Z)().showNotice,y=(0,o.Z)((0,s.g)(),2),x=y[0],R=y[1],S=(0,o.Z)((0,s.cq)({variables:{id:n.id},onCompleted:function(){H(null),a(n)}}),2),k=S[0],B=S[1],P=(0,o.Z)((0,s.oY)({variables:{commentId:n.id,isHidden:!n.isHidden}}),1)[0],I=(0,u.useState)(!1),U=I[0],E=I[1],T=(0,u.useState)(null),_=T[0],H=T[1],A=_===D.nQ.Edit,V=n.user;(0,u.useEffect)((function(){var e;_===D.nQ.Hide||_===D.nQ.Show?P():_===D.nQ.CopyLink&&(null===n||void 0===n||null===(e=n.repl)||void 0===e?void 0:e.url)&&(window.navigator.clipboard.writeText(window.location.protocol+"//"+window.location.host+n.repl.url+"?c="+n.id).then((function(){w((0,l.tZ)(G.xv,{children:"Copied!"}))})),H(null))}),[_,P]);var L=(0,u.useRef)(null),$=C===n.id;if((0,u.useEffect)((function(){(null===L||void 0===L?void 0:L.current)&&$&&L.current.scrollIntoView({behavior:"smooth"})}),[$,g.c]),!V)return null;var q=n.currentUserPermissions,j=Boolean(q);return(0,l.BX)(G.G7,{css:[G.l0.rowWithGap(8),{":hover .actions":{opacity:1},position:"relative"},$?z:null],children:[(0,l.tZ)(G.G7,{innerRef:L,css:[{position:"absolute",top:"-100px",left:"0"}]}),(0,l.tZ)(D.Yt,{user:V}),(0,l.BX)(G.G7,{css:[G.l0.flex.growAndShrink(1),G.l0.colWithGap(4)],children:[(0,l.BX)(G.G7,{css:[G.l0.align.center,G.l0.rowWithGap(16)],children:[(0,l.tZ)(D.wb,{user:V,timeCreated:n.timeCreated}),n.isHidden?(0,l.tZ)(G.u,{tooltip:"This comment is hidden",children:(0,l.tZ)(X.Z,{size:12,"alt-text":"This comment is hidden"})}):null]}),A?(0,l.tZ)(D.EQ,{buttonText:"Save",buttonIcon:(0,l.tZ)(d.Z,{}),initialValue:n.body,onSubmit:function(e){R.loading||(x({variables:{input:{id:n.id,body:e}},optimisticResponse:{updateReplComment:(0,i.Z)((0,r.Z)({},n),{body:e})}}),H(null))},onCancel:function(){return H(null)}}):(0,l.tZ)("div",{className:c().dynamic([["4174ac2fa2210099",[n.isHidden?"var(--foreground-dimmest)":"default"]]])+" comment-container",children:(0,l.tZ)(p.Z,{children:n.body})}),U?(0,l.tZ)(G.G7,{css:[G.l0.pt(12)],children:(0,l.tZ)(M,{initialValue:"@".concat(V.username," "),commentId:f,onReply:function(e){t(e),E(!1)},onCancel:function(){return E(!1)}})}):(0,l.BX)(G.G7,{css:[G.l0.rowWithGap(8),{marginLeft:-4}],children:[j&&!n.isHidden&&v?(0,l.tZ)(D.g4,{onClick:function(){return E(!0)}}):null,Z]})]}),A?null:(0,l.tZ)(G.G7,{css:[U&&{visibility:"hidden"}],children:(0,l.tZ)(D.pl,{className:"actions",canEdit:Boolean(null===q||void 0===q?void 0:q.edit),canReport:Boolean(null===q||void 0===q?void 0:q.report),canEditSettings:!1,canDelete:Boolean(null===q||void 0===q?void 0:q.delete),onAction:H,canHideComment:Boolean(null===q||void 0===q?void 0:q.canHideComment)&&!n.isHidden,canShowComment:Boolean(null===q||void 0===q?void 0:q.canHideComment)&&Boolean(n.isHidden)})}),(0,l.tZ)(G.u_,{isOpen:_===D.nQ.Delete,onRequestClose:function(){return H(null)},children:(0,l.tZ)(h.Z,{delete:function(){B.loading||k({variables:{id:n.id}})},entityType:"comment",hideModal:function(){return H(null)}})}),(0,l.tZ)(G.u_,{isOpen:_===D.nQ.Report,onRequestClose:function(){return H(null)},children:(0,l.tZ)(F,{commentId:n.id,onDone:function(){return H(null)}})}),(0,l.tZ)(c(),{id:"4174ac2fa2210099",dynamic:[n.isHidden?"var(--foreground-dimmest)":"default"],children:".comment-container.__jsx-style-dynamic-selector .rendered-markdown{color:".concat(n.isHidden?"var(--foreground-dimmest)":"default","}")})]})}function j(e){var n=e.initialTitle,t=e.initialBody,r=e.onSubmit,i=e.onCancel,o=(0,u.useState)(n),a=o[0],c=o[1],s=(0,u.useState)(t),m=s[0],p=s[1],h=(0,D.Ex)(),Z=(0,C.H)();return(0,l.BX)(D.l0,{css:[G.l0.colWithGap(8),G.l0.mt(8)],onSubmit:function(e){e.preventDefault(),r({title:a,body:m})},children:[(0,l.BX)(G.G7,{css:[G.l0.colWithGap(16)],children:[(0,l.BX)(G.G7,{css:[G.l0.colWithGap(4)],children:[(0,l.tZ)("label",{htmlFor:Z("title"),children:(0,l.tZ)(G.xv,{color:"dimmer",variant:"small",children:"Title"})}),(0,l.tZ)(G.II,{value:a,placeholder:"Give your post a title",onChange:function(e){return c(e.currentTarget.value)},id:Z("title")})]}),(0,l.tZ)(f.Z,{onKeyDown:function(e){"Enter"===e.key&&e.metaKey&&r({title:a,body:m})},initialValue:m,onChange:p,userSearch:h,autoFocus:!1,showLabel:!0})]}),(0,l.BX)(G.G7,{css:[G.l0.rowWithGap(8),G.l0.justify.end],children:[(0,l.tZ)(G.zx,{text:"Cancel",onClick:i}),(0,l.tZ)(G.zx,{type:"submit",iconLeft:(0,l.tZ)(d.Z,{}),text:"Save",onClick:function(){},colorway:"primary",disabled:t===m&&n===a})]})]})}function N(e){var n=e.post,t=e.comment,a=e.onReply,d=e.onDelete,f=e.replyToId,Z=e.toggleRepliesButton,v=e.commentsEnabled,g=(0,W.useRouter)().query.c,C=Number(g),w=(0,m.Z)(),y=w.showError,x=w.showNotice,R=(0,o.Z)((0,s.kz)({onError:function(e){return y(e.message)}}),2),S=R[0],k=R[1],B=(0,o.Z)((0,s.g)(),2),P=B[0],I=B[1],U=(0,o.Z)((0,s.cq)({variables:{id:t.id},onCompleted:function(){N(null),d(t)}}),2),E=U[0],T=U[1],_=(0,o.Z)((0,s.oY)({variables:{commentId:t.id,isHidden:!t.isHidden}}),1)[0],A=(0,u.useState)(!1),V=A[0],L=A[1],$=(0,u.useState)(null),q=$[0],N=$[1],O=q===D.nQ.Edit,Q=t.user;(0,u.useEffect)((function(){var e;q===D.nQ.Hide||q===D.nQ.Show?_():q===D.nQ.CopyLink&&(null===t||void 0===t||null===(e=t.repl)||void 0===e?void 0:e.url)&&(window.navigator.clipboard.writeText(window.location.protocol+"//"+window.location.host+t.repl.url+"?c="+t.id).then((function(){x((0,l.tZ)(G.xv,{children:"Copied!"}))})),N(null))}),[q,_]);var Y=(0,u.useRef)(null),K=C===t.id;if((0,u.useEffect)((function(){(null===Y||void 0===Y?void 0:Y.current)&&K&&(null===Y||void 0===Y||Y.current.scrollIntoView({behavior:"smooth"}))}),[K]),!Q)return null;var J=t.currentUserPermissions,ee=Boolean(J),ne=Boolean(n.canPin||n.canChangeBoard||n.canHide);return(0,l.BX)(G.G7,{css:[G.l0.rowWithGap(8),{":hover .actions":{opacity:1},position:"relative"},K?z:null],children:[(0,l.tZ)(G.G7,{innerRef:Y,css:[{position:"absolute",top:"-100px",left:"0"}]}),(0,l.tZ)(D.Yt,{user:Q}),(0,l.BX)(G.G7,{css:[G.l0.flex.growAndShrink(1),G.l0.colWithGap(4),{"& .rendered-markdown":{backgroundColor:"transparent"}}],children:[(0,l.BX)(G.G7,{css:[G.l0.align.center,G.l0.rowWithGap(16)],children:[(0,l.tZ)(D.wb,{user:Q,timeCreated:t.timeCreated,action:"shared an update"}),t.isHidden?(0,l.tZ)(G.u,{tooltip:"This comment is hidden",children:(0,l.tZ)(X.Z,{size:12,"alt-text":"This comment is hidden"})}):null]}),O?(0,l.tZ)(j,{initialTitle:n.title||"",initialBody:t.body,onSubmit:function(e){var o=e.title,l=e.body;I.loading||k.loading||(S({variables:{input:{id:n.id,title:o}},optimisticResponse:{updatePost:{post:(0,i.Z)((0,r.Z)({},n),{title:o})}}}),P({variables:{input:{id:t.id,body:l}},optimisticResponse:{updateReplComment:(0,i.Z)((0,r.Z)({},t),{body:l})}}),N(null))},onCancel:function(){return N(null)}}):(0,l.BX)(l.HY,{children:[n.title?(0,l.tZ)(G.G7,{children:(0,l.tZ)(b,{title:n.title})}):null,(0,l.tZ)("div",{className:c().dynamic([["4174ac2fa2210099",[t.isHidden?"var(--foreground-dimmest)":"default"]]])+" comment-container",children:(0,l.tZ)(p.Z,{children:t.body})})]}),V?(0,l.tZ)(G.G7,{css:[G.l0.pt(12)],children:(0,l.tZ)(M,{initialValue:"@".concat(Q.username," "),commentId:f,onReply:function(e){a(e),L(!1)},onCancel:function(){return L(!1)}})}):(0,l.BX)(G.G7,{css:[G.l0.rowWithGap(2),{marginLeft:-4}],children:[ee&&v?(0,l.tZ)(D.g4,{onClick:function(){return L(!0)}}):null,Z]})]}),O?null:(0,l.tZ)(G.G7,{css:[V&&{visibility:"hidden"}],children:(0,l.tZ)(D.pl,{className:"actions",canEdit:Boolean(null===J||void 0===J?void 0:J.edit),canReport:n.canReport,canEditSettings:ne,canDelete:Boolean(null===J||void 0===J?void 0:J.delete),onAction:N,canHideComment:Boolean(null===J||void 0===J?void 0:J.canHideComment)&&!t.isHidden,canShowComment:Boolean(null===J||void 0===J?void 0:J.canHideComment)&&Boolean(t.isHidden)})}),(0,l.tZ)(G.u_,{isOpen:q===D.nQ.Delete,onRequestClose:function(){return N(null)},children:(0,l.tZ)(h.Z,{delete:function(){T.loading||E({variables:{id:t.id}})},entityType:"post",hideModal:function(){return N(null)}})}),(0,l.tZ)(G.u_,{isOpen:q===D.nQ.Report,onRequestClose:function(){return N(null)},children:(0,l.tZ)(F,{commentId:t.id,onDone:function(){return N(null)}})}),(0,l.tZ)(G.u_,{isOpen:q===D.nQ.Settings,onRequestClose:function(){return N(null)},children:(0,l.tZ)(H,{postId:n.id})}),(0,l.tZ)(c(),{id:"4174ac2fa2210099",dynamic:[t.isHidden?"var(--foreground-dimmest)":"default"],children:".comment-container.__jsx-style-dynamic-selector .rendered-markdown{color:".concat(t.isHidden?"var(--foreground-dimmest)":"default","}")})]})}function O(e){var n,t=e.comment,r=e.onReply,i=e.onDelete,o=e.commentsEnabled,a=(0,W.useRouter)().query.c,c=Number(a),s=t.replies,d=(0,u.useState)(s.some((function(e){return e.id===c}))),m=d[0],p=d[1],h=s.length,f=h?(0,l.tZ)(D.tE,{onClick:function(){return p((function(e){return!e}))},repliesCount:h,isExpanded:m}):null,Z=(null===(n=t.post)||void 0===n?void 0:n.title)?t.post:null;return Z?(0,l.BX)(G.Tg,{elevated:!0,css:[G.l0.colWithGap(32),G.l0.p(16),G.l0.borderRadius(8)],children:[(0,l.tZ)(N,{replyToId:t.id,post:Z,comment:t,toggleRepliesButton:f,onReply:function(e){p(!0),r(e)},onDelete:i,commentsEnabled:o}),m?(0,l.tZ)(G.G7,{css:[G.l0.colWithGap(32),G.l0.pl(32)],children:s.filter((function(e){var n;return Boolean(null===(n=e.currentUserPermissions)||void 0===n?void 0:n.canHideComment)||!e.isHidden})).map((function(e){return(0,l.tZ)(q,{commentsEnabled:o,comment:e,onReply:r,onDelete:i,replyToId:t.id},e.id)}))}):null]}):(0,l.BX)(G.G7,{css:[G.l0.colWithGap(32)],children:[(0,l.tZ)(q,{commentsEnabled:o,replyToId:t.id,comment:t,toggleRepliesButton:f,onReply:function(e){p(!0),r(e)},onDelete:i}),m&&0!==h?(0,l.tZ)(G.G7,{css:[G.l0.colWithGap(32),G.l0.pl(32)],children:s.filter((function(e){var n;return Boolean(null===e||void 0===e||null===(n=e.currentUserPermissions)||void 0===n?void 0:n.canHideComment)||!e.isHidden})).map((function(e){return(0,l.tZ)(q,{commentsEnabled:o,comment:e,onReply:r,onDelete:i,replyToId:t.id},e.id)}))}):null]})}},90473:function(e,n,t){"use strict";t.d(n,{ex:function(){return m}});var r=t(26042),i=t(7297),o=t(31230),l=t(33607),a=t(67620),c=t(37887);function u(){var e=(0,i.Z)(["\n  query ReplViewComments($replId: String!, $count: Int = 100, $after: String) {\n    currentUser {\n      id\n      username\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        title\n        url\n        owner {\n          ... on User {\n            id\n            ...ReplViewCommentsUser\n          }\n          ... on Team {\n            id\n          }\n        }\n        multiplayers {\n          id\n          ...ReplViewCommentsUser\n        }\n        currentUserPermissions {\n          changeCommentSettings\n        }\n        commentSettings {\n          id\n          enabled\n        }\n        comments(count: $count, after: $after) {\n          items {\n            id\n            ...ReplViewCommentsReplCommentThread\n          }\n          pageInfo {\n            nextCursor\n          }\n        }\n        ...ReplViewReplCommentsHeaderRepl\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return u=function(){return e},e}var s={},d=(0,o.Ps)(u(),l.P9,l.xB,a.d4);function m(e){var n=(0,r.Z)({},s,e);return c.a(d,n)}},67620:function(e,n,t){"use strict";t.d(n,{d4:function(){return s},k2:function(){return m}});var r=t(26042),i=t(7297),o=t(31230),l=t(50319);function a(){var e=(0,i.Z)(["\n  fragment ReplViewReplCommentsHeaderRepl on Repl {\n    id\n    commentCount\n    currentUserPermissions {\n      changeCommentSettings\n    }\n    commentSettings {\n      id\n      enabled\n    }\n  }\n"]);return a=function(){return e},e}function c(){var e=(0,i.Z)(["\n  mutation ReplViewReplCommentsHeaderSetReplCommentSettings(\n    $input: SetReplCommentSettingsInput!\n  ) {\n    setReplCommentSettings(input: $input) {\n      ... on Repl {\n        id\n        ...ReplViewReplCommentsHeaderRepl\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var u={},s=(0,o.Ps)(a()),d=(0,o.Ps)(c(),s);function m(e){var n=(0,r.Z)({},u,e);return l.D(d,n)}},25958:function(e,n,t){"use strict";t.d(n,{Z:function(){return v}});var r=t(26042),i=t(69396),o=t(10253),l=t(35944),a=(t(67294),t(48293)),c=t(81255),u=t(1144),s=t(69346),d=t(88961),m=t(2885),p=t(49483),h=t(53427),f=t(87251),Z=t(7657);function v(e){var n=e.repl,t=e.iconEditable,v=e.canModerate,g=(0,o.Z)((0,a.cu)(),1)[0],b=(0,p.W)((function(e){return g({variables:{input:{id:n.id,iconUrl:e}},optimisticResponse:{updateRepl:{__typename:"UpdateReplPayload",repl:(0,i.Z)((0,r.Z)({},n),{iconUrl:e})}}})}));return(0,l.BX)(s.Z,{css:[c.l0.colWithGap(8)],children:[(0,l.BX)(s.Z,{css:[c.l0.rowWithGap(8),c.l0.align.center],children:[t?null:(0,l.tZ)(h.ZP,{iconUrl:n.iconUrl,alt:"",size:32}),t?(0,l.tZ)(p.Z,{size:32,value:b.previewUrl||n.iconUrl,onUpload:function(e){return b.uploadImage(e,Z.N.ReplIcon)},isUploading:Boolean(b.previewUrl)}):null,(0,l.tZ)(u.h,{variant:"headerBig",level:1,css:[c.l0.flex.growAndShrink(1),{wordBreak:"break-all"}],children:n.title}),(0,l.tZ)(m.Z,{repl:n,canModerate:v,source:"coverPage"})]}),b.error?(0,l.tZ)(s.Z,{css:[c.l0.align.start],children:(0,l.tZ)(f.Z,{icon:(0,l.tZ)(d.Z,{}),colorway:"negative",text:b.error,closable:!0,closeAction:b.clearError})}):null]})}},16496:function(e){!function(){var n=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"],t="undefined"!==typeof window,r=t&&null!=window.mozInnerScreenX;function i(e,i,o){if(!t)throw new Error("textarea-caret-position#getCaretCoordinates should only be called in a browser");var l=o&&o.debug||!1;if(l){var a=document.querySelector("#input-textarea-caret-position-mirror-div");a&&a.parentNode.removeChild(a)}var c=document.createElement("div");c.id="input-textarea-caret-position-mirror-div",document.body.appendChild(c);var u=c.style,s=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,d="INPUT"===e.nodeName;u.whiteSpace="pre-wrap",d||(u.wordWrap="break-word"),u.position="absolute",l||(u.visibility="hidden"),n.forEach((function(e){d&&"lineHeight"===e?u.lineHeight=s.height:u[e]=s[e]})),r?e.scrollHeight>parseInt(s.height)&&(u.overflowY="scroll"):u.overflow="hidden",c.textContent=e.value.substring(0,i),d&&(c.textContent=c.textContent.replace(/\s/g,"\xa0"));var m=document.createElement("span");m.textContent=e.value.substring(i)||".",c.appendChild(m);var p={top:m.offsetTop+parseInt(s.borderTopWidth),left:m.offsetLeft+parseInt(s.borderLeftWidth),height:parseInt(s.lineHeight)};return l?m.style.backgroundColor="#aaa":document.body.removeChild(c),p}"undefined"!=typeof e.exports?e.exports=i:t&&(window.getCaretCoordinates=i)}()}}]);
//# sourceMappingURL=2353-4e62b5aa4b8b9a41.js.map