(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9460,4924],{60937:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/replEnvironment2",function(){return t(43329)}])},7243:function(e,n,t){"use strict";t.d(n,{Z:function(){return a}});var r=t(35944),i=(t(67294),t(69346)),o=t(81255);function a(e){var n=e.gap,t=e.inset,a=e.children,l=e.className;return(0,r.tZ)(i.Z,{className:l,css:[{overflowX:"auto",overflowY:"hidden","::-webkit-scrollbar":[o.l0.display.none]}],children:(0,r.tZ)(i.Z,{css:[o.l0.px(t),o.l0.rowWithGap(n),{width:"fit-content"}],children:a})})}},42699:function(e,n,t){"use strict";t.d(n,{l:function(){return o},x:function(){return i}});var r=t(60977),i=function(e){(0,r.j)(r.U3.COURSE_ACTION,e)},o=function(e){(0,r.j)(r.U3.LESSON_ACTION,e)}},21767:function(e,n,t){"use strict";t.d(n,{Y:function(){return o}});var r=t(7297);function i(){var e=(0,r.Z)(["\n  fragment ReplLinkRepl on Repl {\n    id\n    url\n    nextPagePathname\n  }\n"]);return i=function(){return e},e}var o=(0,t(31230).Ps)(i())},64181:function(e,n,t){"use strict";t.d(n,{SD:function(){return f},SM:function(){return d},yO:function(){return p}});var r,i=t(10253),o=t(16998),a=t(60977),l=t(91131),s=t(28592),c=t(67294),u=t(97808),d=(0,l.cn)(void 0),p=(0,l.cn)((function(e){return e(r)}),(function(e,n,t){var i=e(r),l=e(d);n(r,t),i.locale!==t.locale&&(l&&t.locale!==u.ZW?(o.Z.set(u.nO,t.locale),(0,a.j)(a.U3.LANGUAGE_CHANGED,{from:i.locale,to:t.locale}),n(d,u.ZW)):t.locale===u.ZW&&(o.Z.remove(u.nO),n(d,i.locale)))})),f=function(e){var n=e.courseSlug,t=e.locale,i=(0,u.QW)(n,t);return r=(0,l.cn)((0,u.QW)(n,t)),i};n.ZP=function(e){var n=e.courseSlug,t=e.countryCode,a=e.defaultLocale;if(!r){var f=o.Z.get(u.nO);f&&!a&&(a=f),r=(0,l.cn)((0,u.QW)(n,a))}var h=(0,i.Z)((0,l.KO)(p),2),v=h[0],m=h[1],g=(0,i.Z)((0,l.KO)(d),2)[1],Z=(0,s.useLDClient)(),y=null===Z||void 0===Z?void 0:Z.variation("flag-100-days-localized-version-if-available",!1);return(0,c.useMemo)((function(){if(!y||a!==u.ZW)return v;var e=o.Z.get(u.nO);if(e){var r=(0,u.QW)(n,e);return m(r),g(u.ZW),r}var i=(0,u.gO)(t,navigator.languages),l=i.locale,s=i.optionalSwitch,c=(0,u.QW)(n,l);return m(c),g(s),c}),[y,a,t,n,m,g,v])}},54854:function(e,n,t){"use strict";function r(e,n){if(!e)return null;var t=e[n];return t?Array.isArray(t)?null:t:null}t.d(n,{Z:function(){return r}})},52008:function(e,n,t){"use strict";t.d(n,{JM:function(){return p},SL:function(){return u}});var r=t(26042),i=t(7297),o=t(31230),a=t(37887);function l(){var e=(0,i.Z)(['\n  fragment ReplEnvironment2CurrentUserLayoutFlags on CurrentUser {\n    id\n    flagGhostrunner: gate(feature: "flag-ghostrunner")\n    flagLayoutNavigator: gate(feature: "flag-layout-navigator")\n  }\n']);return l=function(){return e},e}function s(){var e=(0,i.Z)(["\n  query ReplEnvironment2LayoutFlags {\n    currentUser {\n      id\n      ...ReplEnvironment2CurrentUserLayoutFlags\n    }\n  }\n  ","\n"]);return s=function(){return e},e}var c={},u=(0,o.Ps)(l()),d=(0,o.Ps)(s(),u);function p(e){var n=(0,r.Z)({},c,e);return a.a(d,n)}},79611:function(e,n,t){"use strict";t.d(n,{Z:function(){return o}});var r=t(67294),i=t(11163);function o(e,n){var t=(0,i.useRouter)();(0,r.useEffect)((function(){}),[e,t]),(0,r.useEffect)((function(){if("SubscriptionExpiredError"===(null===e||void 0===e?void 0:e.__typename)){var r=e.replId,i=e.isOwner,o=n.split("/")[1].slice(1);t.replace({pathname:"/expiredPrivateRepl",query:{isOwner:i,ownerUsername:o,replId:r}},t.asPath)}}),[e,t,n])}},5804:function(e,n,t){"use strict";t.d(n,{JL:function(){return x},L8:function(){return Z},M6:function(){return g},QH:function(){return y},nr:function(){return m}});var r=t(14924),i=t(26042),o=t(29815),a=t(35944),l=t(67294),s=t(69346),c=t(81255),u=t(1144),d=t(46197),p=t(44365),f=t(72917),h=t(7243),v=t(68480);function m(e,n){var t,r=(null===(t=n.tags)||void 0===t?void 0:t.length)?n.tags.join(","):null;return{href:{pathname:"/postsFeed",query:{boardSlug:r,q:e}},as:{pathname:r?"/community/".concat(r):"/community/all",query:{q:e}}}}function g(e,n){return n?{href:{pathname:"/postsFeed",query:{boardSlug:e,order:n.order}},as:{pathname:"/community/".concat(e),query:(0,i.Z)({},n.order!==p.eR?{order:n.order.toLowerCase()}:{})}}:{href:{pathname:"/postsFeed",query:{boardSlug:e}},as:"/community/".concat(e)}}function Z(e){return g("all",e)}function y(e,n){var t=n.tags?n.tags.join(","):"all";return{href:{pathname:"/postsFeed",query:{boardSlug:t,order:(0,p.Zb)(e)}},as:{pathname:"/community/".concat(t),query:(0,i.Z)({},e!==p.eR?{order:(0,p.Zb)(e)}:{})}}}var b=s.K.div,w=v.Mz+32;function x(e){var n,t,i=e.tagGroups,p=e.params,m=(0,o.Z)(i.official).concat((0,o.Z)(i.community)).map((function(e){var n,t=Boolean(null===(n=p.tags)||void 0===n?void 0:n.includes(e.id)),r=t?Z(p):g(e.id,p);return(0,a.tZ)(f.t,{tag:e,link:r,isActive:t},e.id)})),y=(0,l.useState)(!1),x=y[0],k=y[1],C=(0,l.useRef)(null);return(0,l.useEffect)((function(){if(C.current){var e=new window.IntersectionObserver((function(e){e.forEach((function(e){window.scrollY<e.boundingClientRect.top-w?k(!1):k(!e.isIntersecting)}))}),{root:null,rootMargin:"".concat(-w,"px 0px 0px 0px"),threshold:1}),n=C.current;return e.observe(n),function(){e.unobserve(n),e.disconnect()}}}),[]),(0,a.BX)(s.Z,{children:[(0,a.tZ)(b,{ref:C}),(0,a.BX)(s.Z,{css:[c.l0.colWithGap(16),x&&(0,r.Z)({},d.A.desktop,[c.l0.position.fixed,c.l0.overflowY("auto"),c.l0.height("calc(100vh - ".concat(v.Mz,"px)")),c.l0.py(32),{top:v.Mz}])],children:[(0,a.tZ)(u.x,{color:"dimmer",children:"TOP TAGS"}),(0,a.BX)(s.Z,{children:[(0,a.tZ)(h.Z,{gap:8,inset:16,css:[(n={},(0,r.Z)(n,d.A.desktop,[c.l0.display.none]),(0,r.Z)(n,"marginLeft","calc(-1 * ".concat(c.TV.space16,")")),(0,r.Z)(n,"marginRight","calc(-1 * ".concat(c.TV.space16,")")),n)],children:m}),(0,a.tZ)(s.Z,{css:(t={},(0,r.Z)(t,d.A.mobile,[c.l0.display.none]),(0,r.Z)(t,d.A.desktop,[c.l0.colWithGap(32)]),t),children:(0,a.tZ)(s.Z,{css:[c.l0.colWithGap(8),c.l0.align.start],children:m})})]})]})]})}},4924:function(e,n,t){"use strict";t.d(n,{Vs:function(){return b},ZP:function(){return x},p0:function(){return w}});var r=t(26042),i=t(69396),o=t(35944),a=(t(67294),t(41664)),l=t.n(a),s=t(70917),c=t(15085),u=t(53427),d=t(69928),p=t(5804),f=t(72917),h=t(88046),v=t(82447),m=t(45273),g=t(94718),Z=c.KD.a,y=(0,s.iv)({"::after":{content:'""',position:"absolute",top:0,right:0,bottom:0,left:0,display:"block",zIndex:1}});function b(e){var n=e.tags,t=e.maxVisible,r=void 0===t?3:t,i=e.onTagClick,a=n.slice(0,r),l=n.length-a.length;return(0,o.BX)(c.G7,{css:[c.l0.rowWithGap(4),c.l0.align.center],children:[a.map((function(e){return(0,o.tZ)(f.t,{small:!0,tag:e,link:(0,p.M6)(e.id),onClick:i},e.id)})),l>0?(0,o.BX)(c.xv,{variant:"small",color:"dimmest",children:["+",l]}):null]})}function w(e){var n=e.repl,t=e.showOwner,a=e.maxVisibleTags,s=e.onReplClick,p=e.onUserClick,f=e.onTagClick,w=n.owner;return(0,o.BX)(c.G7,{css:[c.l0.colWithGap(16)],children:[(0,o.BX)(c.G7,{css:[c.l0.rowWithGap(8),c.l0.align.start,c.l0.flex.growAndShrink(1)],children:[(0,o.tZ)(u.ZP,{size:84,iconUrl:n.iconUrl,alt:n.title}),(0,o.BX)(c.G7,{css:[c.l0.flex.growAndShrink(1),c.l0.colWithGap(4)],children:[(0,o.tZ)(l(),(0,i.Z)((0,r.Z)({passHref:!0},(0,h.j3)(n)),{children:(0,o.tZ)(Z,{css:[{color:"inherit"},y],onClick:s,children:(0,o.tZ)(c.xv,{variant:"subheadBig",children:n.title})})})),t&&w?(0,o.tZ)(c.G7,{css:[{maxWidth:"fit-content",zIndex:1}],children:(0,o.tZ)(g.Z,{username:w.username,children:(0,o.tZ)(v.ZP,{user:w,children:(0,o.BX)(Z,{css:[{color:"inherit"},c.l0.rowWithGap(4),c.l0.align.center,c.l0.pr(16)],onClick:p,children:[(0,o.tZ)(m.Z,{src:w.image,username:w.username,size:16,layout:"intrinsic"}),(0,o.tZ)(c.xv,{children:w.username})]})})})}):null,n.description?(0,o.tZ)(c.xv,{color:"dimmer",maxLines:2,css:[c.l0.maxWidth(450)],children:n.description}):null]})]}),(0,o.BX)(c.G7,{css:[c.l0.rowWithGap(8),c.l0.justify.spaceBetween,c.l0.flex.wrap],children:[(0,o.tZ)(d.Z,{css:[c.l0.pb(2)],repl:n}),a?(0,o.tZ)(c.G7,{css:[c.l0.position.relative,c.l0.pt(2),{zIndex:1}],children:(0,o.tZ)(b,{tags:n.tags,maxVisible:a,onTagClick:f})}):null]})]})}function x(e){var n=e.repl,t=e.showOwner,r=e.maxVisibleTags,i=e.onReplClick,a=e.onUserClick,l=e.onTagClick,s=e.dataCy;return(0,o.tZ)(c.Tg,{elevated:!0,css:[c.l0.borderRadius(8),c.l0.p(8),c.l0.position.relative,c.gU.filledAndOutlined,c.l0.backgroundColor.backgroundDefault,{border:"1px solid "+c.TV.outlineDimmest}],dataCy:s,children:(0,o.tZ)(w,{repl:n,showOwner:t,maxVisibleTags:r,onReplClick:i,onUserClick:a,onTagClick:l})})}},69928:function(e,n,t){"use strict";t.d(n,{Z:function(){return d}});var r=t(35944),i=(t(67294),t(69346)),o=t(81255),a=t(12530),l=t(51995),s=t(75026),c=t(27843),u=t(34847);function d(e){var n=e.repl;return(0,r.BX)(i.Z,{css:[o.l0.rowWithGap(16),o.l0.align.center],children:[(0,r.tZ)(a.Z,{small:!0,count:n.runCount,tooltip:(0,u.Z)("runs",n.runCount),children:(0,r.tZ)(l.Z,{})}),(0,r.tZ)(a.Z,{small:!0,count:n.commentCount,tooltip:(0,u.Z)("comment",n.commentCount),children:(0,r.tZ)(s.Z,{})}),(0,r.tZ)(a.Z,{small:!0,count:n.likeCount,tooltip:(0,u.Z)("like",n.likeCount),children:(0,r.tZ)(c.Z,{})})]})}},72917:function(e,n,t){"use strict";t.d(n,{g:function(){return x},t:function(){return b}});var r=t(26042),i=t(69396),o=t(35944),a=(t(67294),t(70917)),l=t(41664),s=t.n(l),c=t(69346),u=t(93160),d=t(81255),p=t(1144),f=t(44044),h=t(67629),v=t(16857),m=(0,a.iv)({border:"1px solid "+d.TV.accentPrimaryDefault,backgroundColor:"transparent"}),g=function(e){var n=e.isActive,t=e.small;return(0,a.iv)([d.l0.p(t?4:8),d.l0.align.center,d.l0.rowWithGap(4),d.l0.fontSize(12),n?m:f.gU.outlined,d.l0.borderRadius(16),{color:"inherit","&:hover":m}])};function Z(e){var n=e.tag,t=e.isActive,r=e.isRemovable,i=e.small,a=i?"small":"text";return(0,o.tZ)(u.Z,{elevated:t,css:[d.l0.borderRadius(16)],children:(0,o.BX)(u.Z,{elevated:t,css:[g({isActive:t,small:i})],children:[(0,o.BX)(c.Z,{css:[d.l0.flex.row,d.l0.align.center,d.l0.flex.shrink(1)],children:[(0,o.tZ)(p.x,{variant:a,color:"dimmest",children:"#"}),(0,o.tZ)(p.x,{color:"dimmer",variant:a,css:[d.l0.flex.shrink(1)],children:n.id})]}),n.isOfficial&&!i?(0,o.tZ)(v.Z,{}):null,r?(0,o.tZ)(h.Z,{size:i?12:16}):null]})})}var y=c.K.a;function b(e){var n=e.tag,t=e.link,a=e.isActive,l=e.small,c=e.onClick;return(0,o.tZ)(s(),(0,i.Z)((0,r.Z)({},t),{passHref:!0,css:[d.l0.flex.shrink(1),{backgroundColor:"red"}],children:(0,o.tZ)(y,{css:[{color:"inherit"},d.l0.flex.shrink(1)],onClick:c,children:(0,o.tZ)(Z,{tag:n,isActive:a,small:l,isRemovable:a})})}))}var w=c.K.button;function x(e){var n=e.tag,t=e.onClick,r=e.isActive,i=e.small;return(0,o.tZ)(w,{css:[d.l0.reset.button],onClick:t,children:(0,o.tZ)(Z,{tag:n,isActive:r,small:i,isRemovable:!0})})}},46197:function(e,n,t){"use strict";t.d(n,{A:function(){return i}});var r=t(57263),i={mobile:"@media (max-width: ".concat(r.j.tabletMin,"px)"),desktop:"@media (min-width: ".concat(r.j.tabletMin+1,"px)")}},44365:function(e,n,t){"use strict";t.d(n,{Qf:function(){return s},Zb:function(){return l},eR:function(){return o}});var r=t(90317),i=t(54854),o=r.vX.Hot,a={hot:r.vX.Hot,new:r.vX.New,top:r.vX.Top,votes:r.vX.Top};function l(e){return e.toLowerCase()}function s(e){var n=(0,i.Z)(e,"after")||void 0,t=(0,i.Z)(e,"q")||void 0,r=(0,i.Z)(e,"boardSlug")||void 0,s=r&&"all"!==r?r.split(","):void 0,c=(0,i.Z)(e,"order")||l(o),u=a[c]||o,d=(0,i.Z)(e,"count"),p=d?parseInt(d,10):void 0;return void 0!==p&&Number.isNaN(p)&&(p=void 0),{tags:s,order:u,count:p,searchQuery:t,after:n}}},12530:function(e,n,t){"use strict";t.d(n,{Z:function(){return c}});var r=t(35944),i=t(67294),o=t(1144),a=t(81255),l=t(69346),s=t(81456);function c(e){var n=e.count,t=e.children,c=e.tooltip,u=e.small,d=(0,s.d)(n);return(0,r.BX)(l.Z,{"aria-label":c,"data-microtip-position":"left",role:"tooltip",css:[a.l0.rowWithGap(4),a.l0.align.center,a.l0.color.foregroundDimmer,{userSelect:"none",lineHeight:1}],children:[i.cloneElement(t,{size:u?12:void 0}),(0,r.tZ)(o.x,{variant:u?"small":void 0,color:"dimmer",children:d})]})}},19923:function(e,n,t){"use strict";t.d(n,{Gp:function(){return U},Oh:function(){return Y},V3:function(){return X},Xl:function(){return L},Yd:function(){return z},_b:function(){return q},gX:function(){return ne},h2:function(){return A},on:function(){return B},q7:function(){return J},vs:function(){return E},w9:function(){return F},zp:function(){return V}});var r=t(26042),i=t(7297),o=t(31230),a=t(7900),l=t(37887),s=t(50319);function c(){var e=(0,i.Z)(["\n  fragment TeamProfileReplTemplateModelSolution on ReplTemplateModelSolution {\n    id\n    visibleAfterSubmitting\n    visibleAfterPassingTests\n    visibleAfterDueDate\n    repl {\n      id\n      url\n      nextPagePathname\n    }\n    canStudentFork\n    studentFork {\n      id\n      url\n      nextPagePathname\n    }\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,i.Z)(["\n  fragment TeamProfileReplTemplate on ReplTemplate {\n    id\n    isPublished\n    isGroupProject\n    allowSelfGrouping\n    imageUrl\n    url\n    dueDate\n    modelSolution {\n      id\n      ...TeamProfileReplTemplateModelSolution\n    }\n    userSubmissionGroup {\n      ...TeamTemplateSubmissionGroup\n    }\n  }\n  ","\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,i.Z)(["\n  fragment TeamProfileRepl on Repl {\n    id\n    title\n    description\n    slug\n    timeCreated\n    url\n    pinnedToProfile\n    nextPagePathname\n    templateInfo {\n      label\n      iconUrl\n    }\n    template {\n      id\n      ...TeamProfileReplTemplate\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function p(){var e=(0,i.Z)(["\n  fragment TeamProfileStack on Stack {\n    id\n    title\n    repls {\n      id\n      ...TeamProfileRepl\n    }\n  }\n  ","\n"]);return p=function(){return e},e}function f(){var e=(0,i.Z)(["\n  fragment TeamEduProfile on Team {\n    id\n    username\n    displayName\n    isAdmin\n    archived\n    needsMigrationToStacks\n    defaultTemplateStack {\n      id\n      ...TeamProfileStack\n    }\n    stacks {\n      id\n      ...TeamProfileStack\n    }\n    members {\n      id\n      permissions\n    }\n    organization {\n      id\n      capabilities {\n        isExpired: isExpiring(daysFromNow: 0)\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,i.Z)(["\n  fragment TeamProProfile on Team {\n    id\n    username\n    displayName\n    isMember\n    isAdmin\n    archived\n    defaultReplStack {\n      id\n      ...TeamProfileStack\n    }\n    stacks {\n      id\n      ...TeamProfileStack\n    }\n    members {\n      id\n      permissions\n    }\n    organization {\n      id\n    }\n  }\n  ","\n"]);return h=function(){return e},e}function v(){var e=(0,i.Z)(["\n  fragment TeamProfileAllStacks on Team {\n    id\n    defaultReplStack {\n      id\n      ...TeamProfileStack\n    }\n    defaultReplStack {\n      id\n      ...TeamProfileStack\n    }\n    stacks {\n      id\n      ...TeamProfileStack\n    }\n  }\n  ","\n"]);return v=function(){return e},e}function m(){var e=(0,i.Z)(["\n  fragment TeamCreateReplSubmissionOutput on CreateReplSubmissionOutput {\n    ... on Repl {\n      id\n      nextPagePathname\n      url\n      template {\n        id\n        ...TeamProfileReplTemplate\n      }\n    }\n    ... on UserError {\n      message\n    }\n  }\n  ","\n"]);return m=function(){return e},e}function g(){var e=(0,i.Z)(["\n  query TeamProProfile($teamname: String!) {\n    team: teamByUsername(username: $teamname) {\n      ... on Team {\n        id\n        ...TeamProProfile\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return g=function(){return e},e}function Z(){var e=(0,i.Z)(["\n  query TeamEduProfile($teamname: String!) {\n    team: teamByUsername(username: $teamname) {\n      ... on Team {\n        id\n        ...TeamEduProfile\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return Z=function(){return e},e}function y(){var e=(0,i.Z)(["\n  mutation TeamProProfilePinRepl($replId: String!) {\n    pinReplToProfile2(replId: $replId) {\n      ... on Repl {\n        id\n        pinnedToProfile\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return y=function(){return e},e}function b(){var e=(0,i.Z)(["\n  mutation TeamProProfileUnpinRepl($replId: String!) {\n    unpinReplFromProfile2(replId: $replId) {\n      ... on Repl {\n        id\n        pinnedToProfile\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return b=function(){return e},e}function w(){var e=(0,i.Z)(["\n  mutation TeamProfileArrangeStackItem($input: ArrangeStackItemInput!) {\n    arrangeStackItem(input: $input) {\n      ... on Team {\n        id\n        ...TeamProfileAllStacks\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return w=function(){return e},e}function x(){var e=(0,i.Z)(["\n  mutation TeamProfileUpdateReplTemplate($input: UpdateReplTemplateInput!) {\n    updateReplTemplate(input: $input) {\n      ... on ReplTemplate {\n        id\n        repl {\n          id\n          ...TeamProfileRepl\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return x=function(){return e},e}function k(){var e=(0,i.Z)(["\n  mutation TeamProfileMigrateTeamToStacks($teamId: Int!) {\n    migrateTeamToStacks(teamId: $teamId) {\n      ... on Team {\n        id\n        ...TeamEduProfile\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return k=function(){return e},e}function C(){var e=(0,i.Z)(["\n  mutation TeamProfileCreateReplTemplateModelSolution(\n    $input: CreateReplTemplateModelSolutionInput!\n  ) {\n    createReplTemplateModelSolution(input: $input) {\n      ... on Repl {\n        id\n        ...TeamProfileRepl\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return C=function(){return e},e}function I(){var e=(0,i.Z)(["\n  mutation TeamProfileCreateReplTemplateModelSolutionFork(\n    $input: CreateReplTemplateModelSolutionForkInput!\n  ) {\n    createReplTemplateModelSolutionFork(input: $input) {\n      ... on Repl {\n        id\n        ...TeamProfileRepl\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return I=function(){return e},e}function S(){var e=(0,i.Z)(["\n  mutation TeamCreateReplSubmission($templateId: Int!) {\n    createReplSubmission(templateId: $templateId) {\n      ...TeamCreateReplSubmissionOutput\n    }\n  }\n  ","\n"]);return S=function(){return e},e}var R={},P=(0,o.Ps)(c()),T=(0,o.Ps)(u(),P,a.Pc),E=(0,o.Ps)(d(),T),D=(0,o.Ps)(p(),E),U=(0,o.Ps)(f(),D),_=(0,o.Ps)(h(),D),B=(0,o.Ps)(v(),D),M=(0,o.Ps)(m(),T),G=(0,o.Ps)(g(),_);function A(e){var n=(0,r.Z)({},R,e);return l.a(G,n)}var N=(0,o.Ps)(Z(),U);function X(e){var n=(0,r.Z)({},R,e);return l.a(N,n)}var O=(0,o.Ps)(y());function L(e){var n=(0,r.Z)({},R,e);return s.D(O,n)}var j=(0,o.Ps)(b());function z(e){var n=(0,r.Z)({},R,e);return s.D(j,n)}var W=(0,o.Ps)(w(),B);function F(e){var n=(0,r.Z)({},R,e);return s.D(W,n)}var H=(0,o.Ps)(x(),E);function V(e){var n=(0,r.Z)({},R,e);return s.D(H,n)}var $=(0,o.Ps)(k(),U);function q(e){var n=(0,r.Z)({},R,e);return s.D($,n)}var K=(0,o.Ps)(C(),E);function Y(e){var n=(0,r.Z)({},R,e);return s.D(K,n)}var Q=(0,o.Ps)(I(),E);function J(e){var n=(0,r.Z)({},R,e);return s.D(Q,n)}var ee=(0,o.Ps)(S(),M);function ne(e){var n=(0,r.Z)({},R,e);return s.D(ee,n)}},26082:function(e,n,t){"use strict";var r=t(5152),i=t.n(r);n.Z=i()((function(){return Promise.all([t.e(8966),t.e(5499),t.e(5117),t.e(7068)]).then(t.bind(t,87068)).then((function(e){return e.EditReplTemplate}))}),{loadableGenerated:{webpack:function(){return[87068]}}})},70710:function(e,n,t){"use strict";t.d(n,{I$:function(){return k},Du:function(){return C},Cd:function(){return S}});var r=t(26042),i=t(7297),o=t(31230),a=t(9523);function l(){var e=(0,i.Z)(['\n  fragment ReplEnvironmentTourCurrentUser on CurrentUser {\n    id\n    flagLayoutNavigator: gate(feature: "flag-layout-navigator")\n    hasSeenOldWorkspaceTour: tourSeen(name: "workspace-desktop-tour")\n  }\n']);return l=function(){return e},e}function s(){var e=(0,i.Z)(["\n  fragment ReplEnvironmentTourRepl on Repl {\n    id\n    lesson {\n      id\n    }\n  }\n"]);return s=function(){return e},e}var c=(0,o.Ps)(l()),u=(0,o.Ps)(s()),d=t(52008),p=t(65711),f=t(6695);function h(){var e=(0,i.Z)(["\n  fragment ReplEnvironmentHeaderLeftCurrentUser on CurrentUser {\n    id\n    isFirewallMode\n  }\n"]);return h=function(){return e},e}function v(){var e=(0,i.Z)(["\n  fragment ReplEnvironmentHeaderLeftRepl on Repl {\n    id\n    isAlwaysOn\n    slug\n    url\n    ...WorkspaceHeaderReplMetadataRepl\n  }\n  ","\n"]);return v=function(){return e},e}var m=(0,o.Ps)(h()),g=(0,o.Ps)(v(),f.s),Z=t(37887);function y(){var e=(0,i.Z)(["\n  fragment ReplEnvironment2CurrentUser on CurrentUser {\n    id\n    image\n    isFirewallMode\n    ...CrosisContextCurrentUser\n    ...ReplEnvironment2CurrentUserLayoutFlags\n    editorPreferences {\n      ...CurrentUserPreferences\n    }\n    ...ReplEnvironmentHeaderLeftCurrentUser\n    ...ReplEnvironmentTourCurrentUser\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return y=function(){return e},e}function b(){var e=(0,i.Z)(["\n  fragment ReplEnvironment2Repl on Repl {\n    id\n    title\n    layoutState\n    description\n    multiplayers {\n      id\n    }\n    currentUserPermissions {\n      containerWrite\n    }\n    origin {\n      id\n    }\n    language\n    config {\n      isVnc\n      isServer\n    }\n    lesson {\n      id\n    }\n    ...CrosisContextRepl\n    ...ReplEnvironmentHeaderLeftRepl\n  }\n  ","\n  ","\n"]);return b=function(){return e},e}function w(){var e=(0,i.Z)(["\n  query ReplEnvironment2($url: String!) {\n    repl(url: $url) {\n      ... on Repl {\n        id\n        ...CrosisContextRepl\n        ...ReplEnvironment2Repl\n        ...ReplEnvironmentTourRepl\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n      ... on SubscriptionExpiredError {\n        replId\n        isOwner\n      }\n    }\n    currentUser {\n      id\n      ...ReplEnvironment2CurrentUser\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return w=function(){return e},e}var x={},k=(0,o.Ps)(y(),a.D,d.SL,p.wO,m,c),C=(0,o.Ps)(b(),a.C,g),I=(0,o.Ps)(w(),a.C,C,u,k);function S(e){var n=(0,r.Z)({},x,e);return Z.a(I,n)}},43329:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return qf}});var r=t(47568),i=t(10253),o=t(70655),a=t(35944),l=t(67294),s=t(91131),c=t(11163),u=t(73515),d=t(70338),p=t(83520),f=t(15519),h=t(70710),v=t(15085),m=t(61756),g=t(1879),Z=t(67629),y=t(69346),b=t(1144),w=t(81255),x=t(88075);var k=function(e){return(0,a.tZ)(g.Z,{preventClose:!0,isOpen:!0,onRequestClose:e.onCancel,children:(0,a.BX)(y.Z,{css:[w.l0.colWithGap(24)],children:[(0,a.tZ)(b.h,{variant:"headerDefault",level:2,css:w.l0.maxWidth("100%"),children:"Replit needs your permission to enable notifications."}),(0,a.tZ)(b.x,{multiline:!0,children:"Never miss messages from your collaborators if you\u2019re in another tab or window."}),(0,a.BX)(y.Z,{css:[w.l0.rowWithGap(12),w.l0.justify.end],children:[(0,a.tZ)(m.ZP,{onClick:e.onCancel,text:"Deny",iconLeft:(0,a.tZ)(Z.Z,{})}),(0,a.tZ)(m.ZP,{text:"Allow notifications",colorway:"positive",iconLeft:(0,a.tZ)(x.Z,{}),onClick:e.onConfirm})]})]})})},C=t(92098),I=t(60977),S=t(90317),R=t(26042),P=t(7297),T=t(31230),E=t(37887);function D(){var e=(0,P.Z)(["\n  fragment ReplEnvironmentAvatarMenuCurrentUser on CurrentUser {\n    id\n    url\n    username\n    image\n    isHacker\n  }\n"]);return D=function(){return e},e}function U(){var e=(0,P.Z)(["\n  query ReplEnvironmentAvatarMenu {\n    currentUser {\n      id\n      ...ReplEnvironmentAvatarMenuCurrentUser\n    }\n  }\n  ","\n"]);return U=function(){return e},e}var _={},B=(0,T.Ps)(D()),M=(0,T.Ps)(U(),B);var G=t(50319);function A(){var e=(0,P.Z)(["\n  fragment MarkLessonCompleteLesson on UserCourseLesson {\n    id\n    lessonSlug\n    timeCompleted\n    course {\n      id\n      courseSlug\n    }\n  }\n"]);return A=function(){return e},e}function N(){var e=(0,P.Z)(["\n  mutation MarkLessonAsComplete($input: CompleteUserCourseLessonInput!) {\n    completeUserCourseLesson(input: $input) {\n      ... on UpdatedUserCourseLesson {\n        __typename\n        userCourseLesson {\n          id\n          timeCompleted\n        }\n      }\n      ... on NotFoundError {\n        __typename\n        message\n      }\n      ... on UnauthorizedError {\n        __typename\n        message\n      }\n      ... on UserError {\n        __typename\n        message\n      }\n    }\n  }\n"]);return N=function(){return e},e}var X={},O=(0,T.Ps)(A()),L=(0,T.Ps)(N());var j=t(6695);function z(){var e=(0,P.Z)(["\n  fragment ReplEnvironmentHeaderCurrentUser on CurrentUser {\n    id\n    isSubscribed\n    isFirewallMode\n    isExplorer: hasRole(role: EXPLORER)\n    ...ReplEnvironmentAvatarMenuCurrentUser\n  }\n  ","\n"]);return z=function(){return e},e}function W(){var e=(0,P.Z)(["\n  fragment ReplEnvironmentHeaderRepl on Repl {\n    id\n    slug\n    url\n    isAlwaysOn\n    isOwner\n    isPrivate\n    workspaceCta\n    rootOriginReplUrl\n    lang {\n      id\n      engine\n    }\n    origin {\n      id\n    }\n    currentUserPermissions {\n      editMultiplayers\n      inviteGuests\n      containerWrite\n    }\n    owner {\n      ... on Team {\n        id\n        capabilities {\n          isEducationPlan\n        }\n      }\n      ... on User {\n        id\n      }\n    }\n    template {\n      id\n      isGroupProject\n    }\n    lesson {\n      id\n      ...MarkLessonCompleteLesson\n    }\n    multiplayers {\n      id\n    }\n  }\n  ","\n"]);return W=function(){return e},e}function F(){var e=(0,P.Z)(["\n  query ReplEnvironmentHeader($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        ...ReplEnvironmentHeaderRepl\n        ...WorkspaceHeaderReplMetadataRepl\n      }\n    }\n    currentUser {\n      id\n      ...ReplEnvironmentHeaderCurrentUser\n    }\n  }\n  ","\n  ","\n  ","\n"]);return F=function(){return e},e}var H={},V=(0,T.Ps)(z(),B),$=(0,T.Ps)(W(),O),q=(0,T.Ps)(F(),$,j.s,V);var K=t(26473),Y=t(70804),Q=t(99408),J=t(58502),ee=t(83475),ne=t(87603),te=t.n(ne),re=t(73359);function ie(){var e=(0,P.Z)(["\n  query WorkspaceHeaderUsersOnline($ids: [Int!]!) {\n    currentUser {\n      id\n    }\n    usersByIds(ids: $ids) {\n      id\n      username\n      image\n    }\n  }\n"]);return ie=function(){return e},e}var oe={},ae=(0,T.Ps)(ie());function le(e){var n=(0,R.Z)({},oe,e);return E.a(ae,n)}var se=t(57263),ce=t(69396),ue=t(57731),de=t(66060);function pe(e){var n=function(){e.canClick&&e.onClick&&e.onClick({username:e.username,id:e.id})};return(0,a.tZ)(de.ZP,{placement:"bottom",tooltip:"Observe ".concat(e.username),children:function(t,r){return(0,a.tZ)(y.Z,(0,ce.Z)((0,R.Z)({},t),{innerRef:r,onClick:n,children:(0,a.tZ)(ue.Z,{size:e.size||35,src:e.image,alt:e.username,css:[e.canClick&&w.l0.cursor.pointer,{transition:"all 0.2s ease",border:"2px solid "+e.color,"&:hover":{filter:"brightness(95%)",boxShadow:w.TV.shadow1}}]})}))}})}var fe=t(94184),he=t.n(fe),ve=t(77365);function me(){var e=(0,P.Z)(["\n  fragment UserListModalUser on User {\n    id\n    username\n    image\n  }\n"]);return me=function(){return e},e}function ge(){var e=(0,P.Z)(["\n  fragment UserListModalReplPermission on ReplPermission {\n    id\n    type\n    user {\n      id\n      ...UserListModalUser\n    }\n  }\n  ","\n"]);return ge=function(){return e},e}function Ze(){var e=(0,P.Z)(["\n  query UserListModal($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        user {\n          id\n          ...UserListModalUser\n        }\n        permissions {\n          id\n          ...UserListModalReplPermission\n        }\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n      ... on SubscriptionExpiredError {\n        replId\n      }\n    }\n    currentUser {\n      id\n    }\n  }\n  ","\n  ","\n"]);return Ze=function(){return e},e}var ye={},be=(0,T.Ps)(me()),we=(0,T.Ps)(ge(),be),xe=(0,T.Ps)(Ze(),be,we);var ke=t(63377);function Ce(){var e=(0,Q.Z)(),n=e.session,t=e.presence;return l.useCallback((function(e){var r=e.username,i=e.id,o=t.getFollowedUser();if((null===o||void 0===o?void 0:o.username)!==r){t.followUser(r);var a=t.getActiveFileForUser(i),l=n.getActiveFile();a&&a!==l&&n.openFile(a)}else t.unfollowUser()}),[n,t])}var Ie=t(34140);function Se(e){var n=e.hideModal,t=e.onUserClick,r=e.isOpen,i=(0,ke.Z)(),o=(0,Q.Z)().presence,l=(0,J.Z)({presence:o});return(0,a.tZ)(v.u_,{isOpen:r,onRequestClose:n,children:(0,a.tZ)(Pe,{replId:i,onUserClick:t,activeUsers:l,hideModal:n})})}function Re(e,n){return n.some((function(n){return n.id===e}))}function Pe(e){var n=e.replId,t=e.activeUsers,r=e.onUserClick,i=e.hideModal,o=function(e){var n=(0,R.Z)({},ye,e);return E.a(xe,n)}({variables:{replId:n}}),l=o.data,s=o.loading,c=o.error;if(s)return(0,a.tZ)(v.G7,{css:[v.l0.flex.row,v.l0.justify.center,v.l0.p(32)],children:(0,a.tZ)(ve.Z,{})});if(c)return(0,a.tZ)("div",{children:c.message});if("Repl"===(null===l||void 0===l?void 0:l.repl.__typename)){var u=l.repl,d=l.currentUser,p=u.user,f=p&&t.find((function(e){return e.username===p.username})),h=u.permissions.filter((function(e){var n=e.user;return n&&Re(n.id,t)})),m=u.permissions.filter((function(e){var n=e.user;return n&&!Re(n.id,t)}));return(0,a.BX)(v.G7,{css:[v.l0.colWithGap(24)],children:[(0,a.tZ)(v.h4,{level:1,variant:"headerDefault",children:"Multiplayers"}),(0,a.tZ)(v.xv,{multiline:!0,children:"Users can interact with this Repl in real time."}),(0,a.tZ)(v.G7,{css:[v.l0.maxHeight(330),{overflowY:"auto"}],children:(0,a.BX)(v.G7,{children:[p?(0,a.tZ)(Ee,(0,ce.Z)((0,R.Z)({},p),{onClick:r,isOnline:Boolean(f),color:f?f.color:"transparent",isOwner:!0,hideModal:i,canClickAvatar:Boolean(f)&&p.id!==(null===d||void 0===d?void 0:d.id),type:S.aQ.Rw})):null,h.map((function(e){var n=e.type,o=e.user;if(!o)throw new Error("Expected user");var l=t.find((function(e){return e.username===o.username}));if(!l)throw new Error("Expected user online");var s=o.id!==(null===d||void 0===d?void 0:d.id);return(0,a.tZ)(Ee,(0,ce.Z)((0,R.Z)({onClick:r,type:n},o),{isOnline:!0,canClickAvatar:s,color:l.color,hideModal:i,isOwner:!1}),"chat-user-list-".concat(o.username))})),m.map((function(e){var n=e.type,t=e.user;if(!t)throw new Error("Expected user");return(0,a.tZ)(Ee,(0,ce.Z)((0,R.Z)({onClick:r,type:n},t),{canClickAvatar:!1,isOnline:!1,color:"transparent",hideModal:i,isOwner:!1}),"chat-user-list-".concat(t.username))}))]})})]})}return"ReplRedirect"===(null===l||void 0===l?void 0:l.repl.__typename)?(0,a.BX)("div",{children:["This Repl has moved to"," ",(0,a.tZ)("a",{href:l.repl.replUrl,children:l.repl.replUrl})]}):"SubscriptionExpiredError"===(null===l||void 0===l?void 0:l.repl.__typename)?(0,a.BX)("div",{children:["Your subscription has expired.",(0,a.tZ)("a",{href:"/pricing",children:"Upgrade here"})]}):null}var Te={r:"read only",rw:"can edit"};function Ee(e){var n=e.type,t=e.id,r=e.username,i=e.image,o=e.isOnline,l=e.isOwner,s=e.color,c=e.onClick,u=e.hideModal,d=e.canClickAvatar,p=Ce(),f=function(){d&&(p({username:r,id:t}),u())};return(0,a.BX)("div",{className:te().dynamic([["8abf4fce485dcead",[d?"pointer":"auto",s]]])+" "+(he()("user-list-item-wrapper",{online:o})||""),children:[(0,a.BX)("div",{role:"button",onClick:f,onKeyDown:f,tabIndex:0,className:te().dynamic([["8abf4fce485dcead",[d?"pointer":"auto",s]]])+" image",children:[(0,a.tZ)("img",{src:i,alt:"",className:te().dynamic([["8abf4fce485dcead",[d?"pointer":"auto",s]]])+" "+((o?"":"offline")||"")}),(0,a.BX)(Ie.T,{children:["Observe ",r]})]}),(0,a.BX)("div",{className:te().dynamic([["8abf4fce485dcead",[d?"pointer":"auto",s]]])+" info",children:[(0,a.BX)("div",{className:te().dynamic([["8abf4fce485dcead",[d?"pointer":"auto",s]]]),children:[(0,a.BX)("a",{href:"/@".concat(r),target:"_blank",onClick:c,className:te().dynamic([["8abf4fce485dcead",[d?"pointer":"auto",s]]]),children:["@",r]}),!o&&" (offline)"]}),(0,a.tZ)("div",{className:te().dynamic([["8abf4fce485dcead",[d?"pointer":"auto",s]]]),children:l?"owner":Te[n]})]}),(0,a.tZ)(te(),{id:"8abf4fce485dcead",dynamic:[d?"pointer":"auto",s],children:".user-list-item-wrapper.__jsx-style-dynamic-selector{padding:var(--space-8);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-ordinal-group:2;-webkit-order:1;-moz-box-ordinal-group:2;-ms-flex-order:1;order:1}.image.__jsx-style-dynamic-selector{-webkit-box-flex:0;-webkit-flex:0 0 auto;-moz-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;cursor:".concat(d?"pointer":"auto","}img.__jsx-style-dynamic-selector{width:40px;height:40px;-webkit-border-radius:20px;-moz-border-radius:20px;border-radius:20px;border:3px solid ").concat(s,";background:white;-o-object-fit:cover;object-fit:cover}.info.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-left:var(--space-8)}img.offline.__jsx-style-dynamic-selector{-webkit-filter:grayscale(100%);filter:grayscale(100%)}.user-list-item-wrapper.online.__jsx-style-dynamic-selector{-webkit-box-ordinal-group:1;-webkit-order:0;-moz-box-ordinal-group:1;-ms-flex-order:0;order:0}")})]})}function De(e){var n=(0,i.Z)(l.useState(!1),2),t=n[0],r=n[1],o=(0,ke.Z)(),s=le({variables:{ids:e.users.map((function(e){return e.id}))},ssr:!1,skip:!e.users.length}),c=s.data,u=s.loading,d=s.error,p=e.users.reduce((function(e,n){return e[n.id]=n.color,e}),{});if(u)return null;if(d)return null;if(!(null===c||void 0===c?void 0:c.currentUser))return null;var f=c.usersByIds,h=c.currentUser,m=f.filter((function(e){return e.id!==h.id})),g=m.length-3;return 0===m.length?null:(0,a.BX)(v.G7,{tag:"ul",className:"multiplayer-users-container",css:[v.l0.px(8),v.l0.rowWithGap(4),v.l0.align.center],"aria-live":"polite","aria-relevant":"additions removals","aria-label":"online users",children:[g>0?(0,a.tZ)("li",{className:te().dynamic([["9e6f75ce31331994",[se.j.mobileMax+100]]]),children:(0,a.tZ)(v.zx,{onClick:function(){return r(!0)},text:"+ ".concat(g),css:{background:"none"}})}):null,m.slice(0,3).map((function(n){return(0,a.tZ)("li",{className:te().dynamic([["9e6f75ce31331994",[se.j.mobileMax+100]]]),children:(0,a.tZ)(pe,{id:n.id,username:n.username,image:n.image,color:p[n.id],onClick:e.onAvatarClick,canClick:!0})},n.id)})),(0,a.tZ)(Se,{isOpen:t,hideModal:function(){return r(!1)},onUserClick:function(){(0,I.j)(I.U3.MP2_VISITED_PROFILE,{replId:o,from:"OnlineUsers"})}}),(0,a.tZ)(te(),{id:"9e6f75ce31331994",dynamic:[se.j.mobileMax+100],children:".multiplayer-users-container.__jsx-style-dynamic-selector li.__jsx-style-dynamic-selector{list-style-type:none}@media only screen and (max-width:".concat(se.j.mobileMax+100,"px){.multiplayer-users-container.__jsx-style-dynamic-selector{display:none}}")})]})}var Ue=t(34193),_e=t(29815);function Be(){var e=(0,P.Z)(["\n  fragment MultiplayerUser on User {\n    id\n    image\n    username\n  }\n"]);return Be=function(){return e},e}function Me(){var e=(0,P.Z)(["\n  fragment MultiplayerReplPermission on ReplPermission {\n    id\n    type\n    user {\n      id\n      ...MultiplayerUser\n    }\n  }\n  ","\n"]);return Me=function(){return e},e}function Ge(){var e=(0,P.Z)(["\n  query MultiplayerManageTeamMultiplayers($replId: String!) {\n    currentUser {\n      id\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isOwner\n        permissions {\n          id\n          ...MultiplayerReplPermission\n        }\n        currentUserPermissions {\n          editMultiplayers\n          inviteGuests\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n        owner {\n          ... on User {\n            id\n          }\n          ... on Team {\n            id\n            members {\n              id\n              permissions\n              user {\n                id\n                ...MultiplayerUser\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return Ge=function(){return e},e}function Ae(){var e=(0,P.Z)(["\n  mutation MultiplayerManageTeamMultiplayersAddMultiplayerUser(\n    $replId: String!\n    $username: String!\n    $type: String!\n  ) {\n    addMultiplayerUser(replId: $replId, username: $username, type: $type) {\n      id\n      type\n      user {\n        id\n        ...MultiplayerUser\n      }\n      repl {\n        id\n        permissions {\n          id\n          ...MultiplayerReplPermission\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return Ae=function(){return e},e}function Ne(){var e=(0,P.Z)(["\n  mutation MultiplayerManageTeamMultiplayersRemoveMultiplayerUser(\n    $replId: String!\n    $username: String!\n  ) {\n    removeMultiplayerUser(replId: $replId, username: $username) {\n      id\n      user {\n        id\n        ...MultiplayerUser\n      }\n      repl {\n        id\n        permissions {\n          id\n          ...MultiplayerReplPermission\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return Ne=function(){return e},e}var Xe={},Oe=(0,T.Ps)(Be()),Le=(0,T.Ps)(Me(),Oe),je=(0,T.Ps)(Ge(),Le,Oe);var ze=(0,T.Ps)(Ae(),Oe,Le);var We=(0,T.Ps)(Ne(),Oe,Le);function Fe(){var e=(0,P.Z)(["\n  fragment MultiplayerControlUser on User {\n    id\n    image\n    username\n    url\n  }\n"]);return Fe=function(){return e},e}function He(){var e=(0,P.Z)(["\n  fragment MultiplayerControlReplPermission on ReplPermission {\n    id\n    type\n    user {\n      id\n      ...MultiplayerControlUser\n    }\n  }\n  ","\n"]);return He=function(){return e},e}function Ve(){var e=(0,P.Z)(["\n  fragment MultiplayerControlEmailInviteReplPermission on ReplPermission {\n    id\n    type\n    user {\n      id\n      image\n      username\n      url\n    }\n  }\n"]);return Ve=function(){return e},e}function $e(){var e=(0,P.Z)(["\n  query MultiplayerControl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isOwner\n        permissions {\n          id\n          ...MultiplayerReplPermission\n        }\n        currentUserPermissions {\n          editMultiplayers\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n      }\n    }\n    currentUser {\n      id\n      isSubscribed\n    }\n  }\n  ","\n"]);return $e=function(){return e},e}function qe(){var e=(0,P.Z)(["\n  mutation MultiplayerControlAddMultiplayerUser(\n    $replId: String!\n    $username: String!\n    $type: String!\n  ) {\n    addMultiplayerUser(replId: $replId, username: $username, type: $type) {\n      id\n      type\n      user {\n        id\n        ...MultiplayerControlUser\n      }\n      repl {\n        id\n        permissions {\n          id\n          ...MultiplayerControlReplPermission\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return qe=function(){return e},e}function Ke(){var e=(0,P.Z)(["\n  mutation MultiplayerControlRemoveMultiplayerUser(\n    $replId: String!\n    $username: String!\n  ) {\n    removeMultiplayerUser(replId: $replId, username: $username) {\n      id\n      user {\n        id\n        ...MultiplayerControlUser\n      }\n      repl {\n        id\n        permissions {\n          id\n          ...MultiplayerControlReplPermission\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return Ke=function(){return e},e}function Ye(){var e=(0,P.Z)(["\n  mutation MultiplayerControlCreateMultiplayerInvite(\n    $replId: String!\n    $email: String!\n    $type: String!\n  ) {\n    createMultiplayerInvite2(replId: $replId, email: $email, type: $type) {\n      ... on MultiplayerInvite {\n        email\n        repl {\n          id\n          permissions {\n            id\n            ...MultiplayerReplPermission\n          }\n          multiplayerInvites {\n            email\n            type\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on ReplPermission {\n        id\n        ...MultiplayerControlEmailInviteReplPermission\n      }\n    }\n  }\n  ","\n  ","\n"]);return Ye=function(){return e},e}function Qe(){var e=(0,P.Z)(["\n  mutation MultiplayerControlDeleteMultiplayerInvite(\n    $replId: String!\n    $email: String!\n  ) {\n    deleteMultiplayerInvite(replId: $replId, email: $email) {\n      ... on MultiplayerInvite {\n        email\n        type\n        repl {\n          id\n          permissions {\n            id\n            ...MultiplayerReplPermission\n          }\n          multiplayerInvites {\n            email\n            type\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return Qe=function(){return e},e}var Je={},en=(0,T.Ps)(Fe()),nn=(0,T.Ps)(He(),en),tn=(0,T.Ps)(Ve()),rn=(0,T.Ps)($e(),Le);var on=(0,T.Ps)(qe(),en,nn);var an=(0,T.Ps)(Ke(),en,nn);var ln=(0,T.Ps)(Ye(),Le,tn);function sn(e){var n=(0,R.Z)({},Je,e);return G.D(ln,n)}var cn=(0,T.Ps)(Qe(),Le);function un(e){var n=(0,R.Z)({},Je,e);return G.D(cn,n)}var dn=t(19526),pn=t(18757),fn=t(64184),hn=t(82893),vn=t(28898),mn=t(93058),gn=t(92002),Zn=t(30019),yn=t(44781),bn=t(27206),wn=t(50009),xn=t(3218),kn=t(96594),Cn=t(6951),In=t(24351);function Sn(){var e=(0,P.Z)(["\n  fragment MultiplayerUsernameSearchUser on User {\n    id\n    firstName\n    lastName\n    username\n    image\n  }\n"]);return Sn=function(){return e},e}function Rn(){var e=(0,P.Z)(["\n  query MultiplayerUsernameSearch($query: String!, $limit: Int) {\n    usernameSearch(query: $query, limit: $limit) {\n      id\n      ...MultiplayerUsernameSearchUser\n    }\n  }\n  ","\n"]);return Rn=function(){return e},e}var Pn={},Tn=(0,T.Ps)(Sn()),En=(0,T.Ps)(Rn(),Tn);function Dn(e){var n=e.onSubmit,t=e.existingUsernames,r=e.isDisabled,o=e.onChange,s=e.placeholder,c=(0,i.Z)(l.useState(""),2),u=c[0],d=c[1],p=!!u.match(/.+@.+/),f=(0,In.Z)(u.trim().replace(/^@/,""),250),h=function(e){var n=(0,R.Z)({},Pn,e);return E.a(En,n)}({skip:!f||p,variables:{query:f,limit:6}}),v=h.data,m=h.loading,g=h.error,Z=(0,mn.Z)().showError;l.useEffect((function(){g&&Z(g.message)}),[g,Z]);var y=null===v||void 0===v?void 0:v.usernameSearch;return(0,a.BX)("form",{onSubmit:function(e){e.preventDefault(),n(u),d("")},className:"jsx-d408485a86637a91",children:[(0,a.BX)("div",{className:"jsx-d408485a86637a91 form-content",children:[(0,a.tZ)(kn.ZP,{onChange:function(e){e&&d(e.username)},itemToString:function(e){return(null===e||void 0===e?void 0:e.username)||""},initialHighlightedIndex:0,defaultHighlightedIndex:0,children:function(e){var r=e.getInputProps,i=e.getItemProps,l=e.getMenuProps,c=e.isOpen,p=e.highlightedIndex;return(0,a.BX)("div",{className:"jsx-d408485a86637a91 dropdown",children:[(0,a.tZ)(bn.ZP,(0,R.Z)({},r({ref:null,value:u,onChange:function(e){d(e.currentTarget.value),null===o||void 0===o||o(e.currentTarget.value)},placeholder:null!==s&&void 0!==s?s:"Search by username or invite by email",autoComplete:"off",onKeyDown:function(e){"Enter"===e.key&&u.match(/.+@.+/)&&(n(u),d(""),e.currentTarget.blur())}}))),(0,a.BX)("div",(0,ce.Z)((0,R.Z)({},l()),{className:"jsx-d408485a86637a91",children:[c&&y&&y.length?(0,a.tZ)("div",{className:"jsx-d408485a86637a91 dropdown-menu",children:y.map((function(e,n){return(0,a.tZ)("div",(0,ce.Z)((0,R.Z)({},i({item:e,index:n})),{className:"jsx-d408485a86637a91 "+(he()("result",{"is-active":p===n})||""),children:(0,a.BX)(dn.Ug,{align:"center",spacing:1,children:[(0,a.tZ)(vn.Z,{size:"s",url:e.image}),(0,a.tZ)("div",{className:"jsx-d408485a86637a91",children:e.username}),t.includes(e.username)?(0,a.tZ)("div",{className:"jsx-d408485a86637a91 check-icon",children:(0,a.tZ)(x.Z,{})}):null]})}),e.username)}))}):null,c&&m?(0,a.tZ)("div",{className:"jsx-d408485a86637a91 dropdown-menu is-loading",children:"loading..."}):null,c&&y&&0===y.length?(0,a.BX)("div",{className:"jsx-d408485a86637a91 dropdown-menu is-empty",children:['no results found for "',u,'"']}):null]}))]})}}),(0,a.tZ)("div",{className:"jsx-d408485a86637a91",children:(0,a.tZ)(Cn.Z,{color:"primary",type:"submit",filled:!0,disabled:r||!u,children:"Invite"})})]}),(0,a.tZ)(te(),{id:"d408485a86637a91",children:".form-content.jsx-d408485a86637a91{display:grid;position:relative;width:100%;grid-template-columns:1fr auto;grid-column-gap:var(--space-8);-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.dropdown.jsx-d408485a86637a91{position:relative;z-index:5}.dropdown-menu.jsx-d408485a86637a91{position:absolute;z-index:1;top:100%;left:0;width:100%;background-color:var(--background-default);border:1px solid var(--foreground-dimmest);border-top:0 none;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);max-height:300px;overflow:auto}.dropdown-menu.is-loading.jsx-d408485a86637a91,.dropdown-menu.is-empty.jsx-d408485a86637a91{color:var(--foreground-dimmer);padding:var(--space-8)}.dropdown.jsx-d408485a86637a91:focus-within .dropdown-menu.jsx-d408485a86637a91{border-color:var(--accent-primary-default)}.spacer.jsx-d408485a86637a91{width:var(--space-8);pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.result.jsx-d408485a86637a91{cursor:pointer;padding:var(--space-8)var(--space-16)}.result.jsx-d408485a86637a91:hover,.is-active.jsx-d408485a86637a91{background-color:var(--accent-primary-dimmer)}.check-icon.jsx-d408485a86637a91{margin-left:auto;color:var(--accent-positive-default)}"})]})}function Un(e){var n=e.value,t=e.onButtonPress,r=e.statusText,i=void 0===r?"":r,o=e.image,l=e.filterValue,s=e.type,c=e.Icon;return(0,a.BX)("div",{className:"jsx-a16e88ad40d0e05c "+(he()("multiplayer-item",{"is-editable":!!t})||""),children:[(0,a.BX)(dn.Ug,{align:"center",spacing:1,children:[(0,a.tZ)(vn.Z,{size:"s",url:null!==o&&void 0!==o?o:""}),(0,a.tZ)("div",{className:"jsx-a16e88ad40d0e05c label",children:l?(0,a.tZ)(wn.gr,{source:n,match:l}):"".concat(n," ").concat(i)}),!!t&&(0,a.tZ)(Cn.Z,{className:"remove-button",border:!1,filled:!1,"aria-label":"Remove ".concat(s||"email invite"),role:"tooltip","data-microtip-position":"left",onClick:t,children:c?(0,a.tZ)(c,{size:12,className:"jsx-a16e88ad40d0e05c"}):null})]}),(0,a.tZ)(te(),{id:"a16e88ad40d0e05c",children:".multiplayer-item.jsx-a16e88ad40d0e05c{padding:var(--space-4)var(--space-16)}.multiplayer-item.is-editable.jsx-a16e88ad40d0e05c{padding-right:var(--space-8)}.multiplayer-item.is-editable.jsx-a16e88ad40d0e05c:hover{background-color:var(--background-root)}.label.jsx-a16e88ad40d0e05c{margin-right:auto}"})]})}var _n=t(4158);function Bn(e){var n=e.email,t=e.onInvite,r=e.onCancel;return(0,a.BX)("div",{className:"jsx-1a6ae4ac10e8f1fa root",children:[(0,a.tZ)(Zn.Z,{level:3,align:"center",children:"Are you sure?"}),(0,a.BX)(yn.Z,{align:"center",children:[(0,a.tZ)("p",{className:"jsx-1a6ae4ac10e8f1fa message",children:"Adding an external user as a guest to this repl will give the user read and write access. Please confirm the below email address before inviting the user as a guest."}),(0,a.tZ)("p",{className:"jsx-1a6ae4ac10e8f1fa email",children:n})]}),(0,a.BX)("div",{className:"jsx-1a6ae4ac10e8f1fa controls",children:[(0,a.tZ)(Cn.Z,{onClick:r,children:"Cancel"}),(0,a.tZ)(Cn.Z,{filled:!0,color:"primary",onClick:t,children:"Invite"})]}),(0,a.tZ)(te(),{id:"1a6ae4ac10e8f1fa",children:".root.jsx-1a6ae4ac10e8f1fa{color:var(--foreground-default);padding:var(--space-24);display:grid;grid-gap:var(--space-24)}.controls.jsx-1a6ae4ac10e8f1fa{display:grid;grid-gap:var(--space-8);grid-auto-flow:column}.message.jsx-1a6ae4ac10e8f1fa{padding-bottom:var(--space-16)}"})]})}var Mn=t(75474),Gn=t(34847);function An(e){var n,t,r=e.replId,o=function(e){var n=(0,R.Z)({},Xe,e);return E.a(je,n)}({variables:{replId:r}}),s=o.data,c=o.loading,u=(null===s||void 0===s||null===(n=s.currentUser)||void 0===n?void 0:n.id)||null,d=(0,mn.Z)(),p=d.showConfirm,f=d.showError,h=(0,i.Z)(l.useState(""),2),v=h[0],m=h[1],g=(0,i.Z)(function(e){var n=(0,R.Z)({},Xe,e);return G.D(ze,n)}({onError:function(e){return f(e.message)},onCompleted:function(e){var n=e.addMultiplayerUser.user;(0,I.j)(I.U3.MULTIPLAYER_INVITED,{replId:r,inviteMethod:"username"});var t=n?"@".concat(n.username):"Member";p("".concat(t," added"))}}),2),y=g[0],b=g[1],w=(0,i.Z)(function(e){var n=(0,R.Z)({},Xe,e);return G.D(We,n)}({onError:function(e){return f(e.message)},onCompleted:function(e){var n=e.removeMultiplayerUser.user,t=n?"@".concat(n.username):"Member";p("".concat(t," removed"))}}),2),x=w[0],k=w[1],C="Repl"===(null===s||void 0===s?void 0:s.repl.__typename)?s.repl:null,P=(0,i.Z)(sn({onError:function(e){f(e.message)},update:function(e,n){var t,i=null===(t=n.data)||void 0===t?void 0:t.createMultiplayerInvite2;if(i)if("UserError"!==i.__typename){if("MultiplayerInvite"===i.__typename){var o=i.email;return(0,I.j)(I.U3.MULTIPLAYER_INVITED,{replId:r,inviteMethod:"email"}),void p("Invited ".concat(o," via email"))}if("ReplPermission"===i.__typename){e.modify({id:e.identify({__typename:"Repl",id:r}),fields:{permissions:function(n){var t=e.writeFragment({data:i,fragment:tn});return(0,_e.Z)(n).concat([t])}}});var a=i.user;(0,I.j)(I.U3.MULTIPLAYER_INVITED,{replId:r,inviteMethod:"email"});var l=a?"@".concat(a.username):"Member";p("".concat(l," added"))}}else f(i.message)}}),2),T=P[0],D=P[1],U=(0,i.Z)(un({onError:function(e){return f(e.message)},onCompleted:function(e){if("UserError"!==e.deleteMultiplayerInvite.__typename){if("MultiplayerInvite"===e.deleteMultiplayerInvite.__typename){var n=e.deleteMultiplayerInvite.email;(0,I.j)(I.U3.MP2_REMOVED_EMAIL_INVITE,{replId:r,email:n}),p("Invite for ".concat(n," deleted"))}}else f(e.deleteMultiplayerInvite.message)}}),2),_=U[0],B=U[1];if(C&&!C.owner)throw new Error("Cannot manage members on anon repls");if((null===C||void 0===C?void 0:C.owner)&&"Team"!==(null===C||void 0===C?void 0:C.owner.__typename))throw new Error("Expect repl owned by a team");var M,A,N,X="Team"===(null===C||void 0===C||null===(t=C.owner)||void 0===t?void 0:t.__typename)?C.owner:null,O=null!==(M=null===C||void 0===C?void 0:C.permissions.reduce((function(e,n){return n.user?(0,_e.Z)(e).concat([n.user.username]):e}),[]))&&void 0!==M?M:[],L=null===C||void 0===C?void 0:C.permissions.reduce((function(e,n){if(!n.user)return e;var t=n.user;return!v||xn.Z.filter(v,[t.username]).length>0?((null===X||void 0===X?void 0:X.members.some((function(e){var n;return(null===(n=e.user)||void 0===n?void 0:n.id)===t.id})))||e.users.push(t),e):e}),{users:[]}),j=null===C||void 0===C?void 0:C.multiplayerInvites.filter((function(e){return!v||xn.Z.filter(v,[e.email]).length>0})),z=null===X||void 0===X?void 0:X.members.reduce((function(e,n){if(!n.user)return e;var t=n.user;if(!(!v||xn.Z.filter(v,[t.username]).length>0))return e;var r=n.permissions&&n.permissions!==S.SV.Member,i=null===C||void 0===C?void 0:C.permissions.find((function(e){var n;return e.user&&(null===(n=e.user)||void 0===n?void 0:n.id)===t.id}));return r?e.teamAdmins.push(t):(null===i||void 0===i?void 0:i.type)?e.withPermission.push(t):e.withoutPermission.push(t),e}),{teamAdmins:[],withPermission:[],withoutPermission:[]}),W=null===z||void 0===z?void 0:z.teamAdmins.some((function(e){return e.id===u})),F=(null!==(A=null===L||void 0===L?void 0:L.users.length)&&void 0!==A?A:0)+(null!==(N=null===j||void 0===j?void 0:j.length)&&void 0!==N?N:0),H=null===C||void 0===C?void 0:C.currentUserPermissions.editMultiplayers,V=null===C||void 0===C?void 0:C.currentUserPermissions.inviteGuests,$=Boolean(z&&!z.teamAdmins.length&&!z.withPermission.length&&(!(null===L||void 0===L?void 0:L.users.length)&&!(null===j||void 0===j?void 0:j.length)&&V||!V&&!z.withoutPermission.length)),q=(0,i.Z)(l.useState(null),2),K=q[0],Y=q[1];return(0,a.BX)("div",{className:te().dynamic([["dc131772cdbb2add",[se.j.mobileMax]]])+" root",children:[(0,a.BX)(dn.gC,{spacing:2,align:"stretch",children:[(0,a.BX)(dn.Ug,{children:[(0,a.BX)(Zn.Z,{level:5,foreground:c?3:1,children:[H?"Add or remove members from this repl":null,c?"Loading...":null]}),H&&V&&!c?(0,a.tZ)("div",{"aria-label":" Add team members or invite external guests via email or username","data-microtip-position":"bottom","data-microtip-size":"medium",role:"tooltip",className:te().dynamic([["dc131772cdbb2add",[se.j.mobileMax]]])+" information-icon-container",children:(0,a.tZ)(_n.Z,{})}):null]}),V?(0,a.tZ)(Dn,{existingUsernames:O,onSubmit:function(e){!!e.match(/.+@.+/)&&!D.loading?Y(e):b.loading||y({variables:{username:e,replId:r,type:"rw"}}),m("")},placeholder:H?"Search for users or invite guests":"Filter users",isDisabled:c,onChange:function(e){return m(e)}}):(0,a.tZ)(bn.ZP,{disabled:c,value:v,onChange:function(e){return m(e.currentTarget.value)},placeholder:H?"Filter team members to add or remove":"Filter team members"}),(0,a.tZ)(Ue.Z,{isOpen:!!K,onRequestClose:function(){return Y(null)},children:K?(0,a.tZ)(Bn,{email:K,onInvite:function(){T({variables:{email:K,replId:r,type:"rw"}}),Y(null)},onCancel:function(){return Y(null)}}):null}),(0,a.BX)("div",{className:te().dynamic([["dc131772cdbb2add",[se.j.mobileMax]]])+" "+(he()("multiplayers-list",{"is-empty":$})||""),children:[(null===z||void 0===z?void 0:z.withPermission.length)?(0,a.tZ)("div",{className:te().dynamic([["dc131772cdbb2add",[se.j.mobileMax]]])+" list-heading",children:(0,a.BX)(dn.Ug,{align:"center",spacing:1,children:[(0,a.tZ)(pn.Z,{size:12}),(0,a.BX)(yn.Z,{foreground:2,size:"small",children:[null===z||void 0===z?void 0:z.withPermission.length," member",1===(null===z||void 0===z?void 0:z.withPermission.length)?"":"s"," with access"]})]})}):null,null===z||void 0===z?void 0:z.withPermission.map((function(e){return(0,a.tZ)(Un,{value:e.username,image:e.image,statusText:"(can edit)",type:"member",onButtonPress:W?function(){k.loading||x({variables:{replId:r,username:e.username}})}:void 0,Icon:Z.Z},e.id)})),!!F&&(0,a.tZ)("div",{className:te().dynamic([["dc131772cdbb2add",[se.j.mobileMax]]])+" list-heading",children:(0,a.BX)(dn.Ug,{align:"center",spacing:1,children:[(0,a.tZ)(pn.Z,{size:12}),(0,a.BX)(yn.Z,{foreground:2,size:"small",children:[(0,Gn.Z)("guest",F,!0),"with access"]})]})}),null===L||void 0===L?void 0:L.users.map((function(e){return(0,a.tZ)(Un,{value:e.username,image:e.image,statusText:"(can edit)",type:"guest",onButtonPress:W?function(){k.loading||x({variables:{replId:r,username:e.username}})}:void 0,Icon:Z.Z},e.id)})),null===j||void 0===j?void 0:j.map((function(e){return(0,a.tZ)(Un,{value:e.email,statusText:"(pending)",onButtonPress:W?function(){B.loading||_({variables:{replId:r,email:e.email}})}:void 0,Icon:Z.Z},e.email)})),!V&&(null===z||void 0===z?void 0:z.withoutPermission.length)?(0,a.tZ)("div",{className:te().dynamic([["dc131772cdbb2add",[se.j.mobileMax]]])+" list-heading",children:(0,a.BX)(dn.Ug,{align:"center",spacing:1,children:[(0,a.tZ)(fn.Z,{size:12}),(0,a.BX)(yn.Z,{foreground:2,size:"small",children:[(0,Gn.Z)("member",null===z||void 0===z?void 0:z.withoutPermission.length,!0),"without access"]})]})}):null,!V&&(null===z||void 0===z?void 0:z.withoutPermission.map((function(e){return(0,a.tZ)(Un,{value:e.username,image:e.image,type:"member",onButtonPress:H?function(){b.loading||y({variables:{replId:r,username:e.username,type:"rw"}})}:void 0,Icon:gn.Z},e.id)}))),(null===z||void 0===z?void 0:z.teamAdmins.length)?(0,a.tZ)("div",{className:te().dynamic([["dc131772cdbb2add",[se.j.mobileMax]]])+" list-heading",children:(0,a.BX)(dn.Ug,{align:"center",spacing:1,children:[(0,a.tZ)(hn.Z,{size:12}),(0,a.tZ)(yn.Z,{foreground:2,size:"small",children:"Team admins cannot be removed from repls"})]})}):null,null===z||void 0===z?void 0:z.teamAdmins.map((function(e){return(0,a.tZ)("div",{className:te().dynamic([["dc131772cdbb2add",[se.j.mobileMax]]])+" "+(he()("multiplayer-item",{"is-editable":H})||""),children:(0,a.BX)(dn.Ug,{align:"center",spacing:1,children:[(0,a.tZ)(vn.Z,{size:"s",url:e.image}),(0,a.tZ)("div",{className:te().dynamic([["dc131772cdbb2add",[se.j.mobileMax]]])+" label",children:v?(0,a.tZ)(wn.gr,{source:e.username,match:v}):e.username})]})},e.id)})),$?(0,a.BX)(yn.Z,{foreground:2,align:"center",children:['No members matching "',v,'" found']}):null]}),H||c?null:(0,a.tZ)(yn.Z,{foreground:2,size:"small",children:"Only admins can add and remove members to multiplayer"}),H&&V?(0,a.tZ)(Mn.Z,{replId:r}):null]}),(0,a.tZ)(te(),{id:"dc131772cdbb2add",dynamic:[se.j.mobileMax],children:".root.__jsx-style-dynamic-selector{padding:var(--space-16);color:var(--foreground-default)}.multiplayers-list.__jsx-style-dynamic-selector{background-color:var(--background-root);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);height:300px;overflow-y:auto}.multiplayers-list.is-empty.__jsx-style-dynamic-selector{display:grid;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:var(--space-16);word-break:break-word}.multiplayer-item.__jsx-style-dynamic-selector{padding:var(--space-4)var(--space-16)}.multiplayer-item.is-editable.__jsx-style-dynamic-selector{padding-right:var(--space-8)}.multiplayer-item.is-editable.__jsx-style-dynamic-selector:hover{background-color:var(--background-root)}.list-heading.__jsx-style-dynamic-selector{padding:var(--space-16)var(--space-16)0}.label.__jsx-style-dynamic-selector{margin-right:auto}.information-icon-container.__jsx-style-dynamic-selector{margin-left:5px}@media screen and (min-width:".concat(se.j.mobileMax,"px){.root.__jsx-style-dynamic-selector{padding:var(--space-48)}}")})]})}var Nn=t(15153),Xn=t(12215);function On(e){var n=e.children,t=e.showPopover,r=(0,Xn.Z)("announcement","add-guest-new-user"),o=r.shouldDisplay,s=r.register,c=r.dismiss,u=(0,i.Z)(l.useState(!1),2),d=u[0],p=u[1],f=(0,i.Z)(l.useState(!1),2),h=f[0],v=f[1];l.useEffect((function(){t&&!h&&s()}),[h,s,t]);var m=o&&!h;return(0,a.BX)(Y.Z,{onClickOutside:function(){return v(!0)},isOpen:m,showArrow:!0,borderColor:"var(--accent-purple-default)",children:[n,(0,a.BX)(dn.gC,{spacing:2,align:"stretch",children:[(0,a.BX)(dn.Ug,{spacing:1,children:[(0,a.tZ)(Nn.Z,{}),(0,a.tZ)(Zn.Z,{level:5,children:"Invite guests to your repl!"})]}),(0,a.BX)(yn.Z,{children:[" ","Add external guests to your repl for interviews and collaborative projects."," "]}),(0,a.tZ)(dn.Ug,{spacing:1,justify:"end",children:(0,a.tZ)(Cn.Z,{loading:d,onClick:function(){p(!0),(0,I.j)(I.U3.ADD_GUEST_POPOVER_DISMISSED),c()},children:"Got it"})})]})]})}var Ln=t(11181);function jn(e){var n=e.replId,t=function(e){var n=(0,R.Z)({},Je,e);return E.a(rn,n)}({variables:{replId:n},pollInterval:8e3}),r=t.data,o=t.loading,s=(0,mn.Z)(),c=s.showConfirm,u=s.showError,d=(0,i.Z)(l.useState(!1),2),p=d[0],f=d[1],h=(0,i.Z)(function(e){var n=(0,R.Z)({},Je,e);return G.D(on,n)}({onCompleted:function(e){var t,r=null===(t=e.addMultiplayerUser.user)||void 0===t?void 0:t.username;r&&((0,I.j)(I.U3.MULTIPLAYER_INVITED,{replId:n,inviteMethod:"username"}),c("Added @".concat(r)))}}),2),v=h[0],m=h[1],g=(0,i.Z)(function(e){var n=(0,R.Z)({},Je,e);return G.D(an,n)}({onError:function(e){return u(e.message)},onCompleted:function(e){var t,r=null===(t=e.removeMultiplayerUser.user)||void 0===t?void 0:t.username;r&&((0,I.j)(I.U3.MP2_REMOVED_USER_PERMISSION,{replId:n,username:r}),c("".concat(r," removed")))}}),2),y=g[0],b=g[1],w=(0,i.Z)(sn({update:function(e,t){var r,i=null===(r=t.data)||void 0===r?void 0:r.createMultiplayerInvite2;if(i)if("UserError"!==i.__typename){if("MultiplayerInvite"===i.__typename){var o=i.email;return(0,I.j)(I.U3.MULTIPLAYER_INVITED,{replId:n,inviteMethod:"email"}),void c("Invited ".concat(o," via email"))}if("ReplPermission"===i.__typename){var a;e.modify({id:e.identify({__typename:"Repl",id:n}),fields:{permissions:function(n){var t=e.writeFragment({data:i,fragment:tn});return(0,_e.Z)(n).concat([t])}}});var l=null===(a=i.user)||void 0===a?void 0:a.username;if(!l)return;(0,I.j)(I.U3.MULTIPLAYER_INVITED,{replId:n,inviteMethod:"email"}),c("Invited @".concat(l))}}else u(i.message)}}),2),x=w[0],k=w[1],C=(0,i.Z)(un({onError:function(e){return u(e.message)},onCompleted:function(e){if("UserError"!==e.deleteMultiplayerInvite.__typename){if("MultiplayerInvite"===e.deleteMultiplayerInvite.__typename){var t=e.deleteMultiplayerInvite.email;(0,I.j)(I.U3.MP2_REMOVED_EMAIL_INVITE,{replId:n,email:t}),c("invite for ".concat(t," deleted"))}}else u(e.deleteMultiplayerInvite.message)}}),2),P=C[0],T=C[1];l.useEffect((function(){var e=m.error||k.error;e&&(e.message.includes("reached the limit")?f(!0):u(e.message))}),[m.error,k.error,u]);var D="Repl"===(null===r||void 0===r?void 0:r.repl.__typename)?r.repl:null,U=null===r||void 0===r?void 0:r.currentUser,_=null===D||void 0===D?void 0:D.permissions.reduce((function(e,n){return n.user?(0,_e.Z)(e).concat([n.user.username]):e}),[]),B=null===D||void 0===D?void 0:D.currentUserPermissions.editMultiplayers,M=Boolean(D&&!D.permissions.length&&!D.multiplayerInvites.length),A=(null===D||void 0===D?void 0:D.permissions)?D.permissions.length:null;return(0,a.BX)("div",{className:"jsx-7043475ed4bd7433 root",children:[(0,a.BX)(dn.gC,{spacing:2,align:"stretch",children:[B&&_&&D?(0,a.tZ)("div",{className:"jsx-7043475ed4bd7433",children:(0,a.tZ)(Dn,{existingUsernames:_,onSubmit:function(e){!!!e.match(/.+@.+/)||k.loading?m.loading||v({variables:{username:e,replId:D.id,type:"rw"}}):x({variables:{email:e,replId:D.id,type:"rw"}})}})}):null,(0,a.tZ)("div",{className:"jsx-7043475ed4bd7433",children:(0,a.BX)(Zn.Z,{level:5,foreground:o?3:1,children:[null!==A&&(null===U||void 0===U?void 0:U.isSubscribed)?"".concat((0,Gn.Z)("multiplayer",A,!0)):null,null===A||(null===U||void 0===U?void 0:U.isSubscribed)?null:"".concat(A,"/").concat(50," ").concat((0,Gn.Z)("multiplayer",A))," ",o||(null===U||void 0===U?void 0:U.isSubscribed)?null:(0,a.tZ)("a",{onClick:function(){return f(!0)},"aria-label":"Click to upgrade for unlimited invites","data-microtip-position":"top",role:"tooltip",className:"jsx-7043475ed4bd7433 info-tooltip",children:(0,a.tZ)(_n.Z,{})}),o?"Loading...":null]})}),M?(0,a.tZ)("div",{className:"jsx-7043475ed4bd7433 empty-list",children:(0,a.BX)(dn.Ug,{align:"center",justify:"center",children:[(0,a.tZ)("div",{className:"jsx-7043475ed4bd7433",children:"No one is here"}),(0,a.tZ)("div",{className:"jsx-7043475ed4bd7433",children:(0,a.tZ)("img",{src:"/public/images/rainy-computer.png",alt:"raindrops falling onto an open laptop",className:"jsx-7043475ed4bd7433"})})]})}):(0,a.BX)("div",{className:"jsx-7043475ed4bd7433 multiplayers-list",children:[null===D||void 0===D?void 0:D.permissions.map((function(e){var t=e.user,r=e.type;return t?(0,a.BX)("div",{className:"jsx-7043475ed4bd7433 "+(he()("multiplayer-item",{"is-editable":D.currentUserPermissions.editMultiplayers})||""),children:[(0,a.tZ)(vn.Z,{size:"s",url:t.image}),(0,a.BX)("div",{className:"jsx-7043475ed4bd7433 label",children:[t.username," ",r===S.aQ.Rw?" (can edit)":null]}),D.currentUserPermissions.editMultiplayers?(0,a.tZ)(Cn.Z,{border:!1,filled:!1,"aria-label":"Remove member",role:"tooltip","data-microtip-position":"left",onClick:function(){b.loading||y({variables:{replId:n,username:t.username}})},children:(0,a.tZ)(Z.Z,{size:12})}):null]},t.id):null})),null===D||void 0===D?void 0:D.multiplayerInvites.map((function(e){return(0,a.BX)("div",{className:"jsx-7043475ed4bd7433 "+(he()("multiplayer-item",{"is-editable":B})||""),children:[(0,a.tZ)(vn.Z,{size:"s"}),(0,a.BX)("div",{className:"jsx-7043475ed4bd7433 label",children:[e.email," (pending)"]}),B?(0,a.tZ)(Cn.Z,{border:!1,filled:!1,"aria-label":"Remove email invite",role:"tooltip","data-microtip-position":"left",onClick:function(){T.loading||P({variables:{replId:n,email:e.email}})},children:(0,a.tZ)(Z.Z,{size:12})}):null]},e.email)}))]})]}),(0,a.tZ)(Ln.Z,{isOpen:p,onClose:function(){return f(!1)},trackingInfo:{context:"workspace-multiplayer-header"}}),(0,a.tZ)(te(),{id:"7043475ed4bd7433",children:".root.jsx-7043475ed4bd7433{color:var(--foreground-default)}.multiplayers-list.jsx-7043475ed4bd7433,.empty-list.jsx-7043475ed4bd7433{background-color:var(--background-root);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);height:200px}.multiplayers-list.jsx-7043475ed4bd7433{overflow-y:auto;padding:var(--space-8)0}.multiplayer-item.jsx-7043475ed4bd7433{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;padding:var(--space-4)var(--space-16);-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.multiplayer-item.is-editable.jsx-7043475ed4bd7433{padding-right:var(--space-8)}.multiplayer-item.is-editable.jsx-7043475ed4bd7433:hover{background-color:var(--background-root)}.label.jsx-7043475ed4bd7433{margin-right:auto;padding-left:var(--space-8)}.info-tooltip.jsx-7043475ed4bd7433{display:inline-block}.info-tooltip.jsx-7043475ed4bd7433,.info-tooltip.jsx-7043475ed4bd7433:hover,.info-tooltip.jsx-7043475ed4bd7433:focus{color:var(--foreground-default);border:none;outline:none}.empty-list.jsx-7043475ed4bd7433 img.jsx-7043475ed4bd7433{display:block;height:200px;opacity:60%}"})]})}function zn(e){var n=e.replId;return(0,a.BX)("div",{className:te().dynamic([["73cdb9c447ce4102",[se.j.mobileMax]]]),children:[(0,a.BX)(dn.gC,{spacing:2,align:"stretch",children:[(0,a.tZ)(Zn.Z,{level:4,children:"Invite"}),(0,a.tZ)(jn,{replId:n}),(0,a.tZ)(Mn.Z,{replId:n})]}),(0,a.tZ)(te(),{id:"73cdb9c447ce4102",dynamic:[se.j.mobileMax],children:"div.__jsx-style-dynamic-selector{padding:var(--space-16)}@media screen and (min-width:".concat(se.j.mobileMax,"px){div.__jsx-style-dynamic-selector{padding:var(--space-32)}}")})]})}var Wn=t(18172),Fn=t(71171),Hn=t.n(Fn),Vn=t(68963),$n=t(95068),qn=t(12727),Kn=t(88055),Yn=t(8357),Qn=t(72676),Jn=t(57416),et=t(37806),nt=((0,s.cn)(null,(function(e,n,t){var r=e(qn.Eh).find((function(e){return e.isDialog}));r?n(Kn.$,r.paneId):n(tt,t)})),(0,s.cn)(null,(function(e,n,t){var r=e(qn.Eh).find((function(e){return e.isDialog}));if(r){var i=e(r.data);i.type!==i.type?(n(Kn.$,r.paneId),n(tt,t)):n(Yn.v,{paneId:r.paneId,data:t.pane})}else n(tt,t)}))),tt=(0,s.cn)(null,(function(e,n,t){if(!e(qn.Eh).find((function(e){return e.isDialog}))){var r=e($n.g4),i=e(qn.CK),o=Hn()(),a=i.x+i.width,l=i.y+i.height,s=t.maxWidth||a,c=t.maxHeight||l,u=Math.min(s,.8*a),d=Math.min(c,.8*l),p={width:u,height:d,x:a/2-u/2-i.x,y:l/2-d/2-i.y},f=(0,Wn.ZP)(r,(function(e){try{(0,Vn.m)(e,{id:Hn()(),isFloating:!0,panes:[o],rect:p})}catch(t){throw n(et.xm,{error:t,tags:{layoutstate:!0}}),t}}));n(Qn.iH,f),n(Jn.W1,o);var h=(0,qn.z)(o),v=e(h);n(Jn.W1,o),n(h,(0,ce.Z)((0,R.Z)({},v),{isDialog:!0})),n(v.data,t.pane)}})),rt=(0,s.cn)(null,(function(e,n){var t=e(qn.Eh).find((function(e){return e.isDialog}));t&&n(Kn.$,t.paneId)})),it=t(14924),ot=t(35642),at=t(26082),lt=t(17495),st=t(42325);function ct(e){var n,t=e.replId,r=e.onDone,o=e.isResubmit,l=e.lastUpdated,s=e.openIOtesterPane,c=(0,Q.Z)().iotester,u=(0,st.CH)({variables:{replId:t}}),d=c.lastRunAt.getTime()>l,p=(0,lt.xh)({variables:{replId:t}}).data,f="Repl"===(null===p||void 0===p?void 0:p.repl.__typename)?p.repl:null,h=(null===f||void 0===f?void 0:f.template)||null,v=(null===h||void 0===h?void 0:h.dueDate)||null,g=(new Date).toISOString(),Z=(0,mn.Z)(),k=Z.showConfirm,C=Z.showError,I=(0,i.Z)((0,lt.xA)({variables:{replId:t},onCompleted:function(e){var n=e.submitRepl;"UserError"!==n.__typename?"Repl"===n.__typename&&(k("Repl submitted"),r()):C(n.message)},onError:function(e){C(e.message)}}),2),S=I[0],R=I[1],P=d&&c.lastRunDidPass;return"Repl"===(null===(n=u.data)||void 0===n?void 0:n.repl.__typename)&&u.data.repl.ioTests.length>0&&!P?(0,a.BX)(y.Z,{css:[w.l0.colWithGap(24)],children:[(0,a.tZ)(b.h,{variant:"headerDefault",level:2,children:d?"Fix test failures before submitting":"Run tests before submitting"}),(0,a.tZ)(b.x,{multiline:!0,children:d?"Input/Output tests did not pass.":"Input/Output tests have not been run since this Repl was last changed."}),(0,a.BX)(y.Z,{css:[w.l0.rowWithGap(12),w.l0.justify.end],children:[(0,a.tZ)(m.ZP,{disabled:R.loading,colorway:"primary",onClick:function(){s(),r()},text:"View tests"}),(0,a.tZ)(m.ZP,{disabled:R.loading,onClick:function(){return S()},iconLeft:(0,a.tZ)(x.Z,{}),text:"Submit anyway"})]})]}):(0,a.BX)(y.Z,{css:[w.l0.colWithGap(24)],children:[(0,a.tZ)(b.h,{variant:"headerDefault",level:2,children:o?" Resubmit Repl":"Submit Repl"}),(0,a.tZ)(b.x,{multiline:!0,children:o?"This will re-notify Team admins about your submission.":"This will submit your Repl for review and notify the Team's admins."}),v&&v<g?(0,a.tZ)(b.x,{multiline:!0,css:[w.l0.color.accentNegativeStronger],children:"Note: Your submission is past the due date and will be marked late."}):null,(0,a.BX)(y.Z,{css:[w.l0.rowWithGap(12),w.l0.justify.end],children:[(0,a.tZ)(m.ZP,{disabled:R.loading,onClick:r,text:"Cancel"}),(0,a.tZ)(m.ZP,{colorway:"primary",disabled:R.loading,onClick:function(){return S()},iconLeft:(0,a.tZ)(x.Z,{}),text:o?"Submit again":"Submit"})]})]})}var ut=t(40381),dt=t(65456),pt=t(48551),ft=t(37424),ht=t(19923);function vt(){var e=(0,P.Z)(["\n  query UpdateModelSolutionModal($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        owner {\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n        origin {\n          id\n          ...TeamProfileRepl\n          template {\n            id\n            dueDate\n          }\n          unitTests {\n            tests {\n              id\n            }\n          }\n          ioTests {\n            id\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return vt=function(){return e},e}function mt(){var e=(0,P.Z)(["\n  mutation UpdateModelSolution($input: UpdateReplTemplateModelSolutionInput!) {\n    updateReplTemplateModelSolution(input: $input) {\n      ... on Repl {\n        id\n        ...TeamProfileRepl\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return mt=function(){return e},e}var gt={},Zt=(0,T.Ps)(vt(),ht.vs);var yt=(0,T.Ps)(mt(),ht.vs);var bt,wt=t(28479),xt=function(e){var n,t,r,o,s,c,u,d,p,f=e.replId,h=e.onDone,m=(0,mn.Z)(),g=m.showConfirm,Z=m.showError,y=function(e){var n=(0,R.Z)({},gt,e);return E.a(Zt,n)}({variables:{replId:f},onCompleted:function(e){var n,t,r=e.repl;"Repl"===r.__typename&&(null===(n=r.origin)||void 0===n||null===(t=n.template)||void 0===t?void 0:t.modelSolution)&&"ReplTemplateModelSolution"===r.origin.template.modelSolution.__typename&&(T(r.origin.template.modelSolution.visibleAfterSubmitting),_(r.origin.template.modelSolution.visibleAfterPassingTests),A(r.origin.template.modelSolution.visibleAfterDueDate))}}),b=y.data,w=y.loading,k=(0,i.Z)(function(e){var n=(0,R.Z)({},gt,e);return G.D(yt,n)}({onError:function(e){return Z(e)},onCompleted:function(){g("Updated solution"),h()}}),2),C=k[0],I=k[1],S=(0,i.Z)(l.useState(!1),2),P=S[0],T=S[1],D=(0,i.Z)(l.useState(!1),2),U=D[0],_=D[1],B=(0,i.Z)(l.useState(!1),2),M=B[0],A=B[1],N=(0,i.Z)(l.useState(),2),X=N[0],O=N[1],L=(0,ft.H)();if(l.useEffect((function(){var e="Students can ";if(P||M||U){e+="view the solution after";var n=[];P&&n.push("submitting their project"),U&&n.push("passing all tests"),M&&n.push("the due date has passed");for(var t=0;t<n.length;t++)t>0&&(e+=",",t===n.length-1&&(e+=" and")),e+=" "+n[t];e+="."}else e+="never view the solution.";O(e)}),[P,U,M]),w)return(0,a.tZ)(v.G7,{css:[v.l0.center],children:(0,a.tZ)(ve.Z,{})});var j="Repl"===(null===b||void 0===b?void 0:b.repl.__typename)&&"Team"===(null===(n=b.repl.owner)||void 0===n?void 0:n.__typename)&&(null===(t=b.repl.owner)||void 0===t?void 0:t.id),z="Repl"===(null===b||void 0===b?void 0:b.repl.__typename)&&(null===(r=b.repl.origin)||void 0===r||null===(o=r.template)||void 0===o?void 0:o.modelSolution);if(!z)return null;var W=z.id,F="Repl"===(null===b||void 0===b?void 0:b.repl.__typename)&&((null===(s=b.repl.origin)||void 0===s?void 0:s.ioTests.length)||(null===(c=b.repl.origin)||void 0===c||null===(u=c.unitTests)||void 0===u?void 0:u.tests.length)),H="Repl"===(null===b||void 0===b?void 0:b.repl.__typename)&&(null===(d=b.repl.origin)||void 0===d||null===(p=d.template)||void 0===p?void 0:p.dueDate);return(0,a.tZ)("form",{onSubmit:function(e){e.preventDefault(),j&&W&&C({variables:{input:{teamId:j,solutionId:W,visibleAfterSubmitting:P,visibleAfterPassingTests:U,visibleAfterDueDate:M}}})},children:(0,a.BX)(v.G7,{css:[v.l0.colWithGap(24)],children:[(0,a.tZ)(v.h4,{level:1,variant:"headerDefault",children:"Update solution"}),(0,a.BX)(v.G7,{css:[v.l0.colWithGap(16)],children:[(0,a.BX)(v.G7,{css:[v.l0.rowWithGap(8)],children:[(0,a.tZ)(v.XZ,{id:L("availableAfterSubmitting"),checked:P,onChange:function(){return T(!P)}}),(0,a.tZ)("label",{htmlFor:L("availableAfterSubmitting"),children:(0,a.tZ)(v.xv,{children:"Available after submitting"})})]}),(0,a.BX)(v.G7,{css:[v.l0.rowWithGap(8)],children:[(0,a.tZ)(v.XZ,{id:L("availableAfterPassingTests"),checked:U,onChange:function(){return _(!U)}}),(0,a.tZ)("label",{htmlFor:L("availableAfterPassingTests"),children:(0,a.BX)(v.G7,{css:[v.l0.rowWithGap(4)],children:[(0,a.tZ)(v.xv,{children:"Available after passing tests"}),(0,a.BX)(v.xv,{children:["(",F?"".concat(F," ").concat((0,Gn.Z)("test",F)," defined"):"no tests exist yet",")"]})]})})]}),(0,a.BX)(v.G7,{css:[v.l0.rowWithGap(8),{verticalAlign:"baseline"}],children:[(0,a.tZ)(v.XZ,{id:L("availableAfterDueDate"),checked:M,onChange:function(){return A(!M)}}),(0,a.tZ)("label",{htmlFor:L("availableAfterDueDate"),children:(0,a.BX)(v.G7,{css:[v.l0.rowWithGap(4)],children:[(0,a.tZ)(v.xv,{children:"Available after due date"}),(0,a.BX)(v.xv,{css:{textDecoration:"italic"},children:["(",H?(0,wt.p)(H):"no due date set yet",")"]})]})})]})]}),(0,a.tZ)(v.E_,{text:"".concat(X),colorway:P||U||M?"positive":"negative"}),(0,a.tZ)(v.G7,{css:{alignItems:"end"},children:(0,a.tZ)(v.zx,{stretch:!1,colorway:"primary",text:"".concat(I.loading?"Saving...":"Save"),iconLeft:(0,a.tZ)(x.Z,{}),disabled:I.loading})})]})})},kt=(bt={},(0,it.Z)(bt,S.Sy.PublishTemplate,"Publish project"),(0,it.Z)(bt,S.Sy.EditTemplate,"Edit project"),(0,it.Z)(bt,S.Sy.Submit,"Submit"),(0,it.Z)(bt,S.Sy.Resubmit,"Resubmit"),(0,it.Z)(bt,S.Sy.UpdateModelSolution,"Update solution"),bt);function Ct(e){var n=e.cta,t=e.replId,r=e.isGroupProject,o=e.openIOtesterPane,s=(0,i.Z)(l.useState(null),2),c=s[0],u=s[1],d=function(){return u(null)},p=(0,ut.Z)(),f=(0,Q.Z)().fs,h=(0,i.Z)(l.useState(0),2),v=h[0],Z=h[1];l.useEffect((function(){if(p&&!(0,pt.T3)(p)&&!(0,pt.sL)(p)){var e=f.watchTextFile(p,{onChange:function(e){e.changeSource===dt.Fl.Local&&Z(Date.now())}});return e}}),[p,f,Z]);var y=Boolean(c&&[S.Sy.PublishTemplate,S.Sy.EditTemplate].includes(c));return l.useEffect((function(){n===S.Sy.ReviewSubmission&&(ot.Z.get("annotations/educationModalDismissed")||(u(n),ot.Z.set("annotations/educationModalDismissed",!0)))}),[n]),(0,a.BX)(a.HY,{children:[kt[n]&&(0,a.tZ)(m.ZP,{onClick:function(){return u(n)},text:kt[n],iconLeft:(0,a.tZ)(x.Z,{})}),(0,a.tZ)(g.Z,{isOpen:c===S.Sy.Submit||c===S.Sy.Resubmit,onRequestClose:d,maxWidth:512,children:(0,a.tZ)(ct,{replId:t,onDone:d,isResubmit:c===S.Sy.Resubmit,lastUpdated:v,openIOtesterPane:o})}),(0,a.tZ)(Ue.Z,{preventClose:!0,isOpen:y,onRequestClose:d,width:r?"large":"medium",children:(0,a.tZ)(at.Z,{replId:t,onDone:d})}),(0,a.tZ)(g.Z,{isOpen:c===S.Sy.UpdateModelSolution,onRequestClose:d,maxWidth:600,children:(0,a.tZ)(xt,{replId:t,onDone:d})})]})}var It=t(41238),St={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!1,key:"K"},Rt={type:"context",icon:(0,a.tZ)(It.Z,{}),label:"",description:"Type a command...",keyboardShortcut:St},Pt=(0,s.cn)(!1),Tt=(0,s.cn)(null,(function(e,n,t){if(e(Pt))return n(Et,null),void n(Pt,!1);t&&n(Et,t),n(Pt,!0)})),Et=(0,s.cn)(null),Dt=(0,s.cn)((function(e){var n=e(Ut);return{data:Rt,commands:function(){return n}}})),Ut=(0,s.cn)([]),_t=(0,s.cn)((function(e){var n=e(Dt),t=e(Et);return t?[n,t]:n})),Bt=t(70917),Mt=t(29163),Gt=t(5257),At=t(99534),Nt=t(21131),Xt=(0,s.cn)({chat:"unread"}),Ot=(0,s.cn)(null,(function(e,n,t){n(Xt,(function(e){return(0,Wn.ZP)(e,(function(e){t.indicatorType?e[t.paneType]=t.indicatorType:delete e[t.paneType]}))}))}));function Lt(e){var n=e.paneType,t=(0,Nt.Z)((function(){return(0,s.cn)((function(e){return n?e(Xt)[n]:void 0}))}),[n]);return(0,s.Dv)(t)}var jt=(0,Bt.iv)([v.l0.borderRadius("full"),v.l0.position.absolute,v.l0.top(-3),v.l0.right(-3)]);function zt(e){var n=e.color,t=void 0===n?v.TV.redStronger:n,r=e.small?6:8;return(0,a.tZ)(v.G7,{style:{backgroundColor:t,width:r,height:r},css:jt})}var Wt=(0,Bt.iv)([v.l0.align.center,v.l0.p(4),v.l0.borderRadius(8),v.l0.rowWithGap(4),v.l0.position.relative,{fontSize:v.TV.fontSizeDefault,lineHeight:"normal"}]),Ft=(0,Bt.iv)({color:"inherit"});function Ht(e){var n,t,r=null===(n=e.highlightRanges)||void 0===n?void 0:n.filter((function(e){return e.to>0})),i=Lt({paneType:null===(t=e.pane)||void 0===t?void 0:t.type});return(0,a.BX)(v.Tg,{elevated:!0,style:{color:e.active?v.TV.foregroundDefault:v.TV.foregroundDimmer},css:Wt,children:[e.icon,(0,a.tZ)(v.xv,{css:Ft,children:(null===r||void 0===r?void 0:r.length)?(0,a.tZ)(wn.xK,{style:{color:(e.active,v.TV.foregroundDimmest)},matchStyle:{fontWeight:v.TV.fontWeightBold,color:v.TV.foregroundDefault},source:e.label,matches:r.map((function(e){return{column:e.from,length:e.to-e.from}}))}):e.label}),i?(0,a.tZ)(zt,{small:!0}):null]})}var Vt=v.KD.button;function $t(e){var n=e.onClick,t=(0,At.Z)(e,["onClick"]);return(0,a.tZ)(Vt,{css:[v.l0.reset.button],onClick:n,children:(0,a.tZ)(Ht,(0,R.Z)({},t))})}var qt=t(33279),Kt=(0,Bt.iv)([v.l0.p(8),v.l0.rowWithGap(4),v.l0.align.center,v.l0.justify.spaceBetween]),Yt=(0,Bt.iv)([v.l0.rowWithGap(4),v.l0.align.center,v.l0.flex.growAndShrink(1)]);function Qt(e){var n=e.content||(0,a.BX)(a.HY,{children:[(Array.isArray(e.item)?e.item:[e.item]).map((function(n,t){return(0,a.tZ)(Ht,{icon:n.icon,label:n.label,active:n.active,highlightRanges:n.highlightRanges,pane:e.pane},n.label+t)})),e.description?(0,a.tZ)(v.xv,{variant:"small",color:e.active?"dimmer":"dimmest",css:[v.l0.flex.growAndShrink(1)],children:e.description}):null]});return(0,a.BX)(v.Tg,{elevated:e.active,css:Kt,children:[(0,a.tZ)(v.G7,{css:Yt,children:n}),e.keyboardShortcut?(0,a.tZ)(qt.Z,{shortcut:e.keyboardShortcut}):null]})}var Jt=y.K.div;function er(e){var n=e.isLoading||e.items.length?e.items.map((function(n,t){var r=n.data,i=r.label,o=r.icon,l=n.match.render,s=t===e.highlightedIndex,c=l&&"content"in l?l.content:void 0,u=l&&"ranges"in l?l.ranges:void 0;return(0,a.tZ)(Jt,(0,ce.Z)((0,R.Z)({css:[{cursor:"pointer"}]},e.getItemProps({item:n,index:t})),{children:c?(0,a.tZ)(Qt,{active:s,description:r.description,keyboardShortcut:r.keyboardShortcut,content:c}):(0,a.tZ)(Qt,{active:s,description:r.description,keyboardShortcut:r.keyboardShortcut,item:{icon:o,label:i,active:s,highlightRanges:u}})}),(0,Gt.k)(n))})):null;return(0,a.tZ)(Jt,(0,ce.Z)((0,R.Z)({},e.getMenuProps()),{css:[w.l0.flex.growAndShrink(1),w.l0.overflow("auto")],children:n}))}var nr=(0,l.memo)(er),tr=y.K.div,rr=y.K.input,ir=(0,Bt.iv)([w.l0.height("100%"),w.l0.flex.growAndShrink(1),w.l0.color.foregroundDefault,w.l0.display.block,w.l0.py(8),{fontSize:w.TV.fontSizeSubheadDefault,backgroundColor:"transparent",border:"0 none",outline:"0 none","::placeholder":{color:w.TV.foregroundDimmest},"&:hover::placeholder":{color:w.TV.foregroundDimmer},"&:focus::placeholder, &:hover:focus::placeholder":{color:w.TV.foregroundDimmest}}]);function or(e){var n=(0,Gt.Z)({onSelect:e.onSelect,initialCommand:e.initialCommand}),t=n.combobox;return(0,a.BX)(v.Tg,{elevated:!0,className:e.className,css:[w.l0.flex.growAndShrink(1),w.l0.borderRadius(8),w.l0.overflow("hidden"),w.l0.maxHeight("70vh")],children:[(0,a.BX)(tr,(0,ce.Z)((0,R.Z)({},t.getComboboxProps()),{css:[w.l0.rowWithGap(4),w.l0.pl(4),w.l0.pr(8),w.l0.align.center],children:[(0,a.tZ)(y.Z,{css:[w.l0.py(8),w.l0.rowWithGap(4)],children:n.path.map((function(e,t){var r=e.data,i=r.label,o=r.icon,l=i+t,s=function(){n.resetToIndex({index:t,focus:!0})};return 0===t?(0,a.tZ)(Mt.Z,{alt:"Commands",onClick:s,children:n.isLoading?(0,a.tZ)(ve.Z,{}):(0,a.tZ)(It.Z,{})},l):(0,a.tZ)($t,{label:i,icon:o,onClick:s},l)}))}),(0,a.tZ)(rr,(0,R.Z)({css:[ir]},t.getInputProps({value:n.inputValue,autoFocus:!0,ref:n.inputRef,onChange:function(e){return n.setInputValue(e.currentTarget.value)},onKeyDown:function(t){"Enter"===t.key&&0===n.items.length&&e.onSubmit?e.onSubmit(t.currentTarget.value):"ArrowLeft"!==t.key&&"ArrowRight"!==t.key?"Backspace"===t.key&&n.handleBackspace():n.handleLeftRightArrow(t.key)},placeholder:n.placeholder}))),n.keyboardShortcut?(0,a.tZ)(qt.Z,{shortcut:n.keyboardShortcut}):null]})),(0,a.tZ)(nr,{items:n.items,getMenuProps:t.getMenuProps,getItemProps:t.getItemProps,highlightedIndex:t.highlightedIndex,isLoading:n.isLoading})]})}var ar=t(58967),lr=t(16965),sr=t(88961),cr=t(47875);function ur(e,n){if("object"!==typeof n)return null;var t="string"===typeof n.action?n.action:null;if(!t)return null;if("layout"===e){if("split"===t){var r="string"===typeof n.pane?{type:n.pane}:{type:"commands",data:{autoFocus:!1}};return{action:n.action,placement:n.placement,pane:r}}if("reset"===t)return{action:"resetLayout"}}if("file"===e){var i="string"===typeof n.path?n.path:null;return i&&("openOrCreate"===n.action||"delete"===n.action)?{action:n.action,path:i}:null}if("tabs"===e){if("close"===t&&"string"===typeof n.type)return{action:"closeTab",type:n.type};if("open"===t)return{action:"openTab",pane:"string"===typeof n.type?{type:n.type}:{type:"commands",data:{autoFocus:!1}}}}return"codegen"===e&&"generate"===t&&"string"===typeof n.prompt?{action:"generate",prompt:n.prompt}:null}var dr=t(29351),pr=t(50146),fr=t(74275),hr=t(12771),vr=t(11731),mr=t(54992),gr=(0,s.cn)(null,(function(e,n,t){var r=e((0,qn.z)(t.fromPaneId));if(r.isDialog){n(Kn.$,r.paneId);var i=e(qn.Eh).some((function(e){return"tile"===e.type}));n(dr.g2,i?{panes:[t.data],placement:"leftOf",makeActive:!0}:{panes:[t.data],placement:"replace",makeActive:!0})}else n(Yn.v,{paneId:t.fromPaneId,data:t.data,makeActive:!0})})),Zr=(0,s.cn)(null,(function(e,n,t){var r=e($n.g4),i=(0,hr._F)(r,"topLeft"),o=e(qn.Eh).find((function(n){return e(n.data).type===t.pane.type}));if(o)n(vr.Oe,o.paneId);else if(i){var a=i.paneGroup.panes.find((function(n){var t=e((0,qn.z)(n));if(t.isHidden)return!1;var r=e(t.data);return"filetree"!==r.type&&(!t.isCommited&&!(0,mr.Zh)(r.type))}));a?n(Yn.v,{paneId:a,data:t.pane,makeActive:!0}):("debugger"===t.pane.type&&n(dr.gN,{pane:t.pane,edge:"left"}),n(vr.Je,{panes:[t.pane],paneGroupPath:i.path,activate:!0,index:0}))}else n(dr.g2,{panes:[t.pane],placement:"leftOf",relativeTo:["tiling"],makeActive:!0})}));function yr(){return(0,s.b9)(Zr)}var br=t(90914),wr=t(17780),xr=t(39),kr=t(3032),Cr=t(78120);function Ir(e){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,r.Z)((function(e){var n;return(0,o.__generator)(this,(function(t){switch(t.label){case 0:if(!wr.l)throw new Error("Expected apolloClient");return[4,wr.l.query({query:br.R1,variables:{input:e}})];case 1:if("GenerateCodeResult"!==(n=t.sent().data).generateCode.__typename)throw new Error(n.generateCode.__typename);return[2,n.generateCode.code]}}))}))).apply(this,arguments)}var Rr=(0,s.cn)(null,(function(e,n){n(Qn.iH,{tiling:null,floating:[]})})),Pr=((0,s.cn)(null,(function(e,n){var t=Hn()(),r=e($n.g4);n(Qn.iH,(0,Wn.ZP)(r,(function(e){(0,Vn.m)(e,{id:Hn()(),relativeTo:["tiling"],placement:"replace",panes:[t]})})))})),(0,s.cn)(null,function(){var e=(0,r.Z)((function(e,n,t){var r,i,a,l,s,c,u;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:switch(r=t.action,i=t.fs,r.action){case"openOrCreate":return[3,1];case"delete":return[3,7];case"split":return[3,9];case"openTab":return[3,10];case"closeTab":return[3,11];case"resetLayout":return[3,12];case"clearLayout":return[3,13];case"generate":return[3,14]}return[3,17];case 1:return[4,i.stat(r.path)];case 2:return o.sent().exists?[3,6]:[4,i.writeFile(r.path,"")];case 3:return o.sent(),[4,i.flush()];case 4:return o.sent(),[4,i.persist({skipDebounce:!0})];case 5:o.sent(),o.label=6;case 6:return n(kr.U,{path:r.path}),[3,17];case 7:return[4,i.deleteFile(r.path)];case 8:return o.sent(),[3,17];case 9:return a=e(Jn.J1),n(dr.g2,{panes:[r.pane],placement:r.placement,makeActive:!1,relativeTo:a||["tiling"]}),[3,17];case 10:return n(Zr,{pane:r.pane}),[3,17];case 11:return"*"===r.type?n(Rr,{}):n(pr.AW,r.type),[3,17];case 12:return n(fr.B,{}),[3,17];case 13:return n(Rr,{}),[3,17];case 14:return(l=e($n.QP))||(s=e(qn.Eh).find((function(n){return"codeEditor"===e(n.data).type})))&&"codeEditor"===(c=e(s.data)).type&&(l=c.data.path),l?[4,Ir({language:(0,xr.Sf)(l),replId:t.replId,prompt:r.prompt})]:[2];case 15:return u=o.sent(),[4,new Promise((function(e,n){if(l)var t=i.watchTextFile(l,{onError:function(t){n(t),e()},onReady:function(n){var r=n.writeChange,i=n.initialContent;r(Cr.as.of({from:i.length,insert:u},i.length)),t(),e()}});else n(new Error("Expected path"))}))];case 16:return o.sent(),[3,17];case 17:return[2]}}))}));return function(n,t,r){return e.apply(this,arguments)}}())),Tr="https://llmide.amasad.repl.co";function Er(e){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,r.Z)((function(e){return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,fetch(Tr+"/"+encodeURIComponent(e),{mode:"cors"})];case 1:return[4,n.sent().json()];case 2:return[2,{json:n.sent(),error:null}];case 3:return[2,{json:null,error:n.sent()}];case 4:return[2]}}))}))).apply(this,arguments)}var Ur=(0,s.cn)(!1),_r=(0,s.cn)(!1);function Br(e){var n=e.isOpen,t=e.onDone,a=(0,Q.Z)().fs,c=(0,lr.Z)(t),u=(0,cr.Q)("flagGhostrunner"),d=(0,ke.Z)(),p=(0,Nt.Z)((function(){return(0,s.cn)(null,function(){var e=(0,r.Z)((function(e,n,t){var r,l,s,u,p,f,h,v,m;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return e(cr.H).flagGhostrunner?(n(Ur,!0),[4,Er(t)]):[2];case 1:if((r=o.sent()).error)return n(Ur,!1),n(_r,!0),[2];if(l=function(e){if("object"!==typeof e)return{error:"not an object",actions:null};var n=e&&"result"in e?e.result:null;if(!Array.isArray(n))return{error:"no commands",actions:null};var t=[],r=!0,o=!1,a=void 0;try{for(var l,s=n[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var c=l.value;if("object"===typeof c){var u=!0,d=!1,p=void 0;try{for(var f,h=Object.entries(c)[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var v=(0,i.Z)(f.value,2),g=ur(v[0],v[1]);g&&t.push(g)}}catch(m){d=!0,p=m}finally{try{u||null==h.return||h.return()}finally{if(d)throw p}}}}}catch(m){o=!0,a=m}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return 0===t.length?{error:"no commands",actions:null}:{error:null,actions:t}}(r.json),!l.actions)return n(Ur,!1),n(_r,!0),[2];s=!0,u=!1,p=void 0,o.label=2;case 2:o.trys.push([2,7,8,9]),f=l.actions[Symbol.iterator](),o.label=3;case 3:return(s=(h=f.next()).done)?[3,6]:(v=h.value,[4,n(Pr,{fs:a,action:v,replId:d})]);case 4:o.sent(),o.label=5;case 5:return s=!0,[3,3];case 6:return[3,9];case 7:return m=o.sent(),u=!0,p=m,[3,9];case 8:try{s||null==f.return||f.return()}finally{if(u)throw p}return[7];case 9:return n(Ur,!1),c.current(),[2]}}))}));return function(n,t,r){return e.apply(this,arguments)}}())}),[c,a,d]),f=(0,s.b9)(p);return(0,l.useEffect)((function(){if(u&&n&&window.webkitSpeechRecognition){var e=new window.webkitSpeechRecognition;e.onresult=function(e){var n=e.results[0][0].transcript;f(n)},e.start()}}),[f,u,n]),f}function Mr(){var e=(0,s.Dv)(Ur);return(0,s.Dv)(_r)?(0,a.tZ)(Gr,{}):e?(0,a.tZ)(v.Tg,{elevated:!0,css:[v.l0.coverContainer,v.l0.borderRadius(8),v.l0.center],children:(0,a.tZ)(ve.Z,{})}):null}function Gr(){var e=(0,s.b9)(_r);return(0,l.useEffect)((function(){var n=setTimeout((function(){e(!1)}),600);return function(){clearTimeout(n)}}),[e]),(0,a.tZ)(v.Tg,{elevated:!0,css:[v.l0.coverContainer,v.l0.borderRadius(8),v.l0.center],children:(0,a.BX)(v.G7,{css:[v.l0.rowWithGap(8),v.l0.align.center],children:[(0,a.tZ)(sr.Z,{color:v.TV.accentNegativeDefault}),(0,a.tZ)(v.xv,{children:"Something went wrong, try again"})]})})}function Ar(e){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{enabled:!0}).enabled,t=(0,s.b9)(Ut);(0,l.useEffect)((function(){if(n)return t((function(n){return(0,_e.Z)(n).concat([e])})),function(){t((function(n){return n.filter((function(n){return n!==e}))}))}}),[t,e,n])}function Nr(){var e=(0,s.Dv)(Pt),n=(0,s.b9)(Tt),t=(0,s.Dv)(_t),r=(0,Q.Z)().session,i=(0,ar.Z)("commandBar").trackTimeToLoadFileStart;(0,l.useEffect)((function(){return r.onCommandBarToggled((function(t){t!==e&&n()}))}),[r,n,e]),(0,l.useEffect)((function(){r.setIsCommandBarOpen(e)}),[r,e]);var o=Br({onDone:n,isOpen:e});return(0,a.BX)(Ue.Z,{isOpen:e,onRequestClose:function(){n()},hideCloseButton:!0,children:[(0,a.tZ)(or,{onSubmit:o,onSelect:function(e){if("openFile"===e.data.type){var t=e.data.deeplink;i(t.path),r.openFile(t.path),r.updateDeeplink(t)}"action"===e.data.type&&e.data.run(),n()},initialCommand:t}),(0,a.tZ)(Mr,{})]})}var Xr=(0,l.memo)(Nr),Or=t(95596),Lr=t(39715),jr=t(95901),zr=t(9117),Wr=t(36228),Fr=t(48869),Hr=t(6625),Vr=t(88679),$r=t(48287),qr=function(e){return e&&e.args?(e.args&&e.args.length>=3&&"sh"===e.args[0]&&"-c"===e.args[1]?e.args.slice(2):e.args).join(" "):""},Kr=function(e){var n=e.hideModal,t=(0,Q.Z)(),s=t.dotReplit,c=t.session,u=(0,Hr.Z)(),d=(0,mn.Z)().showError,p=(0,i.Z)(l.useState(!1),2),f=p[0],h=p[1],g=(0,i.Z)(l.useState(""),2),Z=g[0],y=g[1],b=l.useCallback((function(){n(),c.openFile(Vr.Z)}),[c,n]),x=l.useCallback((function(){return d("Failed to update run command, please try again or contact support")}),[d]),k=(0,i.Z)(l.useState(null),2),C=k[0],I=k[1];l.useEffect((function(){var e=function(){var e=(0,r.Z)((function(){var e,n,t;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return[4,s.getConfig()];case 1:return n=r.sent(),u.current?(n.errorMessage?I({error:n.error,errorMessage:n.errorMessage}):I(null),t=null===n||void 0===n||null===(e=n.config)||void 0===e?void 0:e.run,y(qr(t)),[2]):[2]}}))}));return function(){return e.apply(this,arguments)}}();e()}),[s,u]);var S=l.useCallback((0,r.Z)((function(){var e;return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,3,4]),e=Z?(0,$r.KQ)(Z):(0,$r.xz)("run"),h(!0),[4,s.updateDotReplit([e])];case 1:return t.sent(),n(),[3,4];case 2:return t.sent(),x(),[3,4];case 3:return h(!1),[7];case 4:return[2]}}))})),[Z,x,s,n]);return(0,a.BX)(v.G7,{css:[w.l0.colWithGap(8),w.l0.p(2),f&&w.l0.cursor.progress],children:[(0,a.tZ)(v.h4,{level:1,variant:"text",css:[w.l0.fontWeight.normal,w.l0.color.foregroundDimmer],children:"Run Command"}),C?(0,a.tZ)(v.xv,{children:C.errorMessage}):(0,a.BX)(a.HY,{children:[(0,a.tZ)(v.II,{value:Z,onChange:function(e){return y(e.target.value)},spellCheck:!1}),(0,a.BX)(v.G7,{css:[w.l0.rowWithGap(12),w.l0.mt(12)],children:[(0,a.tZ)(m.ZP,{onClick:b,text:"Advanced"}),(0,a.tZ)(v.G7,{css:w.l0.flex.grow(1)}),(0,a.tZ)(m.ZP,{colorway:"blue",text:"Save",onClick:S})]})]})]})},Yr=t(42895),Qr=t(98146),Jr=t(42699),ei=t(71255),ni=t(85565),ti=t(80437),ri=t(97808),ii=t(41034),oi=t(79500),ai=t(30880),li=t(57981),si="https://linkedin.com/sharing/share-offsite";var ci="https://www.facebook.com/dialog/share?display=page&app_id=1775481339348651";var ui=t(64181),di=function(e){var n=e.lessonSlug,t=e.courseSlug,r=(0,i.Z)((0,s.KO)(ui.yO),1)[0].locale,o=(0,mn.Z)().showConfirm;if(!n||!t)return null;var l=(0,ri.QW)(t,r),c=(0,ri.qv)(t,n,r);if(!c)return null;var u=c.ordinalLabel,d=(0,ri.tD)(l.socialSharingText,c),p="".concat(d," ").concat(l.sharableLink),f=(0,ei.Z)({text:d,url:l.sharableLink}),h=function(e){var n=e.url;return"".concat(si,"?url=").concat(encodeURIComponent(n))}({url:l.sharableLink}),g=function(e){var n=e.url,t=e.hashtag,r=e.redirectBackTo,i=new URLSearchParams;i.append("href",n),r&&i.append("redirect_uri",r),t&&(t.startsWith("#")||(t="#".concat(t)),i.append("hashtag",t));var o=i.toString();return"".concat(ci,"&").concat(o)}({url:l.sharableLink,hashtag:l.socialHashtag}),Z=[{url:f,icon:ni.Z,base:ei.c,cta:"Share on Twitter",color:ti.Z.brands.twitter},{url:h,icon:li.Z,base:si,cta:"",color:ti.Z.brands.linkedin},{url:g,icon:ai.Z,base:ci,cta:"",color:ti.Z.brands.facebook}];return(0,a.BX)(y.Z,{children:[(0,a.BX)(y.Z,{css:[w.l0.rowWithGap(16),w.l0.align.center,w.l0.pr(24)],children:[(0,a.tZ)(y.Z,{css:{fontSize:48},children:"\ud83e\udd73"}),(0,a.BX)(b.x,{variant:"headerDefault",children:["Congrats on completing ",u,"!"]})]}),(0,a.tZ)(b.x,{variant:"subheadDefault",css:[w.l0.py(12)],children:"Share your progress"}),(0,a.BX)(y.Z,{css:[w.l0.position.relative,w.l0.borderRadius(8),w.l0.backgroundColor.backgroundHigher,w.l0.py(8),w.l0.px(12)],children:[(0,a.tZ)(y.Z,{css:w.l0.pr(16),children:p}),(0,a.tZ)(v.hU,{css:[w.l0.position.absolute,w.l0.top(8),w.l0.right(8)],alt:"Copy",size:18,tooltipHidden:!0,onClick:function(){o("Copied to clipboard!"),(0,oi.Z)(p),(0,Jr.l)({action:"copied_share_text",lessonSlug:n,courseSlug:t,origin:"lesson_complete_modal"})},children:(0,a.tZ)(ii.Z,{size:16})})]}),(0,a.BX)(y.Z,{css:[w.l0.rowWithGap(16),w.l0.justify.center,w.l0.pt(16),w.l0.align.center],children:[(0,a.tZ)(v.ZP,{outlined:!0,text:"Back to the learning hub",href:"/learn/".concat(t,"/hub")}),(0,a.tZ)(y.Z,{css:[w.l0.rowWithGap(8),w.l0.align.center],children:Z.map((function(e){var r=e.url,i=e.icon,o=e.base,l=e.cta,s=e.color;return(0,a.tZ)(m.ZP,{css:[{backgroundColor:s,color:"white"}],onClick:function(){window.open(r,"_blank"),(0,I.j)(I.U3.EXTERNAL_LINK_VIEWED,{url:o,placement:"lesson-complete-modal",campaign:t,lessonSlug:n})},text:l,iconLeft:(0,a.tZ)(i,{})},r)}))})]})]})},pi=function(e){var n=e.lesson,t=(0,mn.Z)().showError,r=(0,Qr.$0)().fireCircularBurstFrom,o=(0,l.useRef)(null),s=(0,Yr.T)(),c=(0,l.useState)(!1),u=c[0],d=c[1],p=(0,i.Z)(function(e){var n=(0,R.Z)({},X,e);return G.D(L,n)}({onError:function(){return t("Something went wrong")},onCompleted:function(e){var i,a;"UpdatedUserCourseLesson"!==(null===(i=e.completeUserCourseLesson)||void 0===i?void 0:i.__typename)?t((null===(a=e.completeUserCourseLesson)||void 0===a?void 0:a.message)||"Something went wrong"):e.completeUserCourseLesson.userCourseLesson.id===n.id?(o.current&&!s&&r({element:o.current}),d(!0)):t("Something went wrong")}}),2),f=p[0],h=p[1].loading;return(0,a.BX)(a.HY,{children:[null!==n.timeCompleted?(0,a.tZ)(v.zx,{ref:o,disabled:!0,text:"Lesson completed \ud83c\udf89",colorway:"primary"}):(0,a.tZ)(v.zx,{iconLeft:h?(0,a.tZ)(ve.Z,{}):void 0,onClick:function(){(0,Jr.l)({action:"completed",lessonSlug:n.lessonSlug,courseSlug:n.course.courseSlug}),f({variables:{input:{userLessonId:n.id}}})},text:h?"Verifying\u2026":"Mark lesson as complete",colorway:"primary",css:[h&&v.pt.backgroundPulse()]}),(0,a.tZ)(v.u_,{isOpen:u,onRequestClose:function(){return d(!1)},children:(0,a.tZ)(di,{lessonSlug:n.lessonSlug,courseSlug:n.course.courseSlug})})]})},fi=t(92162),hi=t(87514);function vi(e){var n=e.lesson,t=(0,fi.Un)(),r=(0,fi.$x)(),i=(0,cr.Q)("flagLayoutNavigator");return!t&&i?(0,a.tZ)(v.zx,{colorway:"primary",iconLeft:(0,a.tZ)(hi.Z,{}),text:"Show tutorial",onClick:function(){return r()}}):(0,a.tZ)(pi,{lesson:n})}var mi=t(41664),gi=t.n(mi),Zi=t(33773),yi=t(36316),bi=t(6465),wi=t(68480);function xi(){return(0,a.tZ)(v.G7,{children:(0,a.tZ)(v.G7,{"aria-label":"Always on","data-microtip-position":"bottom",role:"tooltip",css:[v.l0.width(8),v.l0.height(8),v.l0.borderRadius("full"),v.l0.backgroundColor.accentPositiveDefault,{alignSelf:"start",boxShadow:"0 0 12px "+v.TV.accentPositiveDefault}]})})}function ki(e){var n=e.repl,t=(0,i.Z)(l.useState(!1),2),r=t[0],o=t[1],s=(0,cr.Q)("flagLayoutNavigator");return(0,a.BX)(Y.Z,{isOpen:r,maxWidth:460,onClickOutside:function(){},padding:0,gap:8,placement:"bottom-start",growToMaxWidth:!0,zIndex:wi.Is-1,elevated:!1,children:[(0,a.BX)(v.G7,{tag:"button",dataCy:"ws-repl-info-container",onClick:function(){o(!0)},css:[v.l0.flex.growAndShrink(1),v.l0.align.center,v.l0.cursor.pointer,v.l0.rowWithGap(8),v.l0.p(4),v.l0.borderRadius(8),v.l0.color.foregroundDefault,r&&{pointerEvents:"none"},{border:"1px solid transparent",backgroundColor:"transparent","&:hover":{borderColor:v.TV.outlineDimmest}}],children:[(0,a.tZ)(yi.Z,{repl:n}),n.isAlwaysOn&&!s?(0,a.tZ)(xi,{}):null,s?null:(0,a.tZ)(v.G7,{css:[v.l0.p(4)],children:(0,a.tZ)(Zi.Z,{})})]}),(0,a.tZ)(v.Tg,{background:"default",css:[v.l0.borderRadius(8)],children:(0,a.tZ)(bi.Z,{setIsEditing:o})})]})}var Ci=t(18935),Ii=t(3462),Si=t(83117),Ri=t(92876),Pi=t(15794),Ti=t(2858),Ei=(0,Bt.F4)({"0%":{transform:"scale(0.95)",boxShadow:"0 0 0 0 rgba(235, 64, 52, 0.6)"},"50%":{transform:"scale(1)",boxShadow:"0 0 0 8px rgba(235, 64, 52, 0)"},"80%":{transform:"scale(0.95)",boxShadow:"0 0 0 0 rgba(235, 64, 52, 0)"},"100%":{transform:"scale(0.95)",boxShadow:"0 0 0 0 rgba(235, 64, 52, 0)"}}),Di=function(){var e=(0,r.Z)((function(e){var n,t;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:n="15c2ee6",r.label=1;case 1:return r.trys.push([1,3,,4]),[4,(0,Pi.LK)("/data/check_version")];case 2:return r.sent().version!==n&&e(),[3,4];case 3:return t=r.sent(),Ri.Tb(t),[3,4];case 4:return[2]}}))}));return function(n){return e.apply(this,arguments)}}(),Ui=function(){var e=(0,l.useState)(!1),n=e[0],t=e[1],i=(0,l.useState)(!1),s=i[0],c=i[1],u=(0,l.useContext)(Ti.Z);if((0,l.useEffect)((function(){var e=setInterval((function(){return Di((function(){(0,I.j)(I.U3.REFRESH_APP_USED,{action:"triggered"}),t(!0)}))}),1728e5);return function(){clearInterval(e)}}),[]),!n)return null;var d=function(){var e=(0,r.Z)((function(){return(0,o.__generator)(this,(function(e){switch(e.label){case 0:return c(!0),(0,I.j)(I.U3.REFRESH_APP_USED,{action:"refresh"}),(null===u||void 0===u?void 0:u.fs)?[4,u.fs.flush()]:[3,3];case 1:return e.sent(),[4,u.fs.persist({skipDebounce:!0})];case 2:e.sent(),e.label=3;case 3:return window.location.reload(),c(!1),[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,a.BX)(a.HY,{children:[(0,a.BX)(v.G7,{css:[v.l0.position.relative,v.l0.pl(12)],children:[(0,a.tZ)(v.u,{delay:500,tooltip:"You're using an old version of Replit. Refresh this page to get the latest features!",children:(0,a.tZ)(v.zx,{outlined:!0,iconLeft:(0,a.tZ)(Si.Z,{}),text:"Update Workspace",colorway:"grey",onClick:d})}),(0,a.tZ)(v.G7,{css:{position:"absolute",top:1,right:-1,background:"rgba(235, 64, 52, 1)",borderRadius:"50%",height:5,width:5,boxShadow:"0 0 0 0 rgba(235, 64, 52, 1)",transform:"scale(1)",animation:"".concat(Ei," 2s infinite"),zIndex:2}})]}),(0,a.tZ)(v.u_,{isOpen:s,onRequestClose:function(){c(!1)},children:(0,a.BX)(v.G7,{children:[(0,a.tZ)(v.xv,{variant:"subheadDefault",css:[v.l0.pb(8)],children:"Saving your work"}),(0,a.tZ)(v.xv,{children:"Making sure you'll find your work after reloading\u2026"})]})})]})},_i=t(85485),Bi=t(57996),Mi=t(14868),Gi=t(73092),Ai=t(197),Ni=t(27668),Xi=t(58889);function Oi(){var e=(0,P.Z)(["\n  fragment ReplEnvironmentNavMenuCurrentUser on CurrentUser {\n    id\n    ...LayoutSidebarCurrentUser\n  }\n  ","\n"]);return Oi=function(){return e},e}function Li(){var e=(0,P.Z)(["\n  query ReplEnvironmentNavMenu {\n    currentUser {\n      id\n      ...ReplEnvironmentNavMenuCurrentUser\n    }\n  }\n  ","\n"]);return Li=function(){return e},e}var ji={},zi=(0,T.Ps)(Oi(),Xi.d),Wi=(0,T.Ps)(Li(),zi);var Fi=t(3411),Hi=t(97838),Vi=t(26293),$i=t(11070),qi=t(34385),Ki=t(23081),Yi=t(59387),Qi=t(14317),Ji={button:(0,Bt.iv)([v.l0.py(4),v.l0.viewStyle,v.l0.reset.button,v.l0.rowWithGap(2),v.l0.align.center,v.l0.color.foregroundDefault,v.l0.cursor.pointer,{":hover svg":{fill:v.TV.foregroundDefault}}]),surface:(0,Bt.iv)([v.l0.borderRadius(8),v.l0.width(200),v.l0.maxHeight("80vh"),v.l0.maxWidth("80vw"),v.l0.overflowY("auto")]),ctas:(0,Bt.iv)([v.l0.colWithGap(8),v.l0.p(8),{borderBottom:"1px solid",borderColor:v.TV.outlineDimmer}]),items:(0,Bt.iv)([{"& > a:last-of-type":v.l0.borderRadius(0,0,8,8)}]),link:(0,Bt.iv)([v.l0.viewStyle,v.l0.rowWithGap(4),v.l0.color.foregroundDefault,v.l0.p(8),v.l0.align.center,v.gU.listItem]),linkText:(0,Bt.iv)(v.l0.flex.shrink(1))},eo=(0,Bt.iv)([v.l0.reset,v.l0.p(8),v.l0.width("100%"),v.l0.cursor.pointer,v.l0.justify.spaceBetween,v.l0.flex.row,v.l0.align.center,{borderTop:"1px solid ".concat(v.TV.outlineDimmer),backgroundColor:"transparent"}]);function no(){var e=(0,Ki.Fg)(),n=e.isDarkColorScheme,t=e.isSaving,r=e.setActiveTheme;return t?(0,a.BX)(v.G7,{tag:"button",disabled:!0,css:eo,children:[(0,a.tZ)(v.xv,{children:"Saving..."}),(0,a.tZ)(ve.Z,{size:16})]}):n?(0,a.BX)(v.G7,{tag:"button",onClick:function(){r("replitLight")},css:eo,children:[(0,a.tZ)(v.xv,{children:"Light Theme"}),(0,a.tZ)(Qi.Z,{size:16})]}):(0,a.BX)(v.G7,{tag:"button",onClick:function(){r("replitDark")},css:eo,children:[(0,a.tZ)(v.xv,{children:"Dark Theme"}),(0,a.tZ)(Yi.Z,{size:16})]})}function to(){var e=(0,qi.Z)(Wr.y.GlobalNavButton),n=function(e){var n=(0,R.Z)({},ji,e);return E.a(Wi,n)}().data,t=(0,Fi.N)({currentUser:(null===n||void 0===n?void 0:n.currentUser)||void 0}),r=(0,l.useState)(!1),i=r[0],o=r[1],s=(0,l.useState)(null),c=s[0],u=s[1];return(0,a.BX)(a.HY,{children:[(0,a.BX)(Y.Z,{isOpen:i,onClickOutside:function(){return o(!1)},gap:4,padding:0,placement:"bottom-start",children:[(0,a.BX)("button",{ref:e,onClick:function(){return o(!i)},css:Ji.button,children:[(0,a.tZ)(Bi.N2,{color:v.TV.foregroundDefault,size:20}),(0,a.tZ)(Fr.Z,{color:v.TV.foregroundDimmest,size:12})]}),(0,a.BX)(v.Tg,{elevated:!0,css:Ji.surface,children:[(0,a.BX)(v.G7,{css:Ji.ctas,children:[(0,a.tZ)(v.zx,{text:"Create",iconLeft:(0,a.tZ)(gn.Z,{}),colorway:"primary",onClick:function(){o(!1),u("create")}}),(0,a.tZ)(v.zx,{text:"Power Up",iconLeft:(0,a.tZ)(Hi.Z,{}),outlined:!0,onClick:function(){o(!1),u("upgrade")}})]}),(0,a.tZ)(v.G7,{css:Ji.items,children:t.map((function(e){return(0,a.tZ)(gi(),{passHref:!0,as:e.as,href:e.href,prefetch:!1,children:(0,a.BX)("a",{css:Ji.link,children:[e.icon,(0,a.tZ)(v.xv,{css:Ji.linkText,children:e.label}),e.tag||null]})},e.label)}))}),(0,a.tZ)(no,{})]})]}),(0,a.tZ)(Vi.Z,{isOpen:"upgrade"===c,onRequestClose:function(){return u(null)},context:"workspace_menu_nav"}),(0,a.tZ)(v.u_,{isOpen:"create"===c,onRequestClose:function(){return u(null)},children:(0,a.tZ)($i.Z,{})})]})}var ro=t(30052),io=v.KD.a;function oo(){var e=(0,Mi.Iv)(),n=(0,Mi.W8)(),t=(0,qi.Z)(Wr.y.SidebarButton),r=(n?"Close":"Open")+" sidebar";return(0,a.tZ)(v.u,{tooltip:r,placement:"right",children:(0,a.tZ)(v.G7,{tag:"button",alt:r,innerRef:t,css:[v.l0.reset.button,v.l0.height(16),v.l0.width(16),v.l0.center,v.l0.cursor.pointer,{opacity:.75,transition:"opacity 0.1s","&:hover":{opacity:1}}],onClick:function(){return e()},children:(0,a.BX)(v.G7,{css:[v.l0.flex.row,v.l0.align.center,{height:14,width:16,border:"1px solid ".concat(v.TV.foregroundDefault),borderRadius:v.TV.borderRadius2}],children:[(0,a.tZ)(v.G7,{css:{height:"100%",width:n?"40%":"20%",backgroundColor:n?v.TV.foregroundDefault:"transparent",borderRight:"1px solid ".concat(v.TV.foregroundDefault),transition:"0.1s ease-out width, 0.1s background-color"}}),(0,a.tZ)(v.G7,{})]})})})}function ao(){return(0,a.tZ)(Bt.xB,{styles:[{".toggle":{display:"none"}}]})}function lo(e){var n=e.repl,t=e.currentUser;return(0,cr.Q)("flagLayoutNavigator")?(0,a.BX)(v.G7,{css:[v.l0.rowWithGap(8),v.l0.align.center,v.l0.justify.start,v.l0.width("calc(50% - ".concat((ee.al.small+8)/2,"px)")),(0,it.Z)({},(0,_i.et)("tabletMax"),[v.l0.width("calc(50% - ".concat((ee.al.large+8)/2,"px)"))])],children:[(0,a.tZ)(oo,{}),(0,a.tZ)(ao,{}),(0,a.tZ)(to,{}),(0,a.tZ)(v.G7,{css:[v.l0.flex.shrink(1),v.l0.maxWidth(530),v.l0.align.center,{"& > span":[v.l0.viewStyle,v.l0.flex.shrink(1)]}],children:(0,a.tZ)(ki,{repl:n})}),(0,a.tZ)(uo,{}),(null===t||void 0===t?void 0:t.isFirewallMode)?(0,a.tZ)(Ii.Z,{isWorkspace:!0}):null,(0,a.tZ)(Ui,{})]}):(0,a.BX)(v.G7,{css:[v.l0.flex.row,v.l0.align.center,v.l0.width("calc(50% - ".concat((wi.XD+ee.al.small+8)/2,"px)")),(0,it.Z)({},(0,_i.et)("tabletMax"),[v.l0.width("calc(50% - ".concat((wi.XD+ee.al.large+8)/2,"px)"))])],children:[(0,a.tZ)(gi(),{as:"/~",href:"/home",passHref:!0,children:(0,a.tZ)(io,{css:[v.l0.center,v.l0.width(32),v.l0.height(32)],children:(0,a.tZ)(Bi.N2,{})})}),(null===t||void 0===t?void 0:t.isFirewallMode)?(0,a.tZ)(Ii.Z,{isWorkspace:!0}):null,(0,a.BX)(v.G7,{css:[v.l0.flex.growAndShrink(1),v.l0.maxWidth(530),v.l0.rowWithGap(4),v.l0.align.center,{"& > span":[v.l0.viewStyle,v.l0.flex.shrink(1)]}],children:[(0,a.tZ)(ki,{repl:n}),(0,a.tZ)(Ci.Z,{}),(0,a.tZ)(Ui,{})]})]})}var so=(0,Bt.F4)("0%,100%{opacity:1;}50%{opacity:0.25;}"),co={root:(0,Bt.iv)([v.l0.height(20),v.l0.width(20),v.l0.center]),pulse:(0,Bt.iv)({animation:"".concat(so," 2s infinite")})};function uo(){var e=(0,Gi.Z)(),n=e.isSaving;return e.isOffline?(0,a.tZ)(v.u,{tooltip:"Reconnecting, changes will be synced when you\u2019re online",placement:"right",children:(0,a.tZ)(v.G7,{css:co.root,children:(0,a.tZ)(Ai.Z,{size:16,color:v.TV.redDefault})})}):n?(0,a.tZ)(v.u,{tooltip:"Saving",placement:"right",children:(0,a.tZ)(v.G7,{css:[co.root,co.pulse],children:(0,a.tZ)(Ni.Z,{size:16,color:v.TV.foregroundDimmest})})}):(0,a.tZ)(v.u,{tooltip:"Saved",placement:"right",children:(0,a.tZ)(v.G7,{css:co.root,children:(0,a.tZ)(ro.Z,{size:16,color:v.TV.foregroundDimmest})})})}var po=t(61193),fo=t(82447),ho=function(e){return function(){(0,I.j)(I.U3.SIDEBAR_LAYOUT_NAV_CLICK,{target:e})}},vo={button:(0,Bt.iv)([v.l0.py(4),v.l0.viewStyle,v.l0.reset.button,v.l0.rowWithGap(2),v.l0.align.center,v.l0.color.foregroundDefault,v.l0.cursor.pointer,{":hover svg":{fill:v.TV.foregroundDefault}}]),surface:(0,Bt.iv)([v.l0.borderRadius(8),v.l0.minWidth(80),{"& > a:first-of-type":v.l0.borderRadius(8,8,0,0)},{"& > a:last-of-type":v.l0.borderRadius(0,0,8,8)}]),link:(0,Bt.iv)([v.l0.viewStyle,v.l0.color.foregroundDefault,v.l0.p(8),v.gU.listItem])};function mo(){var e=(0,qi.Z)(Wr.y.AvatarButton),n=function(e){var n=(0,R.Z)({},_,e);return E.a(M,n)}().data,t=(0,l.useState)(!1),r=t[0],i=t[1],o=null===n||void 0===n?void 0:n.currentUser,s=o?(0,fo.Ru)(o):null,c=s?[{label:"Profile",trackingLabel:"Profile",as:s.as,href:s.href},{label:"Account",trackingLabel:"Account",dataCy:"avatar-dropdown-account-link",as:"/account",href:"/account"},{trackingLabel:"CLUI",label:"CLUI",as:"/~/cli",href:"/~/cli"},{trackingLabel:"Log out",label:"Log out",href:"/logout"}]:[];return(0,a.BX)(Y.Z,{isOpen:r,onClickOutside:function(){return i(!1)},gap:4,padding:0,placement:"bottom-start",children:[(0,a.BX)("button",{ref:e,onClick:function(){i(!r)},css:vo.button,children:[(0,a.tZ)(v.qE,{size:24,src:(null===o||void 0===o?void 0:o.image)||null,username:(null===o||void 0===o?void 0:o.username)||""}),(0,a.tZ)(Fr.Z,{color:v.TV.foregroundDimmest,size:12})]}),(0,a.tZ)(v.Tg,{elevated:!0,css:vo.surface,children:c.map((function(e){return(0,a.tZ)(gi(),{passHref:!0,as:e.as,href:e.href,prefetch:!1,children:(0,a.tZ)("a",{onClick:function(){ho(e.trackingLabel)},onKeyDown:function(){ho(e.trackingLabel)},css:vo.link,children:e.label})},e.label)}))})]})}var go=t(97776),Zo=t(87653),yo=t(98099),bo=function(e){var n=(0,yo.Z)(e,{onReceiveAnnotationUpdate:function(){}}).generalThread;return(0,l.useMemo)((function(){return n?n.messages.filter((function(e){return!1===e.seen})).length:0}),[n])},wo=t(75026),xo={container:(0,Bt.iv)([v.l0.position.relative])};var ko=function(){var e=(0,ke.Z)(),n=bo(e),t=(0,s.b9)(vr.rl);return(0,a.BX)(v.G7,{css:xo.container,children:[n>0?(0,a.tZ)(zt,{}):null,(0,a.tZ)(v.zx,{text:"Chat",iconLeft:(0,a.tZ)(wo.Z,{}),onClick:function(){t()}})]})},Co=[S.Sy.Submit,S.Sy.Resubmit,S.Sy.UpdateModelSolution,S.Sy.PublishTemplate,S.Sy.EditTemplate,S.Sy.ReviewSubmission],Io={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!0,key:"M"},So={root:(0,Bt.iv)([v.l0.height(60),v.l0.width("100%"),v.l0.top(0),v.l0.left(0),v.l0.flex.row,v.l0.align.center,v.l0.justify.spaceBetween,v.l0.py(8),v.l0.px(12),v.l0.position.absolute]),center:(0,Bt.iv)([v.l0.position.absolute,v.l0.height(42),v.l0.justify.center,{transform:"translate(-50%, -50%)",left:"50%",top:"50%"}]),configButton:(0,Bt.iv)([v.l0.position.absolute,v.l0.right(-29),v.l0.top(8)]),right:(0,Bt.iv)([v.l0.rowWithGap(8),v.l0.align.center,v.l0.justify.end])};function Ro(e){var n,t,r,o,u=(0,c.useRouter)(),d=(0,Q.Z)(),p=d.runner,f=d.presence,h=(0,ke.Z)(),m=(0,J.Z)({presence:f}),g=(0,i.Z)(l.useState(!1),2),Z=g[0],y=g[1],b=(0,jr.e)(Wr.y.Run),w=(0,jr.e)(Wr.y.Share),x=(0,qi.Z)(Wr.y.NotificationsButton),k=(0,i.Z)(l.useState(!1),2),C=k[0],S=k[1],P=function(e){var n=(0,R.Z)({},H,e);return E.a(q,n)}({variables:{id:h}}).data,T=(0,s.b9)(nt),D=Ce(),U=(0,s.b9)(Tt),_=(0,po.c)("flag-run-button-editor"),B=_.enabled,M=_.loading,G=(0,po.c)("flag-workspace-header-chat-entry"),A=G.enabled,N=G.loading,X="Repl"===(null===P||void 0===P?void 0:P.repl.__typename)?P.repl:null,O=A&&!N&&(null===X||void 0===X?void 0:X.multiplayers)&&X.multiplayers.length>0,L=(0,l.useRef)(null),j=(0,l.useRef)(null),z=(0,l.useRef)(Z&&(null===w||void 0===w?void 0:w.isActive)),W=(0,cr.Q)("flagLayoutNavigator");(0,l.useEffect)((function(){z.current&&!(null===w||void 0===w?void 0:w.isActive)&&y(!1),z.current=Z&&(null===w||void 0===w?void 0:w.isActive)}),[w,Z]),(0,l.useEffect)((function(){(null===w||void 0===w?void 0:w.isActive)&&(Z&&j.current?null===w||void 0===w||w.delegateTooltip(j.current):w.delegateTooltip(L.current))}),[w,Z,j]);var F="Team"===(null===X||void 0===X||null===(n=X.owner)||void 0===n?void 0:n.__typename),V=Boolean("Team"===(null===X||void 0===X||null===(t=X.owner)||void 0===t?void 0:t.__typename)&&(null===(r=null===X||void 0===X?void 0:X.owner.capabilities)||void 0===r?void 0:r.isEducationPlan)),$=Co.find((function(e){return e===(null===X||void 0===X?void 0:X.workspaceCta)})),ne=!V&&(null===X||void 0===X?void 0:X.currentUserPermissions.editMultiplayers);return(0,zr.x)(Io,{enabled:!V,run:function(){y(!0)}}),Ar({match:Lr.pl,data:{type:"action",label:"Multiplayer",icon:(0,a.tZ)(Or.Z,{}),description:"Open multiplayer mode",run:function(){y(!0)},keyboardShortcut:Io}},{enabled:!V}),(0,a.BX)(v.Tg,{elevated:!W,tag:"header",css:So.root,style:W?void 0:{paddingLeft:40},children:[(0,a.tZ)(lo,{repl:e.repl,currentUser:e.currentUser}),(0,a.tZ)(v.G7,{innerRef:null===b||void 0===b?void 0:b.delegateTooltip,dataCy:"ws-run-btn",onClick:function(){(null===b||void 0===b?void 0:b.isActive)&&b.next()},css:So.center,children:!M&&B?(0,a.BX)(a.HY,{children:[(0,a.BX)(Y.Z,{onClickOutside:function(){return S(!1)},isOpen:C,padding:8,children:[(0,a.tZ)(ee.ZP,{runner:p,disableTooltip:null===b||void 0===b?void 0:b.isActive}),(0,a.tZ)(Kr,{hideModal:function(){return S(!1)}})]}),(0,a.tZ)(v.G7,{css:So.configButton,children:(0,a.tZ)(v.hU,{alt:"Configure Repl run",size:28,onClick:function(){S((function(e){return!e}))},css:[v.l0.color.foregroundDimmest],children:(0,a.tZ)(Fr.Z,{})})})]}):(0,a.tZ)(ee.ZP,{runner:p,disableTooltip:null===b||void 0===b?void 0:b.isActive})}),(0,a.BX)(v.G7,{css:So.right,children:[(null===X||void 0===X?void 0:X.lesson)?(0,a.tZ)(vi,{lesson:X.lesson}):null,O?(0,a.tZ)(ko,{}):null,(0,a.tZ)(De,{users:m,onAvatarClick:D}),$?(0,a.tZ)(Ct,{cta:$,replId:h,isGroupProject:Boolean(null===X||void 0===X||null===(o=X.template)||void 0===o?void 0:o.isGroupProject),openIOtesterPane:function(){T({pane:{type:"autograder"}})}}):null,ne?(0,a.tZ)(v.G7,{innerRef:L,children:(0,a.tZ)(On,{showPopover:X.currentUserPermissions.inviteGuests,children:(0,a.tZ)(v.zx,{onClick:function(){(0,I.j)(I.U3.INVITE_MODAL_OPENED,{language:X.lang.id,replId:X.id,source:"replEnvironment"}),y(!0)},iconLeft:(0,a.tZ)(K.Z,{}),text:"Invite"})})}):null,(0,a.tZ)(v.hU,{size:24,onClick:function(){U()},tooltipDelay:500,alt:"Search & run commands",tooltipPlacement:"bottom-end",children:(0,a.tZ)(Zo.Z,{})}),W?(0,a.BX)(a.HY,{children:[(0,a.tZ)(v.G7,{innerRef:x,children:(0,a.tZ)(go.Z,{sidebarIsOpen:!0,pathname:u.pathname,showCount:!1})}),(0,a.tZ)(mo,{})]}):null]}),(0,a.tZ)(Ue.Z,{isOpen:Z,onRequestClose:function(){return y(!1)},children:(0,a.tZ)(v.G7,{innerRef:j,children:F?(0,a.tZ)(An,{replId:h}):(0,a.tZ)(zn,{replId:h})})})]})}var Po=(0,l.memo)(Ro),To=t(65908),Eo=t(33480),Do=t(14994),Uo=t(53800),_o=t(91550),Bo=t(91296),Mo=t.n(Bo),Go=t(11533),Ao=t(63736);function No(e){var n=e.path,t=e.line;return(0,a.BX)(v.G7,{css:[v.l0.colWithGap(4),v.l0.align.start,v.l0.flex.growAndShrink(1),v.l0.py(4)],children:[(0,a.BX)(v.Tg,{elevated:!0,css:[v.l0.rowWithGap(4),v.l0.borderRadius(8),v.l0.p(2)],children:[(0,a.tZ)(Ao.Z,{path:n,size:12}),(0,a.BX)(v.xv,{variant:"small",children:[n,":",t.lineNumber]})]}),(0,a.tZ)(wn.xK,{source:t.content,matches:t.matches})]})}function Xo(){return(0,a.BX)(v.G7,{css:[v.l0.rowWithGap(8)],children:[(0,a.tZ)(sr.Z,{}),(0,a.tZ)(v.xv,{color:"dimmest",children:"Something went wrong searching your Repl's contents. Please try again."})]})}function Oo(){return(0,a.BX)(v.G7,{css:[v.l0.rowWithGap(8)],children:[(0,a.tZ)(sr.Z,{}),(0,a.tZ)(v.xv,{color:"dimmest",children:"Displaying only part of the results, try being more specific with your search."})]})}function Lo(){return(0,a.tZ)(v.G7,{children:(0,a.tZ)(v.xv,{color:"dimmest",children:"Nothing came up searching your Repl's content."})})}var jo={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!0,key:"F"};function zo(e){var n,t=Mo()((function(e,n,t){(0,Go.yC)(e).then(n).catch(t)}),200);return(0,Lr.fA)({type:"context",description:"Search through your files",label:"Search",icon:(0,a.tZ)(Zo.Z,{}),keyboardShortcut:jo},{match:(0,Lr.zf)({defaultScore:2}),commands:function(){var l=(0,r.Z)((function(r){var l,s,c,u,d,p,f,h,m,g,Z,y;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return r.search?!r.active&&e.activeOnly?[2,[]]:(l=Math.random(),n=l,[4,new Promise((function(n,i){t({query:r.search,container:e.container},n,i)}))]):[2,[]];case 1:if(s=o.sent(),c=s.results,u=s.error,d=s.isPartialResult,l!==n)return[2,[]];if(null!==u)return r.active?[2,[{data:{type:"error",label:"error",icon:(0,a.tZ)(sr.Z,{})},match:function(){return{score:1,render:{content:(0,a.tZ)(Xo,{})}}}}]]:[2,[]];p=[],f=!0,h=!1,m=void 0;try{for(g=function(){var e=(0,i.Z)(y.value,2),n=e[0];e[1].forEach((function(e){var t=e.matches[0].column;p.push((0,Lr.fA)({type:"openFile",label:n,icon:(0,a.tZ)(Ao.Z,{path:n}),deeplink:{path:n,line:e.lineNumber,col:t}},{match:function(){var i=xn.Z.match(r.search,e.content);return{score:(null===i||void 0===i?void 0:i.score)||1,render:{content:(0,a.tZ)(No,{path:n,line:e})},key:[n,e.lineNumber,t].join(":")}}}))}))},Z=Object.entries(c)[Symbol.iterator]();!(f=(y=Z.next()).done);f=!0)g()}catch(b){h=!0,m=b}finally{try{f||null==Z.return||Z.return()}finally{if(h)throw m}}if(0===p.length&&r.active)return[2,[{data:{type:"output",label:"",icon:(0,a.tZ)(v.G7,{})},match:function(){return{score:1,render:{content:(0,a.tZ)(Lo,{})}}}}]];if(r.active){if(0===p.length)return[2,[{data:{type:"output",label:"",icon:(0,a.tZ)(v.G7,{})},match:function(){return{score:1,render:{content:(0,a.tZ)(Lo,{})}}}}]];d&&p.push({data:{type:"error",label:"error",icon:(0,a.tZ)(sr.Z,{})},match:function(){return{score:1/0,render:{content:(0,a.tZ)(Oo,{})}}}})}return[2,p]}}))}));return function(e){return l.apply(this,arguments)}}()})}var Wo=t(42456),Fo=t(57353),Ho=t(18374),Vo=t(63035),$o=t(20590),qo=t(65e3),Ko=t(40705),Yo=t(23445),Qo=t(69128),Jo=t(54519),ea=["education","tutorial","instructions","docs","chat","threadInbox","packager","git","debugger","shell","runnerOutput","envEditor","webview","vnc","database","replAuth","markdown","autograder","unitTests","preferences","adminPanel"];function na(){var e=(0,Yo.XP)(),n=e.repl,t=e.currentUser,r=Boolean(null===n||void 0===n?void 0:n.config.isServer),o=Boolean(null===n||void 0===n?void 0:n.config.isVnc),a=Boolean(null===t||void 0===t?void 0:t.isAdmin),l=Boolean(null===n||void 0===n?void 0:n.lang.supportsGit),c=(0,$o.Ln)(),u=(0,qo.Z)().isTutorial,d=Boolean(n&&!(null===n||void 0===n?void 0:n.lang.key.startsWith("html"))),p=(0,Ko.x)(),f=Boolean(null===p||void 0===p?void 0:p.packageSearch),h=(0,Yo.x5)()||Boolean(null===n||void 0===n?void 0:n.lang.hasDAP),v=Boolean(n&&!(null===n||void 0===n?void 0:n.lang.key.startsWith("html"))),m=Boolean((null===n||void 0===n?void 0:n.isProject)||(null===n||void 0===n?void 0:n.isProjectFork)),g=(0,Qo.Z)().language,Z=!m&&null!==g,y=(0,Jo.$)(),b=(0,po.c)("flag-repl-auth-sidebar"),w=b.enabled,x=(b.loading,Boolean(w&&p));return(0,Nt.Z)((function(){return(0,s.cn)((function(e){var n=e(Vo.gM),t=[],s=[[{type:"shell"},!0],[{type:"instructions"},c],[{type:"markdown",data:{path:""}},!0],[{type:"threadInbox"},!0],[{type:"chat"},!0],[{type:"docs"},!0],[{type:"webview"},r],[{type:"vnc"},o],[{type:"runnerOutput"},!n]];e(cr.H).flagLayoutNavigator&&s.push([{type:"git"},l],[{type:"packager"},f],[{type:"envEditor"},d],[{type:"debugger"},h],[{type:"tutorial"},u],[{type:"database"},v],[{type:"replAuth"},x],[{type:"autograder"},m],[{type:"unitTests"},Z],[{type:"education"},Boolean(y)],[{type:"preferences"},!0],[{type:"adminPanel"},a]);var p=!0,g=!1,b=void 0;try{for(var w,k=s[Symbol.iterator]();!(p=(w=k.next()).done);p=!0){var C=(0,i.Z)(w.value,2),I=C[0];C[1]&&t.push(I)}}catch(S){g=!0,b=S}finally{try{p||null==k.return||k.return()}finally{if(g)throw b}}return function(e){return e.sort((function(e,n){return ea.indexOf(e.type)-ea.indexOf(n.type)}))}(t)}))}),[r,a,o,c,l,f,d,h,y,Z,m,x,v,u])}function ta(){return(0,s.Dv)(na())}var ra=function(e,n,t){return{match:t||Lr.pl,data:{type:"openPane",pane:e,label:n.getTitle(e),icon:n.Icon({pane:e})}}};function ia(){var e=(0,Uo.Se)();return(0,Nt.Z)((function(){return(0,s.cn)((function(n){var t=n($n.EP);return{data:{type:"context",label:"Recent",icon:(0,a.tZ)(Do.Z,{})},commands:function(n){var r=n.search;return t.map((function(n){var t=(0,mr.Dp)({path:n});return ra({type:t,data:{path:n}},e,(function(e){return r?(0,Lr.pl)(e):{score:10}}))}))}}}))}),[e])}function oa(){var e=(0,Uo.Se)(),n=ta();return(0,Nt.Z)((function(){return(0,s.cn)((function(t){var r=t(qn.Eh).map((function(e){return t(e.data).type})),i=[],o=!0,a=!1,l=void 0;try{for(var s,c=n[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value;(0,mr.b)(u.type)&&r.includes(u.type)||i.push(ra(u,e))}}catch(d){a=!0,l=d}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return i}))}),[n,e])}var aa={type:"context",icon:(0,a.tZ)(It.Z,{}),label:"",description:"Search for tools and files"};function la(e){var n=e.paneId,t=(0,Q.Z)(),r=t.fs,i=t.container,o=oa(),l=ia(),c=(0,Wo.A)(),u=(0,Fo.T)(),d=function(e){var n=e.paneId,t=(0,Yn.D)();return(0,Nt.Z)((function(){return function(e){var r=e.path,i={type:(0,mr.Dp)({path:r}),data:{path:r}};t({paneId:n,data:i,makeActive:!0})}}),[n,t])}({paneId:n}),p=(0,Nt.Z)((function(){return(0,s.cn)((function(e){var n=e(o),t=e(l),s={data:{type:"context",label:"Tools",icon:(0,a.tZ)(Ho.Z,{})},commands:function(){return[(0,_o.i)({openFile:d,fs:r,shouldHideFile:u,getRecentFiles:c}),zo({container:i})].concat((0,_e.Z)(n))}};return{data:aa,commands:function(){return[t,s]}}}))}),[i,r,c,o,u,l,d]);return(0,s.Dv)(p)}var sa=v.KD.div,ca=v.KD.input;function ua(e){var n=la({paneId:e.paneId}),t=(0,Gt.Z)({onSelect:e.onSelect,initialCommand:n,insertSectionHeaders:!0}),r=t.combobox,i=t.inputRef;return(0,l.useEffect)((function(){var n;e.autoFocus&&(e.isHidden||null===(n=i.current)||void 0===n||n.focus())}),[e.autoFocus,e.isHidden,i]),(0,a.BX)(v.G7,{css:[v.l0.flex.growAndShrink(1)],children:[(0,a.tZ)(sa,(0,ce.Z)((0,R.Z)({},r.getComboboxProps()),{children:(0,a.BX)(v.Tg,{css:[v.l0.rowWithGap(4),v.l0.align.center,t.path.length>1&&v.l0.pl(8),{borderBottom:"1px solid ",borderColor:v.TV.backgroundHigher,":focus-within":{borderColor:v.TV.backgroundHighest}}],children:[t.path.map((function(e,n){var r=e.data;if(n<=1)return null;var i=r.label,o=r.icon,l=i+n;return(0,a.tZ)($t,{label:i,icon:o,onClick:function(){return t.resetToIndex({index:n,focus:!0})}},l)})),(0,a.tZ)(ca,(0,R.Z)({css:[ir,v.l0.px(8),t.path.length>1&&{paddingLeft:4}]},t.combobox.getInputProps({value:t.inputValue,ref:t.inputRef,onChange:function(e){return t.setInputValue(e.currentTarget.value)},onKeyDown:function(e){"ArrowLeft"!==e.key&&"ArrowRight"!==e.key?"Backspace"!==e.key||e.currentTarget.value?"Escape"===e.key&&e.currentTarget.blur():t.resetToIndex({index:0}):t.handleLeftRightArrow(e.key)},placeholder:t.placeholder})))]})})),(0,a.tZ)(pa,{items:t.itemsWithSections||[],getMenuProps:r.getMenuProps,getItemProps:r.getItemProps,highlightedIndex:r.highlightedIndex,isLoading:t.isLoading})]})}function da(e){return(0,a.tZ)(sa,(0,ce.Z)((0,R.Z)({},e.getMenuProps()),{css:[v.l0.flex.growAndShrink(1),v.l0.overflow("auto")],children:e.isLoading||e.items.length?e.items.map((function(n){if(n.isSection){var t=n.name;return(0,a.tZ)(v.xv,{variant:"small",color:"dimmest",css:[v.l0.px(8),v.l0.py(4),{marginTop:8}],children:t},t)}var r=n.item,i=n.index,o=r.data,l=o.label,s=o.icon,c=r.match.render,u=i===e.highlightedIndex,d="openPane"===o.type?o.pane:void 0,p=c&&"content"in c?c.content:void 0,f=c&&"ranges"in c?c.ranges:void 0;return(0,a.tZ)(sa,(0,ce.Z)((0,R.Z)({css:[{cursor:"pointer"}]},e.getItemProps({item:r,index:i})),{children:p?(0,a.tZ)(Qt,{active:u,content:p}):(0,a.tZ)(Qt,{pane:d,active:u,item:{icon:s,label:l,active:u,highlightRanges:f}})}),(0,Gt.k)(r))})):null}))}var pa=(0,l.memo)(da),fa={Content:function(e){var n=e.options,t=n.openPane,r=n.isHidden,i=n.paneId,o=e.pane.data.autoFocus;return(0,a.tZ)(ua,{paneId:i,autoFocus:o,isHidden:r,onSelect:function(e){if("openFile"!==e.data.type)"openPane"!==e.data.type?"action"!==e.data.type||e.data.run():t(e.data.pane);else{var n=e.data.deeplink.path,r={type:(0,mr.Dp)({path:n}),data:{path:n}};t(r)}}})},Icon:function(){return null},getTitle:function(){return"New tab"}},ha=t(82947),va=t(34467),ma=t(96769),ga=t(20787),Za=t(76832),ya=t(47886),ba=t(56483),wa={Content:function(e){var n=e.options,t=n.paneId,r=n.isHidden,i=(0,Q.Z)(),o=i.container,l=i.fs,c=i.session,u=i.runner,d=(0,s.b9)(vr.Oe),p=(0,s.Dv)(Za.f),f=(0,Za.Z)();return(0,ya.Z)({container:o,runner:u,refreshWebView:f}),(0,ba.Z)({runner:u,refreshWebView:f}),(0,zr.x)(ha.b,{run:function(){d(t),f()}}),Ar({match:Lr.pl,data:{type:"action",label:"Refresh",icon:(0,a.tZ)(ga.Z,{}),description:"Refresh webview",keyboardShortcut:ha.b,run:function(){d(t),f()}}}),(0,a.tZ)(ma.Z,{fs:l,session:c,ref:p,isVisible:!r})},Icon:function(e){var n=e.size;return(0,a.tZ)(va.Z,{size:n})},getTitle:function(){return"Webview"}};function xa(){var e=(0,Eo.U)();return(0,ce.Z)((0,R.Z)({},e),{webview:wa,commands:fa})}var ka=t(25108);var Ca=t(15682),Ia=t(24888),Sa=t(19945),Ra=t(66477);function Pa(){var e=(0,P.Z)(["\n  query ReplEnvironmentHelp {\n    currentUser {\n      id\n      ...HelpCurrentUser\n    }\n  }\n  ","\n"]);return Pa=function(){return e},e}var Ta={},Ea=(0,T.Ps)(Pa(),Ra.HH);var Da=t(42844),Ua=t(75301),_a=t(29780);function Ba(e){var n=e.item,t=e.isActive,r=e.onClick,o=(0,i.Z)(l.useState(!0),2),s=o[0],c=o[1],u=l.useRef(null),d=(0,i.Z)((0,Ca.XZ)(u,!1),4),p=d[0],f=d[1],h=d[2],m=d[3];(0,Ca.Ym)(f,u);var g=(0,a.tZ)(v.hU,{innerRef:u,role:"tab",tabIndex:p,tooltipPlacement:"right","aria-selected":t,size:40,alt:n.tooltip,css:[t?[v.l0.backgroundColor.accentPrimaryDimmest,v.l0.color.accentPrimaryStrongest]:v.l0.color.foregroundDimmest,{"&:hover":t?[v.l0.backgroundColor.accentPrimaryDimmest,v.l0.color.accentPrimaryStrongest]:v.l0.color.accentPrimaryStrongest}],onKeyDown:h,onClick:function(e){m(),c(!1),r(e)},children:n.icon},n.type);return n.IconWrapper?(0,a.tZ)(n.IconWrapper,{isVisible:s,onDismiss:function(){return c(!1)},children:g}):g}var Ma={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!1,key:","},Ga={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!0,key:"G"};function Aa(){var e=(0,Yo.ZP)(),n=e.items,t=e.activeItem,r=(0,_a.vL)(),i=(0,_a.Iv)(),o=function(e){var n=(0,R.Z)({},Ta,e);return E.a(Ea,n)}().data,l=null===o||void 0===o?void 0:o.currentUser;(0,zr.x)(Ma,{run:function(){r({type:"preferences"})}}),Ar({match:Lr.pl,data:{type:"action",icon:(0,a.tZ)(Da.Z,{}),label:"Settings",description:"Manage editor settings",keyboardShortcut:Ma,run:function(){r({type:"preferences"})}}});var s=n.some((function(e){return"git"===e.type}));return(0,zr.x)(Ga,{run:function(){r({type:"git"})},enabled:s}),Ar({match:Lr.pl,data:{icon:(0,a.tZ)(Ua.Z,{}),label:"Version control",description:"Open version control sidebar",type:"action",keyboardShortcut:Ga,run:function(){r({type:"git"})}}},{enabled:s}),(0,a.BX)(v.Tg,{elevated:!0,css:[v.l0.borderRadius(8,0,0,8),v.l0.colWithGap(4),v.l0.flex.growAndShrink(1),v.l0.justify.spaceBetween,v.l0.align.center,v.l0.pb(8),v.l0.position.relative,{borderRight:"1px solid "+v.TV.backgroundHigher}],children:[(0,a.tZ)(Ca.uP,{options:{direction:"vertical"},children:(0,a.BX)(v.G7,{css:[v.l0.p(4),v.l0.overflowY("auto"),v.l0.flex.growAndShrink(1),v.l0.colWithGap(4),v.l0.align.start],role:"tablist","aria-orientation":"vertical","aria-label":"Dock",children:[n.map((function(e){var n=e.type===t;return(0,a.tZ)(v.G7,{children:(0,a.tZ)(Ba,{item:e,isActive:n,onClick:function(){return i({type:e.type})}})},e.type)})),0===n.length?(0,a.tZ)(v.hU,{"aria-disabled":!0,alt:"",size:40,css:{opacity:0},children:(0,a.tZ)(Ia.Z,{})}):null]})}),l?(0,a.tZ)(Sa.Z,{}):null,(0,a.tZ)(Na,{direction:"top"}),(0,a.tZ)(Na,{direction:"bottom"})]})}function Na(e){return(0,a.tZ)(v.Tg,{css:[v.l0.position.absolute,v.l0.right(-5),v.l0.width(4),v.l0.height(4),"top"===e.direction?v.l0.top(0):v.l0.bottom(0),{pointerEvents:"none"}]})}var Xa=(0,l.memo)(Aa),Oa=t(60523),La=t(35621);function ja(e){var n=e.children,t=l.useRef({fileMap:new Map});return(0,a.tZ)(Oa.Z.Provider,{value:t,children:n})}function za(e){var n=e.ui,t=e.services,r=e.replId,i=e.replLanguage,o=e.children,l=(0,Nt.Z)((function(){return{id:r,language:i}}),[r,i]);return(0,a.tZ)(Uo.kz,{value:n,children:(0,a.tZ)(ja,{children:(0,a.tZ)(Ti.Z.Provider,{value:t,children:(0,a.tZ)(La.Z.Provider,{value:l,children:o})})})})}var Wa=t(51438),Fa=t(28668),Ha=t(25171),Va=t(88662),$a=t(93160),qa=t(13482),Ka=y.K.div,Ya=(0,Bt.iv)([v.l0.width("100%"),v.l0.position.absolute,v.l0.left(0),{cursor:"ns-resize",zIndex:1,":hover":{transform:"scaleY(4)"}}]),Qa=(0,Bt.iv)([v.l0.height("100%"),v.l0.position.absolute,v.l0.top(0),{cursor:"ew-resize",zIndex:1,":hover":{transform:"scaleX(4)"}}]),Ja=(0,Bt.iv)([v.l0.position.absolute,{zIndex:2,transform:"scale(2)",":hover":{transform:"scale(4)"}}]);function el(e){var n="topLeft"===e||"topRight"===e?"bottom":"top";return{transformOrigin:"".concat("topLeft"===e||"bottomLeft"===e?"right":"left"," ").concat(n)}}var nl={topLeft:(0,Bt.iv)([v.l0.top(0),v.l0.left(0),el("topLeft")]),topRight:(0,Bt.iv)([v.l0.top(0),v.l0.right(0),el("topRight")]),bottomLeft:(0,Bt.iv)([v.l0.bottom(0),v.l0.left(0),el("bottomLeft")]),bottomRight:(0,Bt.iv)([v.l0.bottom(0),v.l0.right(0),el("bottomRight")])};function tl(e){var n=e.edge,t=e.size,r=e.onPointerDown;if("top"===n||"bottom"===n)return(0,a.tZ)(Ka,{onPointerDown:r,style:(0,it.Z)({height:t},n,-t),css:Ya});if("right"===n||"left"===n)return(0,a.tZ)(Ka,{onPointerDown:r,style:(0,it.Z)({width:t},n,-t),css:Qa});var i="topLeft"===n||"bottomRight"===n?"nwse-resize":"nesw-resize";return(0,a.tZ)(Ka,{onPointerDown:r,style:{height:t,width:t,cursor:i},css:[Ja,nl[n]]})}var rl=["bottom","right","left","bottomRight","bottomLeft"],il=(0,Bt.iv)([w.l0.coverContainer,w.l0.borderRadius(0,0,8,8)]),ol="--fixed-position-offset-x",al="--fixed-position-offset-y",ll=function(e){return"var(".concat(e,")")},sl=(0,Bt.iv)({transform:"translate(".concat(ll(ol),", ").concat(ll(al),")")}),cl=(0,Bt.iv)([w.l0.coverContainer,!qa.g&&{"& .cm-editor > .cm-tooltip":sl,"& .cm-editor > .cm-tooltip.cm-tooltip-thread":{left:"0px !important",transform:"translateY(".concat(ll(al),"px)")},".cm-custom-context-menu":sl}]);function ul(e){var n,t=e.resizable&&e.onResizeControlPointerDown?rl.map((function(n){return(0,a.tZ)(tl,{size:8,edge:n,onPointerDown:function(t){if(!e.onResizeControlPointerDown)throw new Error("Expected onResizeControlMouseDown");e.onResizeControlPointerDown(t,n)}},n)})):null,r=e.rect;return(0,a.tZ)(y.Z,{style:(n={zIndex:e.zIndex,position:"absolute",width:r.width,height:r.height,transform:"translate(".concat(Math.round(r.x),"px, ").concat(Math.round(r.y),"px)"),transition:e.animate?"transform 140ms ease-out":void 0,transitionTimingFunction:"ease-out",visibility:e.hidden?"hidden":void 0,opacity:e.hidden?0:void 0},(0,it.Z)(n,ol,-e.viewportInset.x+"px"),(0,it.Z)(n,al,-e.viewportInset.y+"px"),n),css:{"&:hover":{zIndex:e.zIndexHovered}},children:(0,a.BX)($a.Z,{onClick:e.onClick,onContextMenu:e.onClick,elevated:!0,css:il,className:e.className,children:[(0,a.tZ)(y.Z,{innerRef:e.innerRef,css:cl,children:e.children}),t]})})}var dl=t(78648),pl=(0,s.cn)(null),fl=(0,s.cn)(null,(function(e,n,t){var r=e($n.g4);if("end"===t.type)return n(pl,null),void n(Qn.iH,r);if("update"!==t.type){var i=e(qn.Eh).find((function(e){return e.paneId===t.paneId}));if(!i){var o=new Error("Expected pane");throw n(et.xm,{error:o,tags:{layoutstate:!0}}),o}n(Jn.W1,t.paneId),n(pl,{paneId:t.paneId,edge:t.edge,rectStart:e(i.rectAtom)})}else{var a=e(pl);if(!a){var l=new Error("Expected floatingResizeState");throw n(et.xm,{error:l,tags:{layoutstate:!0}}),l}var s=(0,dl.XR)(a.rectStart,{delta:t.moveDelta,edge:a.edge}),c=a.paneId,u=(0,Wn.ZP)(r,(function(t){var r=t.floating.find((function(e){return e.panes.includes(c)}));if(!r){var i=new Error("Expected floating");throw n(et.xm,{error:i,tags:{layoutstate:!0}}),i}var o=e(qn.M0),a=r.rect;a.x=s.x,a.y=s.y-o,a.width=s.width,a.height=s.height+o}));n(Qn.iH,u)}})),hl=t(93096),vl=t.n(hl);function ml(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,r=e.pageX,i=e.pageY,o={x:r,y:i},a={x:0,y:0};n.start&&n.start({mouse:o,shiftKey:e.shiftKey});var l=vl()((function(e){var t={x:e.pageX,y:e.pageY};a={x:t.x-o.x,y:t.y-o.y},n.move({delta:a,shiftKey:e.shiftKey,mouse:t})}),t),s=function(){l.cancel(),document.removeEventListener("pointermove",l),document.removeEventListener("pointerup",s),document.removeEventListener("touchcancel",s),n.end&&n.end({delta:a,shiftKey:e.shiftKey})};document.addEventListener("pointermove",l),document.addEventListener("pointerup",s),document.addEventListener("touchcancel",s)}var gl=(0,Bt.iv)([w.l0.width("100%"),w.l0.flex.growAndShrink(1),{overflow:"auto"}]);function Zl(e){return(0,a.tZ)(y.Z,{css:gl,style:{pointerEvents:e.disableInteractions?"none":void 0,userSelect:e.disableInteractions?"none":void 0},children:e.children})}var yl=t(64718),bl=t(92271),wl=t(91885);function xl(e,n){var t=n.leftPath,r=n.percent,i=n.snapPercent,o=void 0===i?0:i,a=(0,hr.KC)(e,t);if(!a||!(0,wl.r)(a))throw new Error("Expected leftNode");var l=(0,wl.I)(t),s=(0,hr.KC)(e,l);if("split"!==(null===s||void 0===s?void 0:s.type))throw new Error("Expected splitNode");var c=s.children.indexOf(a);if(-1===c)throw new Error("Expected leftNodeIndex");var u=c+1,d=s.children[u];if(!d)throw new Error("Expected rightNode");if(r<=o){if(a.percent=0,r<0&&c>0)for(var p=Math.abs(r),f=c-1;p>0;){var h=s.children[f];if(h.percent>p){h.percent-=p;break}if(p-=h.percent,h.percent=0,0===f)break;f--}var v=s.children.reduce((function(e,n){return n===d?e:e+n.percent}),0);d.percent=100-v}else{var m=a.percent+d.percent,g=s.children.slice(c).reduce((function(e,n){return e+n.percent}),0);if(r>m-o){if(a.percent=Math.min(g,Math.max(m,r)),d.percent=0,r>m&&u<s.children.length-1)for(var Z=r-m,y=u+1;Z>0;){var b=s.children[y];if(b.percent>Z){b.percent-=Z;break}if(Z-=b.percent,b.percent=0,y===s.children.length-1)break;y++}}else{var w=a.percent-r;d.percent=d.percent+w,a.percent=r}}}function kl(e){var n=e.layout,t=e.splitPath,r=e.tilingOptions,i=function(e,n){var t=n.splitPath,r=(0,hr.KC)(e,t);if(!r||"split"!==r.type)throw new Error("Expected split node");for(var i=100,o=(0,wl.I)(t);o.length;){var a=(0,hr.KC)(e,o);if(!a)break;o=(0,wl.I)(o),"split"===a.type&&a.stacked===r.stacked&&(i*=a.percent/100)}return i}(n,{splitPath:t}),o=(0,hr.KC)(n,t);if("split"!==(null===o||void 0===o?void 0:o.type))throw new Error("Expected split node");var a=r.size,l=r.gap,s=r.headerHeight,c=r.inset,u=void 0===c?{top:0,bottom:0,left:0,right:0}:c,d=o.children.length,p=o.stacked?l*(d-1)+s*d:l*(d-1);return i/100*((o.stacked?a.height-(u.top+u.bottom):a.width-(u.left+u.right))-p)}var Cl=(0,s.cn)(null),Il=(0,s.cn)(null,(function(e,n,t){if("end"!==t.type)if("update"!==t.type){var r=e($n.g4),i=t.stacked?window.innerHeight:window.innerWidth,o=(0,hr.KC)(r,t.leftPath);if(!o||!(0,wl.r)(o)){var a=new Error("Expected left node");throw n(et.xm,{error:a,tags:{layoutstate:!0}}),a}var l=(0,wl.I)(t.leftPath),s=o.percent,c=Qn.pc/i*100,u=null;try{u=kl({splitPath:l,layout:r,tilingOptions:e(Qn.Hs)})}catch(w){throw n(et.xm,{error:w,tags:{layoutstate:!0}}),w}if(null===u)throw new Error("Expected resizeDistance");n(Cl,{stacked:t.stacked,leftPath:t.leftPath,startPercent:s,resizeDistance:u,snapPercent:c,initialLayout:r})}else{var d=e(Cl);if(!d){var p=new Error("Expected tilingResize");throw n(et.xm,{error:p,tags:{layoutstate:!0}}),p}var f=d.stacked,h=d.leftPath,v=d.startPercent,m=d.resizeDistance,g=d.initialLayout,Z=d.snapPercent,y=v+(f?t.moveDelta.y:t.moveDelta.x)/m*100,b=(0,Wn.ZP)(g,(function(e){xl(e,{leftPath:h,percent:y,snapPercent:Z})}));n(Qn.iH,b)}else n(Cl,null)}));var Sl=t(78217),Rl=t(26774),Pl=(0,s.cn)((function(e){return Boolean(e(Sl.sx)||e(pl)||e(Cl)||e(vr.c)||e(Rl.xM))}));var Tl=t(7182),El=t(46091);var Dl=(0,Bt.iv)([v.l0.position.absolute,v.l0.shadow(3),v.l0.borderRadius(8),{pointerEvents:"none",border:"1px solid",borderColor:v.TV.outlineDimmest}]);function Ul(e){var n=function(e){var n=e.paneId,t=(0,Nt.Z)((function(){return(0,s.cn)((function(e){if(e(yl.Xu))return null;var t=e((0,qn.z)(n)),r=n===e(Sl.WB);if("floating"!==t.type&&!r)return null;var i=e(qn.M0),o=e(t.rectAtom);return{width:o.width+2,height:o.height+i+2,top:-(i+1),left:-1}}))}),[n]);return(0,s.Dv)(t)}({paneId:e.paneId});return n?(0,a.tZ)(v.G7,{css:Dl,style:n}):null}var _l=(0,l.memo)(Ul);var Bl=t(25108);var Ml=function(e){(0,Fa.Z)(t,e);var n=(0,Ha.Z)(t);function t(){var e;return(0,Wa.Z)(this,t),(e=n.apply(this,arguments)).state={error:null,errorInfo:null},e}var r=t.prototype;return r.componentDidCatch=function(e,n){this.setState({error:e,errorInfo:n}),this.props.handleError(e,n),Bl.error(e)},r.render=function(){return this.state.error?(0,a.tZ)(v.G7,{css:[v.l0.font.code,v.l0.p(16),{whiteSpace:"pre",overflow:"hidden",color:"white"},v.l0.backgroundColor.blurpleDefault,v.l0.height("100%")],children:(0,a.tZ)(v.G7,{children:this.state.error.stack})}):this.props.children},t}(l.Component);function Gl(e){var n=e.paneId,t=(0,s.Dv)(qn.CK),r=(0,s.Dv)((0,qn.z)(n)),o=(0,yl.Je)(n),l=(0,Jn.cr)({paneId:n}),c=(0,et.IY)(),u=(0,Sl.cI)({paneId:n}),d=(0,s.b9)(fl),p=(0,Jn.Xo)(),f="floating"===r.type&&!r.isDialog,h=Boolean(r.dropBehavior),v=(0,Sl.FD)({paneId:n}),m=h||Boolean(o),g=(0,bl.MD)(n),Z=(0,s.Dv)(Pl),y=function(e){var n=e.paneId,t=(0,Nt.Z)((function(){return(0,s.cn)((function(e){if(e(yl.Xu)===n)return e(yl.Ep);var t=e((0,qn.z)(n));return e(t.rectAtom)}))}),[n]);return(0,s.Dv)(t)}({paneId:n}),b={x:t.x+y.x,y:t.y+y.y},w=function(e){var n=e.paneId,t=(0,i.Z)((0,Va.L)({accept:[dt.Tv.File,Tl.z.Pane,Tl.z.NewPane],collect:function(e){return{isOver:e.isOver()}},hover:function(e,t){var r=t.getClientOffset();r&&a.drag({pageX:r.x,pageY:r.y,over:n})},drop:function(e,t){var r=t.getClientOffset();if(r)if(e.type!==Tl.z.Pane){if(e.type===dt.Tv.File||e.type===dt.Tv.Directory){var i=e.nodes.filter((function(e){return e.type===dt.Tv.File})).map((function(e){return{type:(0,mr.Dp)({path:e.path}),data:{path:e.path}}}));i.length>0&&a.drop({type:"newPaneGroup",panes:i,pageX:r.x,pageY:r.y,over:n})}if(e.type===Tl.z.NewPane){var o=e.pane;a.drop({type:"newPaneGroup",panes:[o],pageX:r.x,pageY:r.y,over:n})}}else a.drop({type:"pane",paneId:e.paneId,pageX:r.x,pageY:r.y,over:n})}}),2),r=t[0].isOver,o=t[1],a=(0,El.s)({isOver:r});return o}({paneId:n}),x="tile"===r.type;return(0,a.BX)(a.HY,{children:[r.isDialog?(0,a.tZ)(Xl,{}):null,(0,a.BX)(ul,{css:{transform:u?"scale(".concat(u.scale,")"):void 0,transformOrigin:u?"".concat(u.originX," top"):void 0},innerRef:x?w:void 0,zIndex:g.normal,zIndexHovered:g.hovered,hidden:r.isHidden,viewportInset:b,active:l,rect:y,animate:v,isBeingDragged:h,floating:m,scaleDown:"tile"===r.dropBehavior,resizable:f,onClick:function(){p(n)},onResizeControlPointerDown:function(e,t){ml(e,{start:function(){d({type:"start",paneId:n,edge:t})},move:function(e){var n=e.delta;d({type:"update",moveDelta:n})},end:function(){d({type:"end"})}})},children:[(0,a.tZ)(_l,{paneId:n}),(0,a.tZ)(Ml,{handleError:function(e,n){c({error:e,extras:{errInfo:n},tags:{paneType:r.type}})},children:(0,a.tZ)(Zl,{disableInteractions:Z,children:(0,a.tZ)(Nl,{paneId:n,dataAtom:r.data,isHidden:r.isHidden})})},n)]})]})}function Al(e){var n=e.paneId,t=e.isHidden,r=e.dataAtom,i=(0,s.Dv)(r),o=(0,Uo.Se)().Content,l=(0,s.b9)(gr),c=function(e){l({fromPaneId:n,data:e})};return(0,a.tZ)(o,{pane:i,options:{paneId:n,isHidden:t,replacePane:c,openPane:c}})}var Nl=(0,l.memo)(Al);function Xl(){var e=(0,s.b9)(rt);return(0,a.tZ)(v.G7,{onClick:function(){return e()},css:[v.l0.coverContainer,v.l0.position.fixed,v.l0.backgroundColor.backgroundOverlay]})}var Ol=(0,l.memo)(Gl);var Ll=t(48505),jl=t(8941),zl=t(56124);function Wl(e,n,t){var r=!!/iPad|iPhone|iPod/.test(navigator.platform)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform)?32:0;if(t){var i=2/3,o=Math.max(e.width,r*i),a=Math.max(e.height,r*i),l="left"===t?1:-1,s=n?0:l*(o-e.width)/2,c=n?l*(a-e.height)/2:0;return{width:n?e.width:o,height:n?a:e.height,x:n?e.x:e.x-(o-e.width)/2+s,y:n?e.y-(a-e.height)/2+c:e.y}}var u=Math.max(e.width,r),d=Math.max(e.height,r);return{width:n?e.width:u,height:n?d:e.height,x:n?e.x:e.x-(u-e.width)/2,y:n?e.y-(d-e.height)/2:e.y}}var Fl,Hl="--grip-color",Vl="var(".concat(Hl,")"),$l=(0,Bt.iv)((Fl={},(0,it.Z)(Fl,Hl,w.TV.outlineDimmest),(0,it.Z)(Fl,":active, :hover",(0,it.Z)({},Hl,w.TV.foregroundDefault)),Fl)),ql=(0,Bt.iv)([w.l0.position.absolute,w.l0.center,{minWidth:8,minHeight:8},$l]),Kl=(0,Bt.iv)({":hover":{transform:"scaleX(4)"}}),Yl=(0,Bt.iv)({":hover":{transform:"scaleY(4)"}}),Ql=(0,Bt.iv)([w.l0.height("200vh"),w.l0.width("200vw"),{transform:"translate(-50%, -50%)"}]),Jl=(0,Bt.iv)([{backgroundColor:Vl,transition:"background-color"},w.l0.borderRadius(4)]),es=(0,Bt.iv)([Jl,{transitionDuration:"140ms"}]);function ns(e){var n=e.snapped,t=e.stacked;return"left"===n?t?(0,a.tZ)(Fr.Z,{color:Vl}):(0,a.tZ)(jl.Z,{color:Vl}):t?(0,a.tZ)(zl.Z,{color:Vl}):(0,a.tZ)(Ll.Z,{color:Vl})}var ts=function(e){var n,t,r;return n=100/e*1,t=.08,r=.12,Math.min(Math.max(n,t),r)},rs=function(e){return{default:(0,Bt.iv)([w.l0.height("horizontal"===e?2:24),w.l0.width("horizontal"===e?24:2),Jl]),active:(0,Bt.iv)([w.l0.height("horizontal"===e?1:"calc(100%)"),w.l0.width("horizontal"===e?"calc(100%)":1),w.l0.backgroundColor.accentPrimaryDefault]),shared:(0,Bt.iv)([w.l0.borderRadius(4),{transitionProperty:"width, height, background-color",transitionTimingFunction:"ease-out"}])}},is=rs("horizontal"),os=rs("vertical");function as(e){var n=e.rect,t=e.onPointerDown,r=e.onDoubleClick,i=e.stacked,o=e.snapped,l=e.zIndexHovered,s=e.zIndex,c=e.isActive,u=Wl(n,i,o),d=(0,Yr.T)(),p=(i?n.width:n.height)<24,f=i?is:os;return(0,a.BX)(y.Z,{onPointerDown:t,onDoubleClick:r,onContextMenu:function(e){e.preventDefault(),e.stopPropagation()},style:{width:u.width,height:u.height,transform:"translate(".concat(u.x,"px, ").concat(u.y,"px)"),visibility:p?"hidden":void 0,cursor:i?"row-resize":"col-resize"},css:[ql,{zIndex:s},!c&&{":hover":{zIndex:l}}],children:[(0,a.tZ)(y.Z,{css:[w.l0.coverContainer,!c&&(i?Yl:Kl),c&&Ql]}),o?(0,a.tZ)(ns,{snapped:o,stacked:i}):(0,a.tZ)(y.Z,{className:"grip-line",style:{transitionDuration:d?"0s":"".concat(ts(i?n.width:n.height),"s")},css:[es,c?f.active:f.default,f.shared]})]})}var ls=t(64824),ss=(0,s.cn)(null,(function(e,n,t){var r=e($n.g4),i=(0,Wn.ZP)(r,(function(e){xl(e,{leftPath:t.leftPath,percent:t.percent})}));n(Qn.iH,i)}));function cs(e){var n=e.handleId,t=(0,s.Dv)((0,qn.vv)(n)),r=(0,s.b9)(Il),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=(0,l.useRef)(e),t=(0,s.b9)(ss),r=(0,ls.lV)((0,l.useCallback)((function(e){return e($n.g4)}),[]));return(0,l.useCallback)((function(i){i.snapped?t({leftPath:i.leftPath,percent:n.current}):Promise.resolve(r()).then((function(r){var o=(0,hr.KC)(r,i.leftPath);if(!o||!(0,wl.r)(o))throw new Error("Expected split or paneGroup");n.current=o.percent,t({leftPath:i.leftPath,percent:e})}))}),[e,t,r])}(),o=(0,bl.bJ)(),c=function(e){var n=e.handleId,t=(0,Nt.Z)((function(){return(0,s.cn)((function(e){var t=e(Cl);return!!t&&n===(0,dl.xH)({leftPath:t.leftPath})}))}),[n]);return(0,s.Dv)(t)}({handleId:n});return(0,a.tZ)(as,{isActive:c,zIndex:c?o.active:o.normal,zIndexHovered:o.hovered,snapped:t.snapped,rect:t.rect,stacked:t.stacked,onDoubleClick:function(){i(t)},onPointerDown:function(e){ml(e,{start:function(){r({type:"start",leftPath:t.leftPath,stacked:t.stacked})},move:function(e){var n=e.delta;r({type:"update",moveDelta:n})},end:function(){r({type:"end"})}})}})}var us=(0,l.memo)(cs),ds=t(62991),ps=t.n(ds),fs=t(45432),hs=t.n(fs);class vs extends l.Component{constructor(e){super(e),this._osInstance=null,this._osTargetRef=l.createRef()}osInstance(){return this._osInstance}osTarget(){return this._osTargetRef.current||null}componentDidMount(){this._osInstance=hs()(this.osTarget(),this.props.options||{},this.props.extensions),ms(this._osInstance,this.props.className)}componentWillUnmount(){hs().valid(this._osInstance)&&(this._osInstance.destroy(),this._osInstance=null)}componentDidUpdate(e){hs().valid(this._osInstance)&&(this._osInstance.options(this.props.options),e.className!==this.props.className&&ms(this._osInstance,this.props.className))}render(){const e=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]])}return t}(this.props,["options","extensions","children","className"]);return l.createElement("div",Object.assign({className:"os-host"},e,{ref:this._osTargetRef}),l.createElement("div",{className:"os-resize-observer-host"}),l.createElement("div",{className:"os-padding"},l.createElement("div",{className:"os-viewport"},l.createElement("div",{className:"os-content"},this.props.children))),l.createElement("div",{className:"os-scrollbar os-scrollbar-horizontal "},l.createElement("div",{className:"os-scrollbar-track"},l.createElement("div",{className:"os-scrollbar-handle"}))),l.createElement("div",{className:"os-scrollbar os-scrollbar-vertical"},l.createElement("div",{className:"os-scrollbar-track"},l.createElement("div",{className:"os-scrollbar-handle"}))),l.createElement("div",{className:"os-scrollbar-corner"}))}}function ms(e,n){if(hs().valid(e)){const{host:t}=e.getElements(),r=new RegExp(`(^os-host([-_].+|)$)|${e.options().className.replace(/\s/g,"$|")}$`,"g"),i=t.className.split(" ").filter((e=>e.match(r))).join(" ");t.className=`${i} ${n||""}`}}var gs={overflowBehavior:{y:"hidden"},scrollbars:{autoHide:"leave"}};var Zs=t(53201),ys=t(47589),bs=t(37432);var ws=t(1855),xs=v.KD.button,ks=(0,Bt.iv)([v.l0.display.inlineFlex,v.l0.height("100%")]),Cs=(0,Bt.iv)([v.l0.cursor.pointer,v.l0.center,v.l0.rowWithGap(4),v.l0.pl(8),v.l0.pr(4),v.l0.height("100%"),{backgroundColor:"transparent",border:"none",font:"inherit",lineHeight:"normal",color:"inherit"}]);function Is(e){var n=e.onClick;return(0,a.tZ)(v.hU,{tooltipHidden:!0,onClick:n,alt:"Close",size:18,css:[{"&& svg":{width:12,height:12,minWidth:"unset",minHeight:"unset"},borderRadius:6},v.gU.nofill],children:(0,a.tZ)(Z.Z,{})})}function Ss(e){var n=(0,Q.Z)().fs,t=e.split("/"),r=t.pop(),i=t.join("/"),o=(0,l.useState)(!1),a=o[0],s=o[1],c=function(e){var n=e.path,t=e.initialExpanded,r=(0,Q.Z)().fs;return(0,bs.Z)({path:n,initialExpanded:t,fs:r})}({path:i.length>0?i:".",initialExpanded:!0}).children,u=null===c||void 0===c?void 0:c.filter((function(e){return e.filename!==r}));return{fileName:r,parentPath:i,renaming:a,siblings:u,handleRename:function(){s(!0)},handleCancel:function(){s(!1)},handleSubmit:function(t){var r=i.length>0?i+"/"+t:t;n.moveFile(e,r),s(!1)}}}function Rs(e){var n=e.filePath,t=e.title,r=e.onClick,i=e.onClose,o=e.isActive,l=e.innerRef,s=e.icon,c=e.onPointerDown,u=Ss(n),d=u.fileName,p=u.parentPath,f=u.renaming,h=u.siblings,m=u.handleRename,g=u.handleSubmit,Z=u.handleCancel,y=t.startsWith("History - ")?"History - ".concat(d):t;return(0,a.tZ)(v.u,{tooltip:n,placement:"bottom",isDisabled:!p,children:function(e,n){return(0,a.BX)(v.Tg,(0,ce.Z)((0,R.Z)({innerRef:(0,ws.l)(l,n),css:[ks,o?v.gU.filled:v.gU.nofill,o?v.l0.color.foregroundDefault:v.l0.color.foregroundDimmer,v.l0.flex.row,v.l0.align.center,v.l0.pr(4)]},e),{children:[f?(0,a.tZ)(ys.Z,{onSubmit:g,onCancel:Z,loading:!1,siblings:h||[],parentPath:p,type:dt.Tv.File,initialValue:d,rename:!0}):(0,a.BX)(xs,{onPointerDown:c,onDoubleClick:m,css:[Cs],onClick:r,children:[(0,a.tZ)(v.G7,{css:{opacity:o?1:.6},children:s||null}),(0,a.tZ)(v.xv,{children:y})]}),(0,a.tZ)(Is,{onClick:i})]}))}})}function Ps(e){var n=e.title,t=e.onClick,r=e.onClose,i=e.isActive,o=e.innerRef,l=e.icon,s=e.onPointerDown;return(0,a.BX)(v.Tg,{innerRef:o,css:[ks,i?v.gU.filled:v.gU.nofill,i?v.l0.color.foregroundDefault:v.l0.color.foregroundDimmer,v.l0.flex.row,v.l0.align.center,v.l0.pr(4)],children:[(0,a.BX)(xs,{css:[Cs],onClick:t,onPointerDown:s,children:[(0,a.tZ)(v.G7,{css:{opacity:i?1:.6},children:l||null}),(0,a.tZ)(v.xv,{children:n})]}),(0,a.tZ)(Is,{onClick:r})]})}var Ts=v.KD.div;function Es(e){var n=e.paneId,t=e.isActive,r=e.onClick,o=e.onClose,c=e.dragGroup,u=e.scrollIntoViewIfNeeded,d=(0,Nt.Z)((function(){return(0,s.cn)((function(e){return e(e((0,qn.z)(n)).data)}))}),[n]),p=(0,s.Dv)(d),f=(0,Uo.Se)(),h=f.getTitle(p),m=f.Icon({pane:p,size:16}),g=(0,l.useRef)(null);(0,l.useEffect)((function(){t&&g.current&&u(g.current)}),[u,t]);var Z=(0,i.Z)((0,Zs.c)({type:Tl.z.Pane,item:function(){var e,t=(null===(e=g.current)||void 0===e?void 0:e.getBoundingClientRect().width)||80;return{type:Tl.z.Pane,paneId:n,width:t}},collect:function(e){return{isDragging:e.isDragging()}}}),2),y=Z[0].isDragging,b=Z[1],w=(0,s.b9)(vr.c);(0,l.useEffect)((function(){return w(y)}),[w,y]);var x,k=(0,Sl.q6)({activePaneId:n}).dnd,C=k&&c?function(e){1!==e.button&&ml(e,{start:k.start,move:k.update,end:k.end})}:void 0;return(0,a.tZ)(Ts,{css:y?[v.l0.width(0),v.l0.visibility.hidden]:[v.l0.px(2)],onMouseDown:function(e){1===e.button&&o()},children:(0,mr.KM)(p)?(0,a.tZ)(Rs,{onPointerDown:C,innerRef:C?void 0:(0,ws.l)(b,g),filePath:null!==(x=p.data.path)&&void 0!==x?x:"",title:(0,pt.UO)(h),isActive:t,icon:m,onClick:function(){(0,I.j)(I.U3.WS_TAB_OPENED,{paneType:p.type}),r()},onClose:function(){(0,I.j)(I.U3.WS_TAB_CLOSED,{paneType:p.type}),o()}}):(0,a.tZ)(Ps,{onPointerDown:C,innerRef:C?void 0:(0,ws.l)(b,g),title:h,isActive:t,icon:m,onClick:function(){(0,I.j)(I.U3.WS_TAB_OPENED,{paneType:p.type}),r()},onClose:function(){(0,I.j)(I.U3.WS_TAB_CLOSED,{paneType:p.type}),o()}})})}function Ds(){var e=(0,P.Z)(["\n  query ReplEnvironmentHeaderContainer($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        language\n      }\n    }\n  }\n"]);return Ds=function(){return e},e}var Us={},_s=(0,T.Ps)(Ds());var Bs=t(25386);function Ms(){var e=(0,Q.Z)().presence,n=(0,i.Z)(l.useState(e.getFollowingUsers()),2),t=n[0],r=n[1];return l.useEffect((function(){return r(e.getFollowingUsers()),e.onFollowingUsersChanged((function(e){r(e.followingUsers)}))}),[e]),t}function Gs(){var e=Ms();return 0===e.length?null:1===e.length?(0,a.tZ)(As,{user:e[0]}):(0,a.BX)("div",{className:"jsx-4f2e88846001c10e followed-indicator",children:[(0,a.BX)(yn.Z,{children:[e.length," users are observing you"]}),(0,a.tZ)(te(),{id:"4f2e88846001c10e",children:".followed-indicator.jsx-4f2e88846001c10e{white-space:nowrap;height:100%;max-width:100%;width:-webkit-max-content;width:-moz-max-content;width:max-content;padding-left:var(--space-8);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}"})]})}function As(e){var n=e.user,t=le({variables:{ids:[n.id]},ssr:!1}).data;if(!t)return null;var r=t.usersByIds,o=(0,i.Z)(r,1)[0].image,l=n.id,s=n.username,c=n.color;return(0,a.BX)("div",{className:"jsx-add9eb548244268a followed-indicator",children:[(0,a.BX)(dn.Ug,{wrap:"nowrap",align:"center",className:"stack",spacing:"var(--space-4)",children:[(0,a.tZ)(pe,{id:l,username:s,image:o,color:c,size:22}),(0,a.tZ)(yn.Z,{className:"username",children:s}),(0,a.tZ)("div",{className:"jsx-add9eb548244268a text",children:(0,a.tZ)(yn.Z,{children:"is observing you"})})]}),(0,a.tZ)(te(),{id:"add9eb548244268a",children:".followed-indicator.jsx-add9eb548244268a{height:100%;max-width:100%;width:-webkit-max-content;width:-moz-max-content;width:max-content;padding-left:var(--space-8)}.text.jsx-add9eb548244268a{white-space:nowrap}.followed-indicator.jsx-add9eb548244268a .stack{height:100%}.followed-indicator.jsx-add9eb548244268a .username{overflow:clip;max-width:150px;display:inline-block;-o-text-overflow:ellipsis;text-overflow:ellipsis}"})]})}function Ns(e){var n=e.id,t=e.username,r=e.color,o=(0,Q.Z)().presence,l=le({variables:{ids:[n]},ssr:!1}).data;if(!l)return null;var s=l.usersByIds,c=(0,i.Z)(s,1)[0].image;return(0,a.BX)("div",{className:te().dynamic([["48dd00c96a834430",[r]]])+" following-indicator",children:[(0,a.BX)(dn.Ug,{wrap:"nowrap",className:"stack",spacing:"var(--space-4)",children:[(0,a.tZ)(dn.gC,{className:"stack",align:"center",justify:"center",children:(0,a.tZ)(pe,{id:n,username:t,image:c,color:r,size:22})}),(0,a.tZ)(dn.gC,{className:"text-container",align:"center",justify:"center",children:(0,a.BX)(yn.Z,{className:"following-text",children:["Observing ",t]})}),(0,a.tZ)(dn.gC,{className:"stack",align:"center",justify:"center",children:(0,a.BX)(Cn.Z,{size:"small",filled:!1,border:!1,textColor:r,onClick:function(){o.unfollowUser()},children:[(0,a.tZ)(Ie.T,{children:"stop observing"}),(0,a.tZ)(Z.Z,{})]})})]}),(0,a.tZ)(te(),{id:"48dd00c96a834430",dynamic:[r],children:".following-indicator.__jsx-style-dynamic-selector{height:100%;max-width:100%;width:-webkit-max-content;width:-moz-max-content;width:max-content;padding-left:var(--space-8)}.following-indicator.__jsx-style-dynamic-selector .stack{height:100%;max-width:100%;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;overflow:clip}.following-indicator.__jsx-style-dynamic-selector .text-container{height:100%;margin-right:-2px}.following-indicator.__jsx-style-dynamic-selector .following-text{color:".concat(r,";white-space:nowrap}")})]})}var Xs=t(22414);var Os=t(86601);function Ls(e){var n=e.activeFile,t=e.paneId,r=function(e){var n=(0,R.Z)({},Us,e);return E.a(_s,n)}({variables:{replId:(0,ke.Z)()}}).data,i="Repl"===(null===r||void 0===r?void 0:r.repl.__typename)?r.repl.language:"",o=(0,s.Dv)(vr.bg),c=(0,s.b9)(vr.ao),u=(0,s.b9)(vr.Ky),d=n&&(0,pt.gK)(n),p=function(e){var n=e.paneId,t=(0,Os.Z)(),r=(0,Jn.cr)({paneId:n});return t&&r?t:null}({paneId:t}),f=function(e){var n=e.paneId,t=Ms();return(0,Jn.cr)({paneId:n})&&t.length>0?t:null}({paneId:t}),h=function(){var e=(0,lr.Z)((0,s.Dv)(Xs.$));return(0,l.useCallback)((function(){setTimeout((function(){var n;return null===(n=e.current)||void 0===n?void 0:n.focus()}),0)}),[e])}(),m=(0,Jn.cr)({paneId:t}),g=null;return p?g=(0,a.tZ)(Ns,{id:p.id,username:p.username,color:p.color}):d&&n?g=o?(0,a.tZ)(v.zx,{css:{backgroundColor:"transparent"},iconLeft:(0,a.tZ)(fn.Z,{}),text:"Close preview",onClick:function(){c({type:"markdown"}),h()}}):(0,a.tZ)(v.zx,{css:{backgroundColor:"transparent"},iconLeft:(0,a.tZ)(pn.Z,{}),text:"Open preview",onClick:function(){n&&(u({type:"markdown",data:{path:n}}),h())}}):n&&(g=(0,a.tZ)(Bs.Z,{filePath:n,replLanguage:i,disableKeyboardShortcut:!m})),null!==g||f?(0,a.BX)(v.G7,{css:[v.l0.px(4),v.l0.rowWithGap(8)],children:[f&&n?(0,a.tZ)(Gs,{}):null,g]}):null}var js=t(59369),zs=t(89295),Ws=t(94860),Fs=t(73148),Hs=t(87534),Vs=t(99932),$s=t(90849),qs=t(87671),Ks=t(66843),Ys=t(53761),Qs=(0,s.cn)(null,(function(e,n,t){var r=e($n.g4),i=e((0,qn.z)(t)),o=i.rectAtom,a=i.type,l=e(o),s=(0,hr.Rh)(r,t);if(!s){var c=new Error("Expected pane");throw n(et.xm,{error:c,tags:{layoutstate:!0}}),c}if("tile"!==a){var u=e(qn.Eh).filter((function(e){return"tile"===e.type&&!e.isHidden})),d=e(qn.M0),p={x:l.x+l.width/2,y:l.y+l.height/2},f=u.find((function(n){var t=e(n.rectAtom);return(0,dl.V0)(p,{x:t.x,y:t.y-d,width:t.width,height:t.height+d})})),h="leftOf";f&&(h=(0,dl.QN)(p,e(f.rectAtom)).placement),n(Qn.iH,(0,Wn.ZP)(r,(function(e){(0,Ys.$C)(e,{paneGroupPath:s.paneGroupPath,to:(null===f||void 0===f?void 0:f.paneId)||["tiling"],placement:h})})))}else n(Qn.iH,(0,Wn.ZP)(r,(function(e){(0,Ys.MB)(e,{paneGroupPath:s.paneGroupPath,rect:{x:l.x-16,y:l.y-16,width:l.width,height:l.height}})})))}));var Js=t(90145);function ec(e){var n=e.paneId,t=(0,s.b9)(Qs),r=(0,qs.e3)(),i=(0,qs.CK)(),o=(0,qs.Bd)(),l=function(e){var n=e.paneId,t=(0,Nt.Z)((function(){return(0,s.cn)((function(e){return"floating"===e((0,qn.z)(n)).type}))}),[n]);return(0,s.Dv)(t)}({paneId:n}),c=(0,yl.Lo)(),u=c.maximizePane,d=c.restoreMaximizedPane,p=(0,yl.XP)(n);if(p)return(0,a.tZ)(v.hU,{onClick:function(){return d()},alt:p?"Restore":"Fullscreen",children:(0,a.tZ)(Ws.Z,{})});var f={label:"Maximize",icon:(0,a.tZ)(zs.Z,{}),run:function(){return u(n)}},h=l?[f]:[{label:"Insert Left",icon:(0,a.tZ)(Hs.Z,{}),run:function(){o({placement:"leftOf",paneId:n}),(0,I.j)(I.U3.WS_SPLIT_USED,{action:"opened",placement:"leftOf"})}},{label:"Insert Right",icon:(0,a.tZ)(Vs.Z,{}),run:function(){o({placement:"rightOf",paneId:n}),(0,I.j)(I.U3.WS_SPLIT_USED,{action:"opened",placement:"rightOf"})}},{label:"Insert Up",icon:(0,a.tZ)($s.Z,{}),run:function(){o({placement:"above",paneId:n}),(0,I.j)(I.U3.WS_SPLIT_USED,{action:"opened",placement:"above"})}},{label:"Insert Down",icon:(0,a.tZ)(Fs.Z,{}),run:function(){o({placement:"below",paneId:n}),(0,I.j)(I.U3.WS_SPLIT_USED,{action:"opened",placement:"below"})}},f];return(r||l)&&(h.splice(h.length-1,0,{label:l?"Unfloat":"Float",icon:l?(0,a.tZ)(Js.Z,{}):(0,a.tZ)(Ks.Z,{}),run:function(){t(n)}}),h.push({label:"Close",icon:(0,a.tZ)(Z.Z,{}),run:function(){i(n),(0,I.j)(I.U3.WS_SPLIT_USED,{action:"closed"})}})),(0,a.tZ)(js.Z,{resetOnSelect:!0,label:"Pane Actions",items:h,onItemClick:function(e){e.run()}})}var nc=(0,l.memo)(ec),tc=v.KD.div,rc=(0,Bt.iv)([v.l0.flex.growAndShrink(1),v.l0.minWidth(16),v.l0.height("100%")]);function ic(e){var n=e.paneId,t=(0,Sl.q6)({activePaneId:n}),r=t.isDragging,i=t.dnd,o=(0,yl.Lo)().toggleMaximized;if(!i)return null;var l=r?"grabbing":"grab";return(0,a.tZ)(tc,{onDoubleClick:function(){o(n)},css:[rc],style:{cursor:l},onPointerDown:function(e){ml(e,{start:i.start,move:i.update,end:i.end})}})}function oc(e){var n=e.paneId,t=e.onChange,r=(0,Nt.Z)((function(){return(0,s.cn)((function(e){var t=e((0,qn.z)(n));return e(t.rectAtom).width}))}),[n]),i=(0,s.Dv)(r),o=(0,lr.Z)(t),a=(0,Nt.Z)((function(){return vl()((function(){o.current()}),500)}),[o]);return(0,l.useEffect)(a,[i,a]),null}function ac(e){var n=(0,qn.Xs)(e),t=(0,Nt.Z)((function(){return(0,s.cn)((function(e){var t=e(n);return e((0,qn.z)(t.panes[t.activeIndex])).paneId}))}),[n]);return(0,s.Dv)(t)}function lc(e){var n=e.headerId,t=(0,s.b9)(vr.Oe),r=(0,s.b9)(vr.Je),o=(0,s.b9)(vr.SG),c=(0,s.b9)(Kn.U),u=(0,s.Dv)(vr.c),d=function(e){var n=(0,qn.Xs)(e),t=(0,s.Dv)((0,Nt.Z)((function(){return(0,s.cn)((function(e){return e(n).activeIndex}))}),[n])),r=(0,s.Dv)((0,Nt.Z)((function(){return(0,ls.kv)(n,(function(e){return e.path}),ps())}),[n])),i=(0,s.Dv)((0,Nt.Z)((function(){return(0,ls.kv)(n,(function(e){return e.panes}),ps())}),[n])),o=ac(e),a=(0,Nt.Z)((function(){return(0,s.cn)((function(e){var t=e(n),r=e((0,qn.z)(t.panes[t.activeIndex])),i=e(r.data);return(0,mr.KM)(i)?(0,mr.DQ)(i):null}))}),[n]);return{activeIndex:t,path:r,panes:i,activeTabPaneId:o,activeFile:(0,s.Dv)(a)}}(n),p=d.activeIndex,f=d.path,h=d.panes,m=d.activeTabPaneId,g=d.activeFile,Z=function(){var e,n=(0,l.useRef)(null),t=null===(e=n.current)||void 0===e?void 0:e.osInstance(),r=(0,l.useRef)(0),i=(0,l.useRef)(0),o=(0,Ki.Fg)().isDarkColorScheme,a=(0,Yr.T)();return{options:gs,handleWheel:function(e){if(t&&0!==e.deltaY&&0===e.deltaX){var n=e.deltaY<0?-1:1,o=i.current!==n?t.scroll().position.x:r.current,a=25*n,l=t.scroll().max.x;r.current=Math.max(0,Math.min(l,o-a)),i.current=n;var s=function(){if(t){var e=t.scroll().position.x,n=r.current-e,i=Math.round(e+n/10);0!==n&&(t.scroll({x:i}),window.requestAnimationFrame(s))}};window.requestAnimationFrame(s)}},ref:n,className:o?"os-theme-light":"os-theme-dark",update:(null===t||void 0===t?void 0:t.update)?function(){return t.update()}:null,scrollIntoViewIfNeeded:function(e){null===t||void 0===t||t.scroll({el:e,scroll:"ifneeded",block:"nearest"},a?0:160)}}}(),y=(0,i.Z)((0,Va.L)({accept:[dt.Tv.File,Tl.z.Pane,Tl.z.NewPane],hover:function(e,n){var t=n.getSourceClientOffset();t&&C({item:e,panes:h,sourceClientOffset:t.x})},collect:function(e){return{isOver:e.isOver()}},drop:function(e,n){if(!n.didDrop()){var t=null!==(null===I||void 0===I?void 0:I.index)?null===I||void 0===I?void 0:I.index:h.length;if(e.type!==dt.Tv.File&&e.type!==dt.Tv.Directory)if(e.type!==Tl.z.NewPane){if("paneId"in e){var i=h.includes(e.paneId)?h.length-1:h.length;o({paneId:e.paneId,index:void 0!==t&&t<i?t:i,toPaneGroupPath:f})}}else r({activate:!0,paneGroupPath:f,index:t,panes:[e.pane]});else{var a=e.nodes.filter((function(e){return e.type===dt.Tv.File})).map((function(e){return{type:(0,mr.Dp)({path:e.path}),data:{path:e.path}}}));a.length>0&&r({activate:!0,paneGroupPath:f,index:t,panes:a})}}}}),2),b=y[0],w=y[1],x=function(e){var n=e.isOver,t=(0,l.useState)(null),r=t[0],i=t[1],o=(0,l.useRef)(null),a=(0,l.useRef)([]);(0,l.useEffect)((function(){if(!n)return a.current=[],void i(null);o.current&&(a.current=(0,_e.Z)(o.current.children).map((function(e){var n=e.getBoundingClientRect();return n.x+n.width/2})))}),[n]);var s=(0,l.useCallback)((function(e){if(0!==a.current.length){var n=e.item.type===Tl.z.Pane?e.item:null,t=(null===n||void 0===n?void 0:n.paneId)||null,r=t?e.panes.indexOf(t):-1,o=(null===n||void 0===n?void 0:n.width)||80,l=a.current.map((function(e,n){return-1===r||r<n?e:e+o/2})).findIndex((function(n){return n>e.sourceClientOffset})),s=-1===l,c=-1===r?e.panes.length:e.panes.length-1;i({index:s?c:Math.min(l,c),paneId:t,width:o})}}),[]);return{tabContainerRef:o,hover:s,dropState:r}}({isOver:b.isOver}),k=x.tabContainerRef,C=x.hover,I=x.dropState,S=I?I.index:null;if((null===I||void 0===I?void 0:I.paneId)&&null!==S){var R=h.indexOf(I.paneId);R>-1&&R<S&&S++}var P=I&&null!==S?(0,_e.Z)(h.slice(0,S)).concat([I],(0,_e.Z)(h.slice(S))):h;return(0,a.BX)(a.HY,{children:[(0,a.BX)(v.G7,{css:[v.l0.rowWithGap(2),v.l0.flex.growAndShrink(1),v.l0.align.center,v.l0.height("100%")],innerRef:w,children:[(0,a.tZ)(v.G7,{css:[v.l0.flex.row,v.l0.flex.shrink(1),v.l0.align.center,v.l0.height("100%")],children:(0,a.tZ)(vs,{style:{height:"100%",width:"100%"},className:Z.className,options:{overflowBehavior:{y:"hidden"},scrollbars:{autoHide:"leave",visibility:u?"hidden":"auto"}},onWheel:Z.handleWheel,ref:Z.ref,children:(0,a.tZ)(v.G7,{innerRef:k,css:[v.l0.flex.row,v.l0.height("100%"),v.l0.py(4),v.l0.px(2)],children:P.map((function(e,n){var r=p===n;return"string"!==typeof e?(0,a.tZ)(v.G7,{css:[v.l0.px(2)],children:(0,a.tZ)(v.G7,{css:[v.l0.borderRadius(8),v.l0.width(e.width),v.l0.height(28),v.l0.backgroundColor.accentPrimaryDimmest,{border:"1px dashed ".concat(v.TV.accentPrimaryDefault)}]})},"preview"):(0,a.tZ)(Es,{dragGroup:1===h.length,paneId:e,isActive:r,onClick:function(){t(e)},onClose:function(){c(e)},scrollIntoViewIfNeeded:Z.scrollIntoViewIfNeeded},e)}))})})}),(0,a.tZ)(v.hU,{alt:"New tab",tooltipHidden:!0,onClick:function(){r({paneGroupPath:f,activate:!0,panes:[{type:"commands",data:{autoFocus:!0}}]})},children:(0,a.tZ)(gn.Z,{})}),(0,a.tZ)(ic,{paneId:m})]}),(0,a.tZ)(Ls,{headerId:n,paneId:m,activeFile:g}),(0,a.tZ)(v.G7,{css:v.l0.px(4),children:(0,a.tZ)(nc,{paneId:m})}),Z.update?(0,a.tZ)(oc,{paneId:m,onChange:Z.update}):null]})}var sc=(0,l.memo)(lc),cc=(0,Bt.iv)([v.l0.borderRadius(8,8,0,0),v.l0.position.absolute,v.l0.flex.row,v.l0.align.center],{borderBottom:"1px solid ".concat(v.TV.backgroundHigher)}),uc=["top","right","left","topRight","topLeft"];function dc(e){var n=e.headerId,t=function(e){var n=e.headerId,t=(0,qn.Xs)(n),r=(0,Nt.Z)((function(){return(0,s.cn)((function(e){return"floating"===e(t).path[0]}))}),[t]);return(0,s.Dv)(r)}({headerId:n}),r=ac(n),i=(0,s.b9)(fl);return t?(0,a.tZ)(a.HY,{children:uc.map((function(e){return(0,a.tZ)(tl,{size:8,edge:e,onPointerDown:function(n){ml(n,{start:function(){i({type:"start",paneId:r,edge:e})},move:function(e){var n=e.delta;i({type:"update",moveDelta:n})},end:function(){i({type:"end"})}})}},e)}))}):null}var pc=(0,l.memo)(dc);function fc(e){var n=e.headerId,t=(0,qn.Xs)(n),r=ac(n),i=(0,yl.XP)(r),o=(0,Nt.Z)((function(){return(0,s.cn)((function(e){return e(e(t).rectAtom)}))}),[t]),l=(0,s.Dv)(o),c=(0,bl.w8)(r),u=(0,Sl.cI)({paneId:r}),d=i||l,p=(0,Sl.FD)({paneId:r});return(0,a.BX)(v.Tg,{elevated:!0,css:cc,style:{transform:u?"scale(".concat(u.scale,")"):void 0,transformOrigin:u?"".concat(u.originX," bottom"):void 0,width:d.width,height:d.height,top:Math.round(d.y),left:Math.round(d.x),zIndex:c,transitionProperty:p?"all":void 0,transitionDuration:p?"140ms":void 0,transitionTimingFunction:p?"ease-out":void 0},children:[(0,a.tZ)(sc,{headerId:n}),(0,a.tZ)(pc,{headerId:n})]})}var hc=(0,l.memo)(fc),vc=t(38628);function mc(){var e=(0,vc.K)(),n=(0,s.Dv)($n._E),t=(0,bl.P9)();if(!e)return null;var r=e.rect,i="detachPreview"===e.type?e.progress:1,o="detachPreview"===e.type?e.rect.height:8,l="detachPreview"===e.type&&i<.98?w.TV.foregroundDefault:w.TV.accentPrimaryDefault,c="detachPreview"===e.type?void 0:w.TV.accentPrimaryDimmer;return(0,a.tZ)("div",{style:{position:"absolute",border:"1px ".concat(i<.98?"dashed":"solid"),pointerEvents:"none",width:r.width,height:r.height,backgroundColor:c,borderColor:l,borderRadius:o,zIndex:t,opacity:"detachPreview"===e.type?.5*i:.2,transform:"translate(".concat(Math.round(r.x),"px, ").concat(Math.round(r.y),"px)"),transition:n?"transform 140ms, width 140ms, height 140ms, border-radius 140ms":void 0},children:"detachPreview"===e.type?(0,a.tZ)(gc,{progress:i}):null})}function gc(e){var n=e.progress;return(0,a.tZ)("div",{style:{width:"100%",height:"100%",transform:"scale(".concat(n,")"),background:"radial-gradient(transparent, ".concat(w.TV.backgroundHighest,")"),borderRadius:"100%"}})}var Zc=(0,l.memo)(mc),yc=t(96189);var bc=t(92364);function wc(){var e=(0,P.Z)(["\n  query BrowserNotifications($username: String!) {\n    user: userByUsername(username: $username) {\n      id\n      image\n    }\n  }\n"]);return wc=function(){return e},e}var xc=(0,T.Ps)(wc());function kc(e){return Cc.apply(this,arguments)}function Cc(){return Cc=(0,r.Z)((function(e){var n,t;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return null===wr.l?[2]:[4,wr.l.query({query:xc,variables:{username:e}})];case 1:return[2,null===(t=r.sent().data)||void 0===t||null===(n=t.user)||void 0===n?void 0:n.image]}}))})),Cc.apply(this,arguments)}function Ic(){return"Notification"in window?"true"===ot.Z.get(Ec,"string")?"dismissed":window.Notification.permission:"denied"}function Sc(){return Rc.apply(this,arguments)}function Rc(){return(Rc=(0,r.Z)((function(){return(0,o.__generator)(this,(function(e){try{window.Notification.requestPermission().then()}catch(n){return[2,new Promise((function(e){window.Notification.requestPermission((function(n){e(n)}))}))]}return[2,window.Notification.requestPermission()]}))}))).apply(this,arguments)}function Pc(){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,r.Z)((function(){var e;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return[4,Sc()];case 1:return e=n.sent(),Dc(!1),(0,I.j)("granted"===e?I.U3.WEB_NOTIFICATION_PERM_GRANTED:I.U3.WEB_NOTIFICATION_PERM_DENIED),[2]}}))}))).apply(this,arguments)}var Ec="notifications/dismissedModal";function Dc(e){ot.Z.set(Ec,String(e)),e&&(0,I.j)(I.U3.WEB_NOTIFICATION_PERM_DISMISSED_MODAL)}var Uc={};function _c(){return(_c=(0,r.Z)((function(e){var n,t,r,i,a,l,s,c,u,d,p;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return n=e.title,t=e.body,r=e.badge,i=e.icon,a=e.iconByUsername,l=e.tag,s=e.onClick,c=e.cacheDuration,u=void 0===c?0:c,!document.hidden&&document.hasFocus()?[2]:"granted"!==Ic()?[2]:(d=Date.now(),l in Uc&&Uc[l]+u>d?[2]:a?[4,kc(a)]:[3,2]);case 1:i=o.sent(),o.label=2;case 2:return p=new window.Notification(n,{body:t,badge:r||"/public/images/logo-grayscale.png",icon:i||"/public/images/icon-square.png",tag:l}),setTimeout((function(){p.close()}),1e4),p.addEventListener("click",(function(){window.focus(),p.close()})),s&&p.addEventListener("click",s),Uc[l]=d,[2]}}))}))).apply(this,arguments)}var Bc=t(20431);var Mc=44100,Gc=32896,Ac=function e(){var n=this;(0,Wa.Z)(this,e),this.audioStart=0,this.feed=function(e){var t=n.getFormatedValue(e),r=new Float32Array(n.samples.length+t.length);r.set(n.samples,0),r.set(t,n.samples.length),n.samples=r},this.getFormatedValue=function(e){for(var n=new Float32Array(e.length),t=0;t<e.length;t++)n[t]=e[t]/2147483648;return n},this.stop=function(){if(n.bufferSource)try{n.bufferSource.stop()}catch(e){if("InvalidStateError"!==e.name&&"RangeError"!==e.name)throw e}},this.flush=function(e){if(n.audioCtx&&n.samples.length){var t=0,r=n.audioCtx.currentTime;if(0===e)n.startTime=r,n.audioStart=r;else{for(var i=r-n.audioStart,o=Math.floor(i*Mc);o>e-Gc;)n.audioStart+=.7459410430839002,o-=Gc;o>e&&(t=o-e,n.startTime=r),n.startTime=r}n.samples=n.samples.slice(t,n.samples.length);for(var a,l,s,c=n.audioCtx.createBufferSource(),u=n.samples.length/1,d=n.audioCtx.createBuffer(1,u,Mc),p=0;p<1;p++)for(a=d.getChannelData(p),l=p,s=0;s<u;s++)a[s]=n.samples[l],l+=1;n.startTime<n.audioCtx.currentTime&&(n.startTime=n.audioCtx.currentTime),c.buffer=d,c.connect(n.gainNode),c.start(n.startTime),n.stop(),n.bufferSource=c,n.startTime+=d.duration,n.samples=new Float32Array}},this.samples=new Float32Array;var t=window.AudioContext||window.webkitAudioContext;this.audioCtx=new t,this.gainNode=this.audioCtx.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioCtx.destination),this.startTime=this.audioCtx.currentTime};function Nc(e){var n=e.container,t=(0,l.useState)(!1),r=t[0],i=t[1],o=(0,l.useRef)(null);(0,l.useEffect)((function(){return n.openChannel({name:"audio",service:"audio"},(function(e){var n=e.channel;if(n){var t=null,r=!1;return n.onCommand((function(e){var n;r||(r=!0,(0,I.j)(I.U3.AUDIO_PLAYING_STARTED),o.current=function(){t=new Ac,o.current=null},i(!0)),t&&(null===e||void 0===e||null===(n=e.audio2)||void 0===n?void 0:n.data)&&(e.audio2.samples||(e.audio2.samples=0),t.feed(Int32Array.from(e.audio2.data)),t.flush(e.audio2.samples))})),function(){i(!1),t&&(t.stop(),t=null),o.current=null}}}))}),[n]);var s=function(){i(!1),(0,I.j)(I.U3.AUDIO_PROMPT_CLOSED,{accepted:!1})};return(0,a.tZ)(v.u_,{isOpen:r,onRequestClose:s,children:(0,a.BX)(v.G7,{css:[v.l0.colWithGap(24)],children:[(0,a.tZ)(v.h4,{variant:"headerDefault",level:1,children:"We hear audio!"}),(0,a.BX)(v.G7,{css:[v.l0.colWithGap(8)],children:[(0,a.tZ)(v.xv,{multiline:!0,children:"Hey! It appears that this Repl is playing audio."}),(0,a.tZ)(v.xv,{multiline:!0,children:"In order for us to hear the audio you\u2019re receiving, please click confirm."})]}),(0,a.BX)(v.G7,{css:[v.l0.rowWithGap(12),v.l0.justify.end],children:[(0,a.tZ)(v.zx,{onClick:s,text:"Cancel"}),(0,a.tZ)(v.zx,{colorway:"positive",onClick:function(){i(!1),(0,I.j)(I.U3.AUDIO_PROMPT_CLOSED,{accepted:!0}),o.current&&o.current()},text:"Confirm",iconLeft:(0,a.tZ)(x.Z,{})})]})]})})}var Xc=t(51995),Oc=t(91082),Lc=t(48920),jc={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!1,key:"Enter"};function zc(){var e=(0,s.b9)(Tt),n=(0,l.useState)(!1),t=n[0],r=n[1],i=(0,Wo.A)(),o=(0,Q.Z)(),c=o.fs,u=o.container,d=o.runner,p=(0,ee.L7)(d),f=(0,Fo.T)(),h=(0,kr.C)();(0,zr.x)(St,{run:e}),(0,zr.x)(_o.q,{run:function(){e(_o.i({openFile:h,fs:c,shouldHideFile:f,getRecentFiles:i}))}}),(0,zr.x)(jo,{run:function(){e(zo({container:u}))}}),Ar(_o.i({openFile:h,fs:c,shouldHideFile:f,getRecentFiles:i}));var v=(0,cr.Q)("flagGhostrunner");return Ar(zo({container:u,activeOnly:v})),Ar({match:Lr.pl,data:{type:"action",icon:(0,a.tZ)(Xc.Z,{}),label:"Run",description:"Run Repl",run:function(){d.run()},keyboardShortcut:jc}},{enabled:p===Lc.A.IDLE}),(0,zr.x)(jc,{run:function(){p===Lc.A.RUNNING&&d.stopRun(),d.run()},enabled:p!==Lc.A.OFFLINE}),Ar({match:Lr.pl,data:{type:"action",icon:(0,a.tZ)(Oc.Z,{}),label:"Stop",description:"Stop Repl",run:function(){d.stopRun()}}},{enabled:p===Lc.A.RUNNING}),Ar({match:(0,Lr.zf)({defaultScore:.5}),data:{type:"action",label:"Create",icon:(0,a.tZ)(gn.Z,{}),description:"Create a new Repl",run:function(){r(!0)}}}),(0,a.tZ)(g.Z,{isOpen:t,onRequestClose:function(){return r(!1)},maxWidth:600,centered:!0,children:(0,a.tZ)($i.Z,{})})}var Wc=(0,l.memo)(zc);function Fc(e){var n=e.children,t=e.tour,r=function(e){var n;i&&t&&"function"===typeof(null===(n=window.analytics)||void 0===n?void 0:n.user)&&(0,I.yV)({id:window.analytics.user().id(),workspaceTourId:t.id,workspaceTourStatus:e===t.steps[t.steps.length-1].id?"completed":e.toLowerCase()})};if(!t)return(0,a.tZ)(a.HY,{children:n});var i="workspace-desktop-tour"===t.id||"workspace-desktop-new-user-tour"===t.id;return(0,a.tZ)(jr.r,{tour:t,onStep:r,onDone:r,children:n})}var Hc=t(84790),Vc=t(31066);function $c(){var e=(0,P.Z)(["\n  query ContentsDiverged {\n    currentUser {\n      id\n      isAdmin: hasRole(role: ADMIN)\n    }\n  }\n"]);return $c=function(){return e},e}var qc={},Kc=(0,T.Ps)($c());var Yc=t(14456),Qc=t(99094),Jc=Yc.tk.baseTheme({".cm-diff-inserted":{backgroundColor:"#0053A644",borderLeft:"#0053A6 solid 3px"},".cm-diff-deleted":{backgroundColor:"#c93c3733",borderLeft:"#c93c37 solid 3px"}}),eu=Yc.p.line({attributes:{class:"cm-diff-inserted"}}),nu=Yc.p.line({attributes:{class:"cm-diff-deleted"}}),tu=Cr.Py.define({map:function(e,n){return e.map(n)}}),ru=function(e){(0,Fa.Z)(t,e);var n=(0,Ha.Z)(t);function t(){return(0,Wa.Z)(this,t),n.apply(this,arguments)}var r=t.prototype;return r.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-alignment cm-line",e.innerHTML="&nbsp;",e},r.ignoreEvent=function(){return!1},t}(Yc.l9);function iu(e){var n=new Cr.f_,t=new ru;e.sort((function(e,n){return e.character-n.character}));var r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0)for(var s=a.value,c=s.character,u=s.padding,d=0;d<u;d++)n.add(c,c,Yc.p.widget({widget:t,side:-1,block:!0}))}catch(p){i=!0,o=p}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n.finish()}function ou(e){var n=e.coloredLines,t=e.colorDecoration,r=Yc.lg.fromClass((function e(r){(0,Wa.Z)(this,e);var i=new Cr.f_,o=!0,a=!1,l=void 0;try{for(var s,c=n[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value,d=r.state.doc.line(u);i.add(d.from,d.from,t)}}catch(p){a=!0,l=p}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}this.decorations=i.finish()}),{decorations:function(e){return e.decorations}}),i=Cr.QQ.define({create:function(){return Yc.p.none},update:function(e,n){var t=!0,r=!1,i=void 0;try{for(var o,a=n.effects[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if(l.is(tu))return l.value}}catch(s){r=!0,i=s}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n.docChanged?e.map(n.changes):e},provide:function(e){return Yc.tk.decorations.from(e)}});return[Jc,r,i]}var au=function(){var e=function(e,n){return Yc.tk.domEventHandlers({scroll:function(t,r){if(r===e&&t.target){var i=t.target;if(i.scrollTop){var o=i.scrollTop;n.scrollDOM.scrollTo({top:o})}}}})},n=new Cr.F6,t=new Cr.F6;return{extensions:function(){return{right:n.of([]),left:t.of([])}},setup:function(r,i){r.dispatch({effects:t.reconfigure(e(r,i))}),i.dispatch({effects:n.reconfigure(e(i,r))})}}},lu=t(80159),su=t(78244),cu=au(),uu=cu.extensions,du=cu.setup;function pu(e){var n=e.left,t=e.right,r=n.code,o=(0,At.Z)(n,["code"]),a=t.code,s=(0,At.Z)(t,["code"]),c=(0,lu.Z)((0,R.Z)({readOnly:!0,lineWrapping:!1,initialDoc:r,extensions:[uu().left]},o)),u=c.view,d=c.ref,p=(0,lu.Z)((0,R.Z)({readOnly:!0,lineWrapping:!1,initialDoc:a,extensions:[uu().right]},s)),f=p.view,h=p.ref,v=(0,i.Z)(l.useState(!1),2),m=v[0],g=v[1],Z=(0,i.Z)(l.useState(!1),2),y=Z[0],b=Z[1];return l.useEffect((function(){if(u&&f&&m&&y){var e=setTimeout((function(){du(u,f),function(e,n){var t=(0,Qc.Bz)(e.state.doc.sliceString(0),n.state.doc.sliceString(0));e.dispatch({effects:[Cr.Py.appendConfig.of(ou({coloredLines:t.leftColored.sort((function(e,n){return e-n})),colorDecoration:nu})),tu.of(iu(t.leftPadded))]}),n.dispatch({effects:[Cr.Py.appendConfig.of(ou({coloredLines:t.rightColored.sort((function(e,n){return e-n})),colorDecoration:eu})),tu.of(iu(t.rightPadded))]})}(u,f)}));return function(){return clearTimeout(e)}}}),[u,f,m,y]),l.useEffect((function(){u&&(u.dispatch({changes:{from:0,to:u.state.doc.length,insert:r}}),g(!0))}),[r,u]),l.useEffect((function(){f&&(f.dispatch({changes:{from:0,to:f.state.doc.length,insert:a}}),b(!0))}),[a,f]),{left:{view:u,ref:d,code:r,options:o,ready:m},right:{view:f,ref:h,code:a,options:s,ready:y}}}function fu(e){var n,t=e.diffViewer,r=(0,At.Z)(e,["diffViewer"]);return(0,a.BX)(a.HY,{children:[(0,a.tZ)("div",{css:{height:t.ready?0:"auto"},ref:t.ref}),!t.ready&&(0,a.tZ)(su.PH,(0,R.Z)({code:null!==(n=t.code)&&void 0!==n?n:""},t.options,r))]})}function hu(){var e,n=(0,Q.Z)().fs,t=(0,l.useRef)(new Map),i=(0,ut.Z)(),c=(0,l.useState)(!1),u=c[0],d=c[1],p=(0,l.useState)(!1),f=p[0],h=p[1],m=(0,l.useState)([]),g=m[0],Z=m[1],y=function(e){var n=(0,R.Z)({},qc,e);return E.a(Kc,n)}().data,w=(null===y||void 0===y||null===(e=y.currentUser)||void 0===e?void 0:e.isAdmin)||window.location.search.includes("debug=1"),x=(0,et.IY)(),k=(0,s.b9)(vr.a4),C=g.map((function(e){return e.path})).map((function(e){return{title:e,path:e}})),S=(0,l.useState)(),P=S[0],T=S[1];(0,l.useEffect)((function(){if(i&&!t.current.has(i)&&i!==Vc.rq){var e=function(e){k(e),t.current.delete(i),Z((function(e){return e.filter((function(e){return e.path!==i}))}))};(0,pt.Mb)(i)?n.watchTextFile(i,{onMoveOrDelete:e,onError:function(e,t){e.code||(n.flush(),n.persist({skipDebounce:!0}),x({error:e,extras:t,tags:{ot:!0}}))},onReconnectFail:function(e,n){Z((function(t){return(0,_e.Z)(t.filter((function(e){return e.path!==i}))||[]).concat([{path:i,prompt:n,cb:e}])})),d(!0),P||T(i)}}):n.watchFile(i,{onChange:function(){},onMoveOrDelete:e}),t.current.set(i,!0)}}),[i,n,x,k]);var D,U,_=function(){var e=(0,r.Z)((function(e){return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return(0,I.j)(I.U3.FILE_RECONNECT_FALLBACK_CHOSEN,{choice:e}),(0,I.j)(I.U3.CONTENTS_DIVERGED_ACTION,{action:"local"===e?"client":"server"}),h(!0),[4,Promise.all(g.map((function(n){return Z((function(e){var t=e.filter((function(e){return e.path!==n.path}));return 0===t.length?d(!1):T(t[0].path),t})),n.cb(e)})))];case 1:return n.sent(),h(!1),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),B=P?g.find((function(e){return e.path===P})):null,M=null===B||void 0===B?void 0:B.prompt,G=P,A=pu({left:{code:null!==(D=null===M||void 0===M?void 0:M.localContent)&&void 0!==D?D:"",filePath:G},right:{code:null!==(U=null===M||void 0===M?void 0:M.remoteContent)&&void 0!==U?U:"",filePath:G}}),N=A.left,X=A.right,O=[v.l0.minHeight("7em"),v.l0.maxHeight("50vh"),v.l0.overflowY("auto"),{"> div":{display:"flex",alignItems:"stretch",width:"100%",height:"100%"},"> div > .cm-editor":{flex:"1 1 auto",width:"100%"}}];return(0,a.tZ)(v.u_,{css:[{maxHeight:"90%",maxWidth:"90%"}],preventClose:!0,isOpen:u,onRequestClose:function(){},children:(0,a.BX)(v.G7,{css:[v.l0.colWithGap(24)],children:[(0,a.tZ)(b.h,{level:3,variant:"headerDefault",children:"Replit is out of sync!"}),(0,a.BX)(b.x,{multiline:!0,children:["Sometimes Replit has trouble making sure everyone's code is the same. Let us know which version of"," ",g.length>1?"these files":"this file"," you'd like to keep."," ",g.length>1?(0,a.BX)("strong",{children:["There are ",g.length," files impacted by this."]}):""]}),f?(0,a.tZ)(Hc.Loader,{}):(0,a.BX)(a.HY,{children:[C.length?(0,a.tZ)(v.Ph,{initialSelectedItem:C[0],selectedItem:C.find((function(e){return e.path===P})),items:C,onChange:function(e){T(e.path)}}):null,w?(0,a.BX)(v.G7,{css:[v.l0.rowWithGap(16),v.l0.justify.start,v.l0.align.center,v.l0.pt(16),v.l0.p(8),v.l0.backgroundColor.redDimmest,v.l0.font.code],children:[(0,a.tZ)(b.x,{variant:"subheadDefault",children:"Debug View"}),(0,a.BX)(b.x,{children:["Divergence type: ",null===M||void 0===M?void 0:M.case]})]}):null,(0,a.BX)(v.G7,{css:[v.l0.rowWithGap(8)],children:[(0,a.BX)(v.G7,{css:[v.l0.flex.growAndShrink(1),{flexBasis:0}],children:[(0,a.tZ)(b.x,{variant:"subheadDefault",children:"My changes"}),(0,a.tZ)(v.Tg,{elevated:!0,css:[v.l0.flex.growAndShrink(1),v.l0.py(8)],children:(0,a.tZ)(v.G7,{css:O,children:(0,a.tZ)(fu,{diffViewer:N})})}),(0,a.BX)(v.G7,{css:[v.l0.pt(16)],children:[(0,a.tZ)(b.x,{multiline:!0,css:[v.l0.textAlign.center],children:"This might disrupt other people's work or create unexpected bugs."}),(0,a.tZ)(v.zx,{onClick:function(){_("local")},text:"Reset to Mine"})]})]}),(0,a.BX)(v.G7,{css:[v.l0.flex.growAndShrink(1),{flexBasis:0}],children:[(0,a.tZ)(b.x,{variant:"subheadDefault",children:"Shared changes"}),(0,a.tZ)(v.Tg,{elevated:!0,css:[v.l0.flex.growAndShrink(1),v.l0.py(8)],children:(0,a.tZ)(v.G7,{css:O,children:(0,a.tZ)(fu,{diffViewer:X})})}),(0,a.BX)(v.G7,{css:[v.l0.pt(16),v.l0.justify.end],children:[(0,a.tZ)(b.x,{multiline:!0,css:[v.l0.textAlign.center],children:"This is the safest option and won't disrupt other's work."}),(0,a.tZ)(v.zx,{onClick:function(){_("remote")},text:"Sync to Shared",colorway:"primary"})]})]})]})]})]})})}var vu=t(1557);function mu(){var e=(0,Q.Z)().fs,n=(0,l.useState)(!1),t=n[0],r=n[1],i=(0,l.useState)(!1),o=i[0],s=i[1],c=(0,ft.D)();(0,l.useEffect)((function(){if(!o)return e.onDiskQuotaExceeded((function(){r(!0)}))}),[e,o]);var u=function(){r(!1)};return(0,a.tZ)(v.u_,{isOpen:t,onRequestClose:u,children:(0,a.BX)(v.G7,{css:[v.l0.colWithGap(24)],children:[(0,a.BX)(v.h4,{level:3,variant:"headerDefault",children:["Oops! This Repl's disk is full"," ",(0,a.tZ)(vu.Z,{color:v.TV.accentNegativeDefault,size:20})]}),(0,a.BX)(v.xv,{multiline:!0,variant:"subheadDefault",children:["Please free up space by deleting some files. You can open the file tree by clicking the ",(0,a.tZ)(Ia.Z,{})," icon on the left."]}),(0,a.tZ)(v.xv,{multiline:!0,children:"You can check how much space you are using from the Repl Resources section under the file tree."}),(0,a.tZ)(v.xv,{multiline:!0,variant:"small",children:"We apologize for the inconvenience. We are working on a solution to allow you to boost your disk limits."}),(0,a.BX)(v.G7,{css:v.l0.rowWithGap(8),tag:"label",children:[(0,a.tZ)(v.XZ,{id:c,checked:o,onChange:function(e){return s(Boolean(e.currentTarget.value))}}),(0,a.tZ)(v.xv,{multiline:!0,variant:"small",children:"Do not show this message again for this session."})]}),(0,a.tZ)(v.zx,{onClick:u,text:"Close"})]})})}var gu=t(46701),Zu=t(79611),yu=t(43186),bu=t(76650),wu=t(45528),xu=!1;var ku=t(95642);function Cu(){var e=(0,P.Z)(["\n  mutation UpdateReplConfig($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        config {\n          isVnc\n          isServer\n        }\n      }\n    }\n  }\n"]);return Cu=function(){return e},e}var Iu={},Su=(0,T.Ps)(Cu());function Ru(){var e=(0,ke.Z)(),n=(0,Q.Z)().container,t=(0,s.b9)(vr._N),r=(0,i.Z)(function(e){var n=(0,R.Z)({},Iu,e);return G.D(Su,n)}(),1),o=r[0];(0,l.useEffect)((function(){return n.onPortOpened((function(n){var r,i=n.isVnc;t(i?"vnc":"webview"),r=i?{isVnc:!0}:{isServer:!0},o({variables:{input:(0,R.Z)({id:e},r)}})}))}),[n,t,o,e])}var Pu=t(18888),Tu=t(58482),Eu=t(87238);var Du=t(10129);function Uu(){return(Uu=(0,r.Z)((function(e){var n;return(0,o.__generator)(this,(function(t){switch(t.label){case 0:if(!wr.l)throw new Error("Expected Apollo client");return[4,wr.l.query({query:Eu.Ux,variables:{id:e}})];case 1:return[2,"Repl"===(null===(n=t.sent().data)||void 0===n?void 0:n.repl.__typename)?n.repl.title:null]}}))}))).apply(this,arguments)}function _u(){var e=(0,Q.Z)(),n=e.container,t=e.presence;l.useEffect((function(){var e=t.onUserJoin((function(t){var r,i=null===(r=n.getContext())||void 0===r?void 0:r.repl;if(i){var o=t.username;return function(e){return Uu.apply(this,arguments)}(i.id).then((function(e){e&&function(e){_c.apply(this,arguments)}({title:"",body:"".concat(o," joined ").concat(e),tag:"".concat(i.id,"-").concat(o,"-joined"),iconByUsername:o,cacheDuration:9e5})})),function(){e()}}}))}),[t,n])}var Bu=t(15335),Mu=t(75436);function Gu(){var e=(0,P.Z)(["\n  subscription RegisterReplConnection($replId: String!) {\n    replConnection(replId: $replId)\n  }\n"]);return Gu=function(){return e},e}var Au={},Nu=(0,T.Ps)(Gu());var Xu=t(75240);function Ou(){!function(e){var n=(0,R.Z)({},Au,e);Mu.m(Nu,n)}({variables:{replId:(0,ke.Z)()},skip:(0,Bu.Z)()!==Xu.e.CONNECTED})}var Lu=t(95716);function ju(){var e=(0,P.Z)(["\n  query GitRepoIsNewFork($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        origin {\n          id\n        }\n        timeCreated\n        timeUpdated\n      }\n    }\n  }\n"]);return ju=function(){return e},e}var zu={},Wu=(0,T.Ps)(ju());var Fu=t(16799),Hu=t(67128);function Vu(){var e=(0,ke.Z)(),n=(0,Q.Z)().container,t=function(e){var n=(0,R.Z)({},zu,e);return E.a(Wu,n)}({variables:{replId:e}}).data,r=null===t||void 0===t?void 0:t.repl;(0,l.useEffect)((function(){if(r){var e,t=null!==r.origin,i=new Date(r.timeUpdated).getTime()-new Date(r.timeCreated).getTime()<1e3;if(t&&i)(e=n).exec.apply(e,(0,_e.Z)(Fu.rO.format(Hu.Xe)))}}),[n,r])}function $u(){var e=(0,mn.Z)(),n=e.showConfirm,t=e.showNotice,r=e.hideMessage,i=e.showError,o=(0,Q.Z)().container;(0,l.useEffect)((function(){var e=o.onToast((function(e){e.startsWith("PANIC")||t(e,function(e){var n=e.length/.025+1e3;return Math.max(1e4,n)}(e))})),a=null,l=!1,s=o.onConnectionStateChanged((function(e){if(a&&(r(a),a=null),e===Xu.e.CONNECTED)return l=!0,void(a=n("Connected",1500));l&&(e!==Xu.e.CONNECTING?e!==Xu.e.DISCONNECTED||(a=i("Disconnected")):a=t("Reconnecting"))}));return function(){a&&r(a),e(),s()}}),[o,n,t,i,r])}var qu=t(9523);function Ku(){var e=(0,P.Z)(["\n  query ReplEnvironment2LoadCurriculum($id: String!) {\n    currentUser {\n      id\n      isTeacher: hasRole(role: TEACHER)\n      ...CrosisContextCurrentUser\n    }\n    repl(id: $id) {\n      ... on Repl {\n        id\n        isProject\n        isProjectFork\n        isModelSolution\n        isModelSolutionFork\n        owner {\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n        language\n        origin {\n          id\n          ...CrosisContextRepl\n          origin {\n            id\n            ...CrosisContextRepl\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return Ku=function(){return e},e}var Yu={},Qu=(0,T.Ps)(Ku(),qu.D,qu.C);var Ju=t(24967),ed=t(50217),nd=t(18962),td=t(25108);function rd(){var e,n,t=(0,ke.Z)(),i=(0,Q.Z)().fs,a=function(e){var n=(0,R.Z)({},Yu,e);return E.a(Qu,n)}({variables:{id:t}}).data,s=(0,$o.NN)(),c="Repl"===(null===a||void 0===a?void 0:a.repl.__typename)?a.repl:null,u="CurrentUser"===(null===a||void 0===a||null===(e=a.currentUser)||void 0===e?void 0:e.__typename)?a.currentUser:null,d="Repl"===(null===a||void 0===a?void 0:a.repl.__typename)&&a.repl.isModelSolutionFork,p=d?c&&(null===(n=c.origin)||void 0===n?void 0:n.origin):c&&c.origin||null,f=(0,wu.b)("Repl"===(null===p||void 0===p?void 0:p.__typename)?{repl:p,currentUser:u||void 0}:null);l.useEffect((function(){c&&u&&c.isProject&&i.stat(".lesson").then((function(e){e.exists||i.createDir(".lesson")}))}),[i,u,c]),l.useEffect((function(){if(c&&(c.isProjectFork||d)&&p&&f){var e=(0,Xu.Z)({onUnrecoverableError:function(e){td.error(e),Ri.$e((function(n){n.setTag("curriculum-authoring",!0),n.setExtra("originId",p.id),Ri.Tb(e)}))}}),n=(0,Ju.Z)({container:e});e.connect({context:f,fetchConnectionMetadata:function(){return(0,ed.Z)({url:"/data/repls/".concat(c.id,"/get_repl_origin_guest_connection_metadata")})}});var t=e.onConnectionStateChanged(function(){var a=(0,r.Z)((function(r){var a,l;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:if(r!==nd.e.CONNECTED)return[3,8];t(),o.label=1;case 1:return o.trys.push([1,6,7,8]),[4,i.copyDirFromRemote(".lesson",".lesson",n)];case 2:return(a=o.sent()).error?(Ri.$e((function(e){e.setTag("curriculum-authoring",!0),e.setExtra("originId",p.id),Ri.Tb({message:"Error copying lesson: ".concat(a.error)})})),[3,5]):[3,3];case 3:return[4,i.stat(".lesson/instructions.md")];case 4:o.sent().exists&&s(!0),o.label=5;case 5:return[3,8];case 6:return l=o.sent(),Ri.$e((function(e){e.setTag("curriculum-authoring",!0),Ri.Tb(l)})),[3,8];case 7:return e.destroy(),[7];case 8:return[2]}}))}));return function(e){return a.apply(this,arguments)}}());return function(){return e.destroy()}}}),[i,f,c,p,d,s])}var id=t(68122),od=t(39571);function ad(){var e=(0,P.Z)(["\n  fragment WorkspaceUseDebuggerRepl on Repl {\n    id\n    lang {\n      id\n      hasDAP\n    }\n  }\n"]);return ad=function(){return e},e}function ld(){var e=(0,P.Z)(["\n  query WorkspaceUseDebugger($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...WorkspaceUseDebuggerRepl\n      }\n    }\n  }\n  ","\n"]);return ld=function(){return e},e}var sd={},cd=(0,T.Ps)(ad()),ud=(0,T.Ps)(ld(),cd);function dd(e){var n=e.onOpenFile,t=e.onOutput,r=(0,Q.Z)(),i=r.debuggest,o=r.dotReplit,a=function(e){var n=(0,R.Z)({},sd,e);return E.a(ud,n)}({variables:{replId:(0,ke.Z)()}}).data,s=function(e){var n=e.repl,t=e.dotReplit,r=e.debuggest;return(0,l.useEffect)((function(){if(n){if(!n.lang.hasDAP)return t.watch((function(e){var n;e.error||(null===(n=e.config.debugger)||void 0===n?void 0:n.support)&&r.connect()}));r.connect()}}),[n,r]),(0,id.Z)(r.mainClient)}({debuggest:i,dotReplit:o,repl:"Repl"===(null===a||void 0===a?void 0:a.repl.__typename)?a.repl:null});!function(e){(0,l.useEffect)((function(){if(e){var n=e.onStarted((function(e){(0,I.j)(I.U3.DEBUGGER_USED,{action:"started",joined:e})})),t=e.onPaused((function(e){(0,I.j)(I.U3.DEBUGGER_USED,{action:"paused",reason:e})})),r=e.onBreakpoint((function(n){(0,I.j)(I.U3.DEBUGGER_USED,{action:"breakpointToggled",breakpointAction:n,state:e.state.current})}));return function(){n(),t(),r()}}}),[e])}(s),function(e,n){var t,r=n.onOutput,i=n.onOpenFile,o=(0,lr.Z)(r),a=(0,lr.Z)(i);(0,l.useEffect)((function(){if(e)return e.onOutput((function(e){o.current(e)}))}),[e]);var s=(0,id.Z)(e?e.stackFrames:null),c=null===s||void 0===s?void 0:s[0],u=null===c||void 0===c||null===(t=c.source)||void 0===t?void 0:t.path,d=null===c||void 0===c?void 0:c.line;(0,l.useEffect)((function(){if(u&&d&&e){var n=(0,od.om)(u);n?a.current({path:n,line:d}):e.stepOut()}}),[e,u,d])}(s,{onOpenFile:n,onOutput:t})}var pd=t(75338),fd={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!0,key:"S"};var hd=t(536),vd=t(45435);var md=t(52008);var gd=t(75192);var Zd=t(5442),yd=t(63848),bd=t(1864),wd="video.json",xd=(0,bd.join)(yd.V,wd);function kd(e,n){return Cd.apply(this,arguments)}function Cd(){return(Cd=(0,r.Z)((function(e,n){var t;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return n.find((function(e){return e.type===dt.Tv.File&&e.filename===wd}))?[4,e.readFile(xd)]:[2,null];case 1:return(t=r.sent()).error?[2,null]:[2,t.content.toString()]}}))}))).apply(this,arguments)}function Id(){!function(e){var n=(0,Q.Z)().fs,r=(0,qo.Z)().isTutorial,o=(0,lr.Z)(e);(0,l.useEffect)((function(){if(r){var e=!1,a=n.watchDir(yd.V,{onChange:function(r){Promise.all([t.e(1142).then(t.t.bind(t,11142,23)),kd(n,r)]).then((function(n){var t=(0,i.Z)(n,2),r=t[0],a=t[1];if(!e)if(a){var l=null;try{l=r.parse(a)}catch(c){}var s="object"===typeof l&&"string"===typeof l.embedUrl?l.embedUrl:null;o.current(s?{embedUrl:s}:null)}else o.current(null)}))},onMoveOrDelete:function(){o.current(null)},onError:function(){o.current(null)}});return function(){e=!0,a()}}}),[n,r,o])}((0,fi.gQ)())}var Sd=t(55528),Rd=t(4862),Pd=t(58823);function Td(){var e=(0,P.Z)(["\n  query TrackMultiplayer($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        multiplayers {\n          id\n        }\n        owner {\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return Td=function(){return e},e}var Ed={},Dd=(0,T.Ps)(Td());function Ud(){var e,n=(0,Q.Z)().presence,t=(0,ke.Z)(),r=(0,l.useRef)(!1),i=function(e){var n=(0,R.Z)({},Ed,e);return E.a(Dd,n)}({variables:{replId:t}}),o=i.data,a=i.loading,s=0;"Repl"===(null===o||void 0===o?void 0:o.repl.__typename)&&(s=o.repl.multiplayers.length,"User"===(null===(e=o.repl.owner)||void 0===e?void 0:e.__typename)&&(s+=1));(0,l.useEffect)((function(){if(!a&&!r.current){var e=n.onActiveUsersChange((function(){r.current=!0,e(),(0,I.j)(I.U3.MULTIPLAYER_REPL_OPENED,{replId:t,participantsCount:s,usersOnlineCount:n.getActiveUsers().length})}));return e}}),[t,a,s,n])}function _d(){var e=(0,ke.Z)(),n=bo(e),t=function(e){var n=(0,yo.Z)(e,{onReceiveAnnotationUpdate:function(){}}).annotations;return(0,l.useMemo)((function(){return n.reduce((function(e,n){return n.isGeneral?e:e+n.messages.filter((function(e){return!1===e.seen})).length}),0)}),[n])}(e),r=(0,s.b9)(Ot);(0,l.useEffect)((function(){r({paneType:"chat",indicatorType:n>0?"unread":void 0})}),[r,n]),(0,l.useEffect)((function(){r({paneType:"threadInbox",indicatorType:t>0?"unread":void 0})}),[r,t])}var Bd=t(6801),Md=t(11213);function Gd(){var e=(0,P.Z)(["\n  subscription ThreadUpdates($replId: String!) {\n    updatedThread: annotationUpdatesByRepl(replId: $replId) {\n      id\n      ...AnnotationsUIAnchor\n    }\n  }\n  ","\n"]);return Gd=function(){return e},e}var Ad={},Nd=(0,T.Ps)(Gd(),Bd.j7);function Xd(e){!function(e){var n=(0,R.Z)({},Ad,e);Mu.m(Nd,n)}({variables:{replId:e},onData:function(n){var t,r,i=null===(t=n.data)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.updatedThread;i&&"AnnotationAnchor"===i.__typename&&(n.client.cache.updateQuery({query:Bd.yi,variables:{replId:e}},(function(e){return(0,Wn.ZP)(e,(function(e){null!==e&&"Repl"===e.repl.__typename&&(e.repl.annotationAnchors.find((function(e){return e.id===i.id}))||e.repl.annotationAnchors.push(i))}))})),n.client.cache.updateQuery({query:Md.Jq,variables:{replId:e,path:i.path}},(function(e){return(0,Wn.ZP)(e,(function(e){var n;e&&"ThreadsByFileResult"===(null===(n=e.threadsByFile)||void 0===n?void 0:n.__typename)&&(e.threadsByFile.threads.find((function(e){return e.id===i.id}))||e.threadsByFile.threads.push((0,ce.Z)((0,R.Z)({},i),{messageCount:i.messages.length,unreadCount:i.messages.filter((function(e){return!e.seen})).length,participants:i.messages.filter((function(e){return!!e.user})).map((function(e){return e.user}))})))}))})))}})}function Od(e){var n,t=e.repl,r=e.currentUser,o=r.id===(null===(n=t.user)||void 0===n?void 0:n.id),a=(0,yu.Z)().preferences,u=(0,Q.Z)().session;!function(){var e=(0,Q.Z)(),n=e.lspnix,t=e.lsp,r=e.fs,i=(0,yu.Z)().preferences.codeIntelligence,o=(0,ut.Z)()||"",a=(0,Sd.Z)(o);l.useEffect((function(){if(!i)return t.stop(),void n.disable();t.start(),n.enable()}),[n,t,i]),l.useEffect((function(){if(a&&o&&(0,pt.Mb)(o))return a.onWorkspaceEdit((function(e){var n=e.edit;return(0,Pd.w)({edit:n,fs:r,client:a}),{applied:!0}}))}),[r,a,o]),l.useEffect((function(){if(a&&o&&(0,pt.Mb)(o)&&(0,Rd.Z)(a).isTextDocumentSyncSupported)return r.watchTextFile(o,{onFlush:function(){a.isOpen(o)&&a.notify.didSave(o)}})}),[r,o,a])}(),function(){var e=(0,fr.ne)();(0,l.useEffect)((function(){var n=function(){e.flush()};return window.addEventListener("beforeunload",n),function(){window.removeEventListener("beforeunload",n)}}),[e]),(0,l.useEffect)((function(){var n=function(){"hidden"===document.visibilityState&&e({force:!1})};return document.addEventListener("visibilitychange",n),function(){document.removeEventListener("visibilitychange",n)}}),[e]),(0,l.useEffect)((function(){var n=null;return function t(){n=setTimeout((function(){e({force:!1}),t()}),6e4)}(),function(){n&&clearTimeout(n)}}),[e]),(0,l.useEffect)((function(){return function(){e.flush()}}),[e])}(),(0,Pu.Z)(),(0,hd.Z)({workspaceType:"desktop"}),l.useEffect((function(){var e=function(e){"s"===e.key&&(0,Du.j)(e)&&e.preventDefault()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[]),_u(),Ou(),function(){var e=(0,Q.Z)().presence;l.useEffect((function(){return e.onFollowingUsersChanged((function(e){var n=e.followingUsers,t=e.type,r=n.length;"follow"===t?(0,I.j)(Lu.U3.REMOTE_USER_CURSOR_FOLLOWED,{numFollowers:r}):(0,I.j)(Lu.U3.REMOTE_USER_CURSOR_UNFOLLOWED,{numFollowers:r})}))}),[e])}(),function(e){var n=e.isAnon,t=e.isOwner,r=e.ignoreUnloadPrompt,i=(0,ke.Z)();(0,Eu.Vg)({skip:n||t,variables:{replId:i},onData:function(e){var n=e.data.data;!1===(null===n||void 0===n?void 0:n.currentUserCanWrite)&&(r(!0),window.location.reload())}})}({isAnon:!1,isOwner:o,ignoreUnloadPrompt:(0,Tu.Z)()}),Vu(),function(){var e=(0,Q.Z)().presence,n=(0,ut.Z)();(0,l.useEffect)((function(){e.updateOpenFile(n)}),[e,n])}(),$u(),rd(),(0,pd.Z)(),function(){var e=(0,Q.Z)().runner,n=(0,s.b9)(vr.im),t=(0,s.b9)(vr.Ky),r=(0,s.b9)(vr.ao),i=(0,$o.Ln)(),o=(0,s.Dv)(fr.Mn),a=(0,jr.e)(Wr.y.Output);l.useEffect((function(){if(o&&(null===a||void 0===a?void 0:a.isActive)){var e=setInterval((function(){n()}),200);return function(){clearInterval(e)}}}),[null===a||void 0===a?void 0:a.isActive,n,o]),l.useEffect((function(){if(o)return e.onStateChanged((function(e){e===Lc.A.RUNNING&&n()}))}),[e,n,o]),l.useEffect((function(){o&&(i?t({type:"instructions"}):r({type:"instructions"}))}),[i,t,r,o]),(0,zr.x)(fd,{run:function(){return t({type:"shell"})},enabled:Boolean(o)})}(),function(){var e=(0,c.useRouter)(),n=(0,Q.Z)().container,t=(0,i.Z)((0,s.KO)(vd.a0),2),r=t[0],o=t[1],a=(0,s.b9)(vd.Th);(0,l.useEffect)((function(){e.query.debug&&o(!0)}),[o,e.query.debug]),(0,l.useEffect)((function(){if(r)return n.client().onDebugLog((function(e){"log"===e.type&&a((function(n){return(0,_e.Z)(n).concat([{index:n[n.length-1]?n[n.length-1].index+1:0,dir:e.log.direction,cmd:e.log.cmd,timestamp:window.performance.now()}])}))}))}),[r,a,n])}(),function(){var e=(0,Q.Z)(),n=e.presence,t=e.session;(0,l.useEffect)((function(){return n.onUserOpenedFile((function(e){var r=e.user,i=e.file,o=n.getFollowedUser();o&&o.id===r.id&&i&&t.openFile(i)}))}),[n,t]);var r=(0,l.useState)(null),i=r[0],o=r[1];(0,l.useEffect)((function(){return n.onFollowedUserChanged(o)}),[n,t]),(0,l.useEffect)((function(){var e=function(){n.unfollowUser()};if(i){var t=setTimeout((function(){document.addEventListener("click",e)}),0);return function(){clearTimeout(t),document.removeEventListener("click",e)}}}),[i])}(),(0,Zd.Z)(),Id(),(0,Jo.z)(),function(){var e=(0,qo.Z)().isTutorial,n=(0,fi.$x)(),t=(0,cr.Q)("flagLayoutNavigator");(0,l.useEffect)((function(){t&&e&&n()}),[n,e,t])}(),_d(),Xd(t.id),dd({onOpenFile:function(e){u.openFile(e.path),u.updateDeeplink(e)},onOutput:function(){}}),function(){var e=(0,md.JM)().data,n=null===e||void 0===e?void 0:e.currentUser,t=(0,s.b9)(cr.H);(0,l.useEffect)((function(){t({flagGhostrunner:Boolean(null===n||void 0===n?void 0:n.flagGhostrunner),flagLayoutNavigator:Boolean(null===n||void 0===n?void 0:n.flagLayoutNavigator)})}),[t,n])}();var d=["html","html_beta"].includes(t.language);(0,ku.Z)({initialLayoutState:t.layoutState||null}),(0,l.useEffect)((function(){return Ri.YA("replId",t.id),gd.c_.setTag("replId",t.id),function(){Ri.YA("replId",void 0),gd.c_.setTag("replId",void 0)}}),[t.id]),function(e){var n=e.repl,t=e.currentUser,r=(0,Q.Z)().container,i=(0,c.useRouter)(),o=(0,wu.b)({repl:n,currentUser:t});(0,l.useEffect)((function(){var e;return xu||(xu=!0,e=i.query.initialConnectionMetadata),r.connect({customConnectionMetadata:e,context:o}),function(){r.close()}}),[o,r]),(0,l.useEffect)((function(){return function(){r.destroy()}}),[r])}({repl:t,currentUser:r}),Ru(),(0,l.useEffect)((function(){var e,n="Repl"===(null===(e=t.origin)||void 0===e?void 0:e.__typename)?t.origin.id:null;return(0,bu.Fy)({id:t.id,slug:t.slug,originId:n,roles:r.roles&&r.roles.map((function(e){return e.name}))}),function(){(0,bu.dv)()}}),[t,r.roles]);var p=(0,s.b9)($n._E),f=(0,Yr.T)();(0,l.useEffect)((function(){p(!f)}),[f,p]);var h=a.isLayoutStacked,v=(0,s.b9)(Vo.h$);(0,l.useEffect)((function(){return v(h)}),[v,h]);var m=(0,s.b9)(Vo.gM);return(0,l.useEffect)((function(){return m(d)}),[m,d]),Ud(),null}var Ld=t(25602),jd=t(89390),zd=function(){var e=(0,r.Z)((function(e,n){var t,r,i,a;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return(0,Ld.u9)()?[4,(0,Ld.mv)(e)]:[2,!1];case 1:return t=o.sent(),r=t.path,i=t.line,a=t.col,r?(n.openFile(r,{line:i,col:a}),[2,!0]):[2,!1]}}))}));return function(n,t){return e.apply(this,arguments)}}();function Wd(){var e=(0,Q.Z)(),n=e.fs,t=e.session,i=e.dotReplit,a=(0,ke.Z)(),c=(0,l.useRef)(!1),u=(0,s.Dv)($n.QP),d=(0,lr.Z)(u),p=(0,l.useState)(!1),f=p[0],h=p[1],v=(0,s.Dv)(fr.Mn);(0,l.useEffect)((function(){if(f)if(u){var e=(0,Ld.YM)({path:u}),n=window.location.hash;n===u||n.startsWith(e+":")||(c.current=!0,window.location.hash=e)}else history.pushState("",document.title,window.location.pathname+window.location.search)}),[f,u]),(0,l.useEffect)((function(){function e(){return(e=(0,r.Z)((function(){var e;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return v?d.current?(h(!0),[2]):[4,zd(n,t)]:[2];case 1:return e=r.sent(),h(!0),e||d.current||"saved"===v?[2]:((0,jd.P)(n,t,i,a),[2])}}))}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n,t,i,a,d,v]),(0,l.useEffect)((function(){if(v){var e=function(){var e=(0,r.Z)((function(){return(0,o.__generator)(this,(function(e){switch(e.label){case 0:return c.current?(c.current=!1,[2]):[4,zd(n,t)];case 1:return e.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}();return window.addEventListener("hashchange",e),function(){window.removeEventListener("hashchange",e)}}}),[v,n,t])}function Fd(){return Wd(),null}var Hd=t(4368);function Vd(){var e=(0,P.Z)(["\n  query ExtensionStore {\n    extensionList {\n      id\n      url\n      name\n      description\n      user {\n        id\n        username\n        displayName\n      }\n    }\n  }\n"]);return Vd=function(){return e},e}var $d=(0,T.Ps)(Vd());function qd(){var e=(0,po.c)("flag-iframe-extensions"),n=e.enabled,t=e.loading,i=(0,s.b9)(dr.g2),c=l.useCallback((function(e){i({panes:[{data:e,type:"extension"}],makeActive:!0,placement:"rightOf"})}),[i]);return Ar({match:Lr.pl,commands:function(e){return e.active||""!==e.search?[{match:Lr.pl,data:{type:"action",label:"URL",icon:(0,a.tZ)(gn.Z,{}),description:"Add an extension by URL",run:function(){var e=prompt("insert extension url");e&&c({url:e,name:"Extension"})}}},{match:Lr.pl,data:{type:"context",label:"Store",icon:(0,a.tZ)(Hd.Z,{}),description:"Browse the extension store"},commands:function(){var e=(0,r.Z)((function(e){var n,t,r;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:return e.active?[4,null===wr.l||void 0===wr.l?void 0:wr.l.query({query:$d})]:[2,[]];case 1:return!(n=i.sent())||n.error?[2,[]]:(t=n.data.extensionList)?[2,t.map((function(e){return{match:Lr.pl,data:{type:"action",label:e.name,icon:(0,a.tZ)(Hd.Z,{}),description:null!==(r=e.description)&&void 0!==r?r:"",run:function(){e.url&&c({url:e.url,name:e.name})}}}}))]:[2,[]]}}))}));return function(n){return e.apply(this,arguments)}}()}]:[]},data:{type:"context",label:"Extensions",icon:(0,a.tZ)(Hd.Z,{}),description:"Manage extensions"}},{enabled:!t&&n}),null}var Kd=(0,s.cn)((function(e){var n=e(Jn.J1);if(!n)return null;var t=e((0,qn.z)(n)).rectAtom,r=e(t),i=e(qn.M0);return{x:r.x,y:r.y-i,width:r.width,height:r.height+i}}));function Yd(){var e=(0,s.Dv)(Kd),n=(0,Os.Z)();return e&&n?(0,a.tZ)("div",{css:[w.l0.position.absolute,w.l0.width(e.width),w.l0.height(e.height),w.l0.borderRadius(4),{boxShadow:"0 0 0 3px ".concat(n.color),pointerEvents:"none",zIndex:3,transform:"translate(".concat(Math.round(e.x),"px, ").concat(Math.round(e.y),"px)")}]}):null}var Qd=(0,l.memo)(Yd),Jd=t(2548),ep=t(35869),np=40,tp=(0,s.cn)({}),rp=(0,s.cn)(null,(function(e,n,t){n(tp,(function(e){return(0,Wn.ZP)(e,(function(e){e[t.id]=t.preferredHeight}))}))}));var ip=(0,s.cn)([]),op=(0,s.cn)(0),ap=(0,s.cn)(null,(function(e,n,t){var r=t.height,i=t.sections,o=r-i.length*np;n(op,r),n(ip,i.map((function(e){var n=e.id,t=e.percent;return{id:n,height:0===t?0:o*(t/100)}})))}));function lp(e){return(0,s.Dv)(function(e){return(0,Nt.Z)((function(){return(0,s.cn)((function(n){var t;return np+((null===(t=n(ip).find((function(n){return n.id===e})))||void 0===t?void 0:t.height)||0)}))}),[e])}(e))}var sp=(0,s.cn)((function(e){return e(ip).map((function(e){return e.id}))}));var cp=(0,s.cn)(null,(function(e,n,t){n(op,t),n(ip,(function(e){return(0,Wn.ZP)(e,(function(e){var n=e.reduce((function(e,n){return e+n.height}),0),r=t-e.length*np,i=e.filter((function(e){return e.height>0})),o=(r-n)/i.length,a=!0,l=!1,s=void 0;try{for(var c,u=i[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=c.value;d.height=Math.max(0,d.height+o)}}catch(p){l=!0,s=p}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}}))}))}));var up=t(24814),dp=t(44044),pp={root:v.l0.px(4),rowWrap:(0,Bt.iv)([v.l0.borderRadius(8)]),row:(0,Bt.iv)([dp.gU.nofill,v.l0.rowWithGap(8),v.l0.p(4),v.l0.minHeight(32),v.l0.align.center,{transition:"initial"}]),icon:(0,Bt.iv)([v.l0.position.relative,{"& > svg":v.l0.color.foregroundDimmer}]),textWrap:[v.l0.colWithGap(2),v.l0.flex.growAndShrink(1)],heading:[v.l0.flex.growAndShrink(1),{opacity:.5}],text:[v.l0.flex.growAndShrink(1)]};function fp(e){var n=e.pane,t=yr(),r=(0,Uo.Se)(),o=r.Icon({pane:n}),l=r.getTitle(n),s=(0,El.N)(),c=Lt({paneType:n.type}),u=(0,i.Z)((0,Zs.c)({type:Tl.z.Pane,item:function(){return{type:Tl.z.NewPane,pane:n}},end:function(){s()}}),2)[1];return(0,a.tZ)(v.G7,{css:pp.root,children:(0,a.BX)(v.Tg,{innerRef:u,onClick:function(){t({pane:n})},css:pp.row,children:[(0,a.BX)(v.G7,{css:pp.icon,children:[o,c?(0,a.tZ)(zt,{small:!0}):null]}),(0,a.tZ)(v.xv,{css:pp.text,color:"dimmest",children:l})]})})}function hp(e){var n=e.title,t=e.icon,r=e.active,i=e.highlightRanges,o=e.heading,l=e.dragRef;return(0,a.tZ)(v.G7,{css:pp.root,children:(0,a.tZ)(v.Tg,{elevated:r,css:pp.rowWrap,children:(0,a.BX)(v.Tg,{innerRef:l,css:pp.row,children:[(0,a.tZ)(v.G7,{css:pp.icon,children:t}),(0,a.BX)(v.G7,{css:pp.textWrap,children:[o?(0,a.tZ)(v.xv,{variant:"small",color:"dimmest",css:pp.heading,children:o}):null,(0,a.tZ)(v.xv,{css:pp.text,color:(null===i||void 0===i?void 0:i.length)?"dimmest":"default",children:(null===i||void 0===i?void 0:i.length)?(0,a.tZ)(wn.xK,{style:{color:v.TV.foregroundDimmest},matchStyle:{fontWeight:v.TV.fontWeightBold,color:v.TV.foregroundDefault},source:n,matches:i.map((function(e){return{column:e.from,length:e.to-e.from}}))}):n})]})]})})})}function vp(e){var n=e.pane,t=e.active,r=e.highlightRanges,o=e.title,l=e.heading,s=(0,Uo.Se)().Icon({pane:n}),c=(0,i.Z)((0,Zs.c)({type:Tl.z.Pane,item:function(){return{type:Tl.z.NewPane,pane:n}}}),2)[1];return(0,a.tZ)(hp,{active:t,icon:s,title:o,heading:l,dragRef:c,highlightRanges:r})}function mp(){var e=ta(),n=e.length,t=(0,s.b9)(rp);return(0,l.useEffect)((function(){var e=Math.min(300,40*n);t({id:"dock",preferredHeight:e})}),[n,t]),(0,a.tZ)(a.HY,{children:e.map((function(e){return(0,a.tZ)(fp,{pane:e},e.type)}))})}function gp(){var e=(0,Q.Z)().presence,n=Ce(),t=(0,J.Z)({presence:e}),l=(0,i.Z)(function(e){var n=(0,R.Z)({},oe,e);return re.t(ae,n)}(),1),s=l[0];return(0,Nt.Z)((function(){return{data:{type:"context",label:"Multiplayers",icon:(0,a.tZ)(Or.Z,{})},commands:(0,r.Z)((function(){var e,r,i;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return t.length?[4,s({variables:{ids:t.map((function(e){return e.id}))}})]:[2,[]];case 1:return(e=o.sent().data)?(r=t.reduce((function(e,n){return e[n.id]=n.color,e}),{}),i=e.currentUser,[2,e.usersByIds.filter((function(e){return e.id!==(null===i||void 0===i?void 0:i.id)})).map((function(e){return{match:Lr.pl,data:{type:"action",label:e.username,icon:(0,a.tZ)(v.G7,{style:{border:"2px solid",borderColor:r[e.id],borderRadius:"50%"},children:(0,a.tZ)(ue.Z,{size:16,src:e.image,alt:e.username})}),run:function(){return n({username:e.username,id:e.id})}}}}))]):[2,[]]}}))}))}}),[t,n,s])}var Zp={type:"context",icon:(0,a.tZ)(Zo.Z,{}),label:"",description:"Search"};var yp=v.KD.div,bp=v.KD.input,wp={inputContainer:(0,Bt.iv)([v.l0.position.relative,v.l0.flex.row,v.l0.align.center,v.gU.filled,{":focus-within":{borderColor:v.TV.outlineDefault}}]),input:(0,Bt.iv)([v.l0.flex.growAndShrink(1),v.l0.p(8),v.l0.color.foregroundDefault,{paddingLeft:26,fontSize:v.TV.fontSizeDefault,outline:"0 none",backgroundColor:"transparent",borderColor:"transparent"}]),menuContainer:(0,Bt.iv)([v.l0.left(0),v.l0.width("100%"),v.l0.overflowY("auto"),v.l0.py(4),v.l0.position.absolute,{top:40,height:"calc(100% - ".concat(40,"px)"),zIndex:1}]),searchIcon:(0,Bt.iv)([v.l0.position.absolute,v.l0.top(0),v.l0.left(0),v.l0.height("100%"),v.l0.center,{paddingLeft:6,pointerEvents:"none"}]),clearButton:(0,Bt.iv)([v.l0.reset.button,v.l0.p(4),v.l0.color.foregroundDimmest,v.l0.cursor.pointer,{"&:hover":v.l0.color.foregroundDefault}])};function xp(){var e=function(){var e=(0,Q.Z)().fs,n=(0,Wo.A)(),t=(0,Fo.T)(),r=(0,kr.C)(),i=ia(),o=oa(),l=gp(),c=(0,Nt.Z)((function(){return(0,s.cn)((function(s){var c=s(i),u=s(o),d={data:{type:"context",label:"Tools",icon:(0,a.tZ)(Ho.Z,{})},commands:function(){return u}},p=(0,_o.i)({openFile:r,fs:e,shouldHideFile:t,getRecentFiles:n,lazyLoad:!0});return p.match=void 0,{data:Zp,commands:function(){return[c,p,d,l]}}}))}),[e,o,i,t,r,n,l]);return(0,s.Dv)(c)}(),n=(0,kr.C)(),t=yr(),r=(0,Gt.Z)({onSelect:function(e){if(r.combobox.reset(),r.setInputValue(""),"openFile"!==e.data.type)if("openPane"!==e.data.type)"action"!==e.data.type||e.data.run();else{var i=e.data.pane;t({pane:i})}else{var o=e.data.deeplink.path;n({path:o})}},initialCommand:e,insertSectionHeaders:!0}),i=r.combobox;return(0,a.BX)(a.HY,{children:[(0,a.BX)(yp,(0,ce.Z)((0,R.Z)({},i.getComboboxProps()),{css:wp.inputContainer,children:[(0,a.tZ)(v.G7,{css:wp.searchIcon,children:r.isLoading?(0,a.tZ)(ve.Z,{}):(0,a.tZ)(Zo.Z,{color:v.TV.foregroundDimmest})}),(0,a.tZ)(bp,(0,R.Z)({css:wp.input},r.combobox.getInputProps({value:r.inputValue,ref:r.inputRef,onChange:function(e){return r.setInputValue(e.currentTarget.value)},onKeyDown:function(e){"Escape"===e.key&&e.currentTarget.blur()},placeholder:"Search"}))),r.inputValue.length>0?(0,a.tZ)(v.G7,{css:wp.clearButton,tag:"button",children:(0,a.tZ)(Z.Z,{onClick:function(){return r.setInputValue("")}})}):null]})),(0,a.tZ)(v.Tg,(0,ce.Z)((0,R.Z)({style:{display:r.inputValue?void 0:"none"},css:wp.menuContainer},r.combobox.getMenuProps({refKey:"innerRef"})),{children:(0,a.tZ)(Cp,{items:r.itemsWithSections||[],getItemProps:i.getItemProps,highlightedIndex:i.highlightedIndex,isLoading:r.isLoading})}))]})}function kp(e){var n=(0,l.useRef)(e.items);if(!(e.items!==n.current))return null;var t=e.items.slice(0,100);return e.isLoading||0!==t.length?(0,a.tZ)(v.G7,{css:[v.l0.pt(2)],children:t.map((function(n){if(n.isSection){var t=n.name;return(0,a.tZ)(v.xv,{variant:"small",color:"dimmest",css:[v.l0.px(12),v.l0.py(4)],children:t},t)}var r=n.item,i=n.index,o=i===e.highlightedIndex,l=function(e){var n=e.data,t=e.match.render,r=n.icon,i=n.label,o=null,a=void 0;if("openFile"===n.type){var l=n.deeplink.path;o={type:(0,mr.Dp)({path:l}),data:{path:l}}}else"openPane"===n.type&&(o=n.pane);if(o&&(0,mr.KM)(o)&&o.data.path){var s=o.data.path;i=(0,pt.UO)(s);var c=(0,pt.Il)(s);c&&(a=c)}return{pane:o,title:i,heading:a,icon:r,highlightRanges:t&&"ranges"in t?t.ranges:void 0}}(r),s=l.pane,c=l.highlightRanges,u=l.icon,d=l.title,p=l.heading;return(0,a.tZ)(yp,(0,ce.Z)((0,R.Z)({css:[{cursor:"pointer"}]},e.getItemProps({item:r,index:i})),{children:s?(0,a.tZ)(vp,{active:o,highlightRanges:c,pane:s,title:d,heading:p}):(0,a.tZ)(hp,{active:o,highlightRanges:c,title:d,icon:u})}),(0,Gt.k)(r))}))}):(0,a.tZ)(v.xv,{color:"dimmest",css:[v.l0.px(8),v.l0.py(16),{textAlign:"center"}],children:"No results found"})}var Cp=(0,l.memo)(kp),Ip=t(47979),Sp=t(25582);function Rp(e){var n=e.sections,t=e.id,r=n.findIndex((function(e){return e.id===t}));if(-1===r)throw new Error("");var i=n[r],o=i.height;i.height=0;var a=r===n.length-1?n.slice(0,r).reverse():n.slice(r),l=!0,s=!1,c=void 0;try{for(var u,d=a[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var p=u.value;if(0!==p.height)return void(p.height+=o)}}catch(h){s=!0,c=h}finally{try{l||null==d.return||d.return()}finally{if(s)throw c}}var f=n[r+1];f&&(f.height=o)}var Pp=(0,s.cn)(null),Tp=(0,s.cn)(null,(function(e,n,t){var r=e(ip);if("start"!==t.type){var i=e(Pp);if(!i)throw new Error("");if("update"!==t.type)n(ip,(0,Wn.ZP)(r,(function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;a.height>=32||Rp({sections:e,id:a.id})}}catch(l){t=!0,r=l}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}}))),n(Pp,null);else{var o=e(op);n(ip,(0,Wn.ZP)(i.sectionStart,(function(e){var n=i.heightStart+t.delta;!function(e){var n=e.sections,t=e.id,r=e.totalHeight-n.reduce((function(n,t){return n+(t.height+e.headerHeight)}),0),i=n.findIndex((function(e){return e.id===t}));if(-1===i)throw new Error("Expected sectionIndex");var o=r+n.slice(i).reduce((function(e,n){return e+n.height}),0),a=n[i],l=e.height>a.height,s=Math.min(o,e.height),c=Math.abs(a.height-s);if(l){a.height=Math.max(0,s);var u=!0,d=!1,p=void 0;try{for(var f,h=n.slice(i+1)[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var v=f.value;if(0!==v.height){if(!(v.height<c)){v.height-=c;break}c-=v.height,v.height=0}}}catch(I){d=!0,p=I}finally{try{u||null==h.return||h.return()}finally{if(d)throw p}}}else{var m=n[i+1];if(e.height>=0)return a.height=e.height,void(m&&(m.height+=c));var g=a.height;a.height=0;var Z=-1*e.height,y=!0,b=!1,w=void 0;try{for(var x,k=n.slice(0,i).reverse()[Symbol.iterator]();!(y=(x=k.next()).done);y=!0){var C=x.value;if(C.height>Z){g+=Z,C.height-=Z;break}g+=C.height,Z-=C.height,C.height=0}}catch(I){b=!0,w=I}finally{try{y||null==k.return||k.return()}finally{if(b)throw w}}m&&(m.height+=g)}}({headerHeight:np,totalHeight:o,sections:e,id:i.id,height:n})})))}}else{var a=r.find((function(e){return e.id===t.id}));if(!a)throw new Error("");n(Pp,{id:t.id,heightStart:a.height,sectionStart:r})}}));function Ep(e){var n=e.id,t=(0,Nt.Z)((function(){return(0,s.cn)((function(e){var t;return(null===(t=e(Pp))||void 0===t?void 0:t.id)===n}))}),[n]);return(0,s.Dv)(t)}var Dp=(0,s.cn)((function(e){return e($n._E)&&!e(Pp)}));var Up=(0,s.cn)(null,(function(e,n,t){var r=e(ip),i=e(tp)[t],o=r.find((function(e){return e.id===t}));if(!o)throw new Error("");0===o.height?n(ip,(0,Wn.ZP)(r,(function(n){!function(e){var n=e.sections,t=e.preferredHeight,r=e.id,i=n.findIndex((function(e){return e.id===r}));if(-1===i)throw new Error("Expected sectionIndex");var o=n.reduce((function(n,t){return n+(t.height+e.headerHeight)}),0),a=e.totalHeight-o,l=n[i];if(a>0)l.height=a;else{var s=n.slice(i+1).find((function(e){return e.height>0}))||n.slice(0,i).reverse().find((function(e){return e.height>0}));if(s){if(void 0!==t&&t<s.height)return l.height=t,void(s.height-=t);l.height=s.height,s.height=0}}}({sections:n,id:t,totalHeight:e(op),headerHeight:np,preferredHeight:i})}))):(n(rp,{id:o.id,preferredHeight:o.height}),n(ip,(0,Wn.ZP)(r,(function(e){return Rp({sections:e,id:t})}))))}));var _p=t(72466),Bp=t(86851),Mp=t(9252),Gp=t(38935),Ap=t(25741),Np=t(42231),Xp=t(9211),Op=t(69453),Lp=t(94135),jp=(0,l.createContext)(null);function zp(){var e=(0,l.useContext)(jp);if(!e)throw new Error("Expected ref");return e}var Wp=t(58360),Fp={root:(0,Bt.iv)([v.l0.rowWithGap(4),v.l0.pr(2)])};function Hp(){var e=(0,ke.Z)(),n=(0,Q.Z)().session,t=zp(),r=(0,l.useRef)(null),i=(0,l.useRef)(null),o=(0,Ap.Z)(),s=(0,dr.BN)(),c=(0,Np.Z)(),u=(0,Lp.z)(),d=[{label:Gp.dk[Gp.st.UploadFile],run:function(){r.current&&(r.current.click(),(0,Op.Z)({replId:e,action:"uploaded",fileType:dt.Tv.File}))}}];return c&&d.push({label:Gp.dk[Gp.st.UploadFolder],run:function(){i.current&&(i.current.click(),(0,Op.Z)({replId:e,action:"uploaded",fileType:dt.Tv.Directory}))}}),d.push({label:Gp.dk[Gp.st.OpenPane],run:function(){s({pane:{type:"commands",data:{autoFocus:!0}},edge:"left"})}},{label:Gp.dk[Gp.st.DownloadZip],run:u},{label:Gp.dk[o?Gp.st.HideHiddenFiles:Gp.st.ShowHiddenFiles],run:function(){n.setAreHiddenFilesVisible(!o)}}),(0,a.BX)(v.G7,{children:[(0,a.tZ)(Xp.Q,{fileUploadInputRef:r,dirUploadInputRef:i,uploadFiles:function(e){var n;return null===(n=t.current)||void 0===n?void 0:n.uploadFiles(e)}}),(0,a.BX)(v.G7,{css:Fp.root,children:[(0,a.tZ)(v.hU,{alt:"New file",tooltipPlacement:"top",onClick:function(){var e;return null===(e=t.current)||void 0===e?void 0:e.addFileType(dt.Tv.File)},children:(0,a.tZ)(Bp.Z,{})}),(0,a.tZ)(v.hU,{alt:"New folder",tooltipPlacement:"top",onClick:function(){var e;return null===(e=t.current)||void 0===e?void 0:e.addFileType(dt.Tv.Directory)},children:(0,a.tZ)(Mp.Z,{})}),(0,a.tZ)(js.Z,{resetOnSelect:!0,label:"File Actions",items:d,onItemClick:function(e){e.run()}})]})]})}function Vp(){var e=zp(),n=(0,Wp.p)();return(0,a.tZ)(v.G7,{css:[v.l0.position.absolute,v.l0.width("100%"),v.l0.height("100%")],children:(0,a.tZ)(Sp.Z,{ref:e,filetreeApi:n,showHeader:!1,showResources:!1})})}function $p(){var e=(0,kr.C)();return(0,a.tZ)(_p.Z,{onFileOpen:function(n){return e({path:n})}})}var qp={kaboom:{title:"Kaboom",content:(0,a.tZ)($p,{})},files:{title:"Files",controls:(0,a.tZ)(Hp,{}),content:(0,a.tZ)(Vp,{})},dock:{title:"Dock",content:(0,a.tZ)(mp,{})}},Kp={root:(0,Bt.iv)([v.l0.rowWithGap(4),v.l0.align.center,v.l0.height(np)]),header:(0,Bt.iv)([v.l0.pl(8),v.l0.flex.growAndShrink(1),v.l0.rowWithGap(4),v.l0.align.center,v.l0.cursor.pointer]),title:(0,Bt.iv)([v.l0.fontWeight.medium]),border:(0,Bt.iv)([v.l0.position.absolute,v.l0.top(0),v.l0.right(0),v.l0.width("calc(100% - ".concat(v.TV.space8,")")),{pointerEvents:"none",borderTop:"1px solid",borderColor:v.TV.outlineDimmest}]),content:(0,Bt.iv)([v.l0.flex.growAndShrink(1),v.l0.overflowY("auto")])},Yp=(0,l.memo)((function(e){var n=function(e){var n=(0,Nt.Z)((function(){return(0,s.cn)((function(n){var t;return 0===(null===(t=n(ip).find((function(n){return n.id===e})))||void 0===t?void 0:t.height)}))}),[e]);return(0,s.Dv)(n)}(e.id),t=(0,s.b9)(Up),r=qp[e.id],i=r.title,o=r.controls;return(0,a.BX)(v.G7,{css:Kp.root,children:[(0,a.BX)(v.G7,{onClick:function(){return t(e.id)},css:Kp.header,children:[(0,a.tZ)(jl.Z,{rotate:n?0:90}),(0,a.tZ)(v.xv,{css:Kp.title,children:i})]}),o||null]})})),Qp=(0,l.memo)((function(e){var n=qp[e.id].content;return(0,a.tZ)(v.G7,{css:[Kp.content,"files"===e.id?v.l0.position.relative:{}],children:(0,a.tZ)(v.G7,{css:v.l0.pb(8),children:n})})})),Jp={root:(0,Bt.iv)([v.l0.position.relative,v.l0.height(0),v.l0.width("100%"),{zIndex:1,"&:hover > div":{transform:"scaleY(2)"},cursor:"ns-resize"}]),hoverArea:(0,Bt.iv)([v.l0.position.relative,v.l0.height(8),v.l0.top(-4)])},ef=(0,l.memo)((function(e){var n=(0,s.b9)(Tp),t=Ep({id:e.id});return(0,a.tZ)(v.G7,{css:Jp.root,onPointerDown:function(t){ml(t,{start:function(){n({type:"start",id:e.id})},move:function(e){var t=e.delta;n({type:"update",delta:t.y})},end:function(e){var t=e.delta;n({type:"end",delta:t.y})}})},children:(0,a.tZ)(v.G7,{style:t?{transform:"scaleY(100)"}:void 0,css:Jp.hoverArea})})}));function nf(e){var n=lp(e.id),t=(0,s.Dv)(Dp),r=Ep({id:e.id});return(0,a.BX)(v.G7,{style:{zIndex:r?2:void 0,height:n,position:"relative",transition:t?"height 120ms ease-out":void 0},children:[e.border?(0,a.tZ)(v.G7,{css:Kp.border}):null,(0,a.tZ)(Yp,{id:e.id}),(0,a.tZ)(Qp,{id:e.id}),e.resizable?(0,a.tZ)(ef,{id:e.id}):null]})}var tf={container:(0,Bt.iv)([v.l0.position.absolute,v.l0.top(0),v.l0.left(0),v.l0.width("100%"),v.l0.height("100%"),v.l0.minWidth(ep.ih)]),header:(0,Bt.iv)([v.l0.pl(8),{zIndex:3}]),content:(0,Bt.iv)([v.l0.flex.growAndShrink(1)]),footer:(0,Bt.iv)([v.l0.pl(8),{zIndex:2}]),resources:(0,Bt.iv)([v.l0.justify.center,v.l0.position.relative,{"& > div":[{borderColor:v.TV.outlineDimmest},v.l0.px(0),v.l0.pt(16)]}]),help:(0,Bt.iv)([v.l0.pb(8),v.l0.flex.growAndShrink(1),v.l0.justify.center])};function rf(){return(0,a.BX)(v.G7,{css:tf.footer,children:[(0,a.tZ)(v.G7,{css:tf.resources,children:(0,a.tZ)(up.w,{})}),(0,a.tZ)(v.G7,{css:tf.help,children:(0,a.tZ)(Sa.Z,{big:!0})})]})}function of(){var e=(0,s.b9)(ap),n=(0,s.b9)(cp),t=(0,Ip.oj)(),r=(0,l.useRef)(null);(0,l.useEffect)((function(){if(r.current){var n=r.current.getBoundingClientRect().height;e(t?{height:n,sections:[{id:"files",percent:0},{id:"kaboom",percent:60},{id:"dock",percent:40}]}:{height:n,sections:[{id:"files",percent:60},{id:"dock",percent:40}]})}}),[e,t]);var i=(0,yc.Z)((function(e){e&&n(e.height)}),{wait:100,type:"debounce"});return(0,ws.l)(i,r)}var af=(0,l.memo)((function(){var e=(0,s.Dv)(sp),n=of(),t=(0,l.useRef)(null),r=e[e.length-1];return(0,a.tZ)(jp.Provider,{value:t,children:(0,a.BX)(v.G7,{css:tf.container,children:[(0,a.tZ)(v.G7,{css:tf.header,children:(0,a.tZ)(xp,{})}),(0,a.tZ)(v.G7,{css:tf.content,innerRef:n,children:e.map((function(e,n){return(0,a.tZ)(nf,{id:e,resizable:e!==r,border:0!==n},e)}))}),(0,a.tZ)(rf,{})]})})})),lf=v.KD.div,sf=(0,Bt.iv)([v.l0.borderRadius(0,8,8,0),v.l0.height("calc(100% - 16px)"),v.l0.top(8),v.l0.position.relative,v.l0.flex.growAndShrink(1),v.l0.overflowY("auto"),v.l0.overflowX("hidden")]);function cf(){var e=(0,ep.Iu)(),n=(0,Uo.Se)().Content;return(0,a.tZ)(v.Tg,{elevated:!0,css:sf,children:(0,a.tZ)(n,{pane:e,options:{paneId:"",isHidden:!1,replacePane:function(){},openPane:function(){}}})})}var uf=(0,l.memo)(cf),df=(0,Bt.iv)([v.l0.position.absolute,v.l0.center,$l,{cursor:"ew-resize",":hover":{zIndex:bl.MI.gutterHovered}}]),pf={default:(0,Bt.iv)([v.l0.height(24),v.l0.width(2),Jl]),active:(0,Bt.iv)([v.l0.height("100%"),v.l0.width(1),v.l0.backgroundColor.accentPrimaryDefault]),shared:(0,Bt.iv)([v.l0.borderRadius(4),{transitionProperty:"width, height, background-color",transitionTimingFunction:"ease-out"}])},ff=(0,Bt.iv)([v.l0.coverContainer,{":hover":{transform:"scaleX(4)"}}]),hf=(0,Bt.iv)([v.l0.position.absolute,v.l0.height("200vh"),v.l0.width("200vw"),{pointerEvents:"none"}]);function vf(){var e=(0,Rl.og)(),n=(0,Rl.TN)(),t=(0,Rl.EU)(),r=(0,bl.bJ)(),i=(0,Yr.T)();return(0,a.BX)(lf,{css:[df,{zIndex:t?r.active:r.normal}],style:{width:e.width,height:e.height,transform:"translate(".concat(e.x,"px, ").concat(e.y,"px)")},onPointerDown:function(e){ml(e,{start:function(){n.start()},move:function(e){var t=e.delta;n.update({deltaX:t.x})},end:function(){n.end()}})},children:[(0,a.tZ)(v.G7,{className:"grip-line",style:{transitionDuration:i?"0s":"".concat(ts(e.height),"s")},css:[t?pf.active:pf.default,pf.shared]}),(0,a.tZ)(v.G7,{css:t?hf:ff})]})}var mf=(0,Bt.iv)([v.l0.height("100%"),v.l0.position.absolute,v.l0.top(0),v.l0.left(0),v.l0.flex.row]),gf=(0,Bt.iv)([mf,v.l0.flex.growAndShrink(1),v.l0.overflow("auto")]);function Zf(){var e=(0,ep.Or)(),n=(0,cr.Q)("flagLayoutNavigator"),t=0===e,r=(0,qi.Z)(Wr.y.Sidepane),i=(0,qo.Z)().isTutorial?null:r;return(0,a.BX)(a.HY,{children:[(0,a.BX)(v.G7,{css:n?gf:mf,style:{width:e,visibility:t?"hidden":void 0},innerRef:i,children:[t||n?null:(0,a.tZ)(uf,{}),n?(0,a.tZ)(af,{}):null]}),(0,a.tZ)(vf,{})]})}var yf=(0,l.memo)(Zf),bf=t(18751),wf=function(e){var n=e.isOpen,t=(0,c.useRouter)();return(0,a.tZ)(g.Z,{isOpen:n,centered:!0,onRequestClose:function(){},maxWidth:600,children:(0,a.BX)(y.Z,{css:[w.l0.colWithGap(32)],children:[(0,a.BX)(y.Z,{css:[w.l0.rowWithGap(16),w.l0.align.center],children:[(0,a.tZ)(bf.Z,{size:24,css:[w.l0.color.orangeStrongest]}),(0,a.tZ)(b.h,{level:2,variant:"headerDefault",children:"You can\u2019t join this Repl from Firewall Mode."})]}),(0,a.BX)(y.Z,{css:[w.l0.pr(32),w.l0.colWithGap(16)],children:[(0,a.tZ)(b.x,{multiline:!0,children:"This Repl was started by someone not in Firewall Mode. If you would like to join, please do one of the following:"}),(0,a.BX)(y.Z,{css:[w.l0.colWithGap(16),w.l0.pl(16)],children:[(0,a.tZ)(b.x,{children:"\u2022 Exit Firewall Mode."}),(0,a.tZ)(b.x,{children:"\u2022 Ask the creator to open this Repl in Firewall Mode."})]})]}),(0,a.BX)(y.Z,{css:[w.l0.rowWithGap(16),w.l0.justify.end],children:[(0,a.tZ)(m.ZP,{text:"Exit Firewall Mode",onClick:function(){window.location.href="https://www.replit.com".concat(t.asPath)}}),(0,a.tZ)(m.ZP,{text:"Leave",onClick:function(){t.push("/home","~/")}})]})]})})},xf=t(2146),kf=t(87138),Cf=new Date("2022-12-01"),If=new Date("2022-10-20");function Sf(){var e,n=(0,kf.lg)(),t=n.data,r=n.loading,i=n.error,o=(0,xf.o)("workspace-history-announcement"),l=o.isLoading,s=o.isDone,c=o.setAsDone,u=new Date,d=(null===t||void 0===t||null===(e=t.currentUser)||void 0===e?void 0:e.timeCreated)?new Date(t.currentUser.timeCreated):null;return r||l||s||i||!d||Cf<u||If<d?null:(0,a.tZ)(v.u_,{centered:!0,isOpen:!s,onRequestClose:function(){return c()},children:(0,a.BX)(v.G7,{css:[v.l0.colWithGap(16)],children:[(0,a.tZ)(v.xv,{variant:"headerDefault",children:"History in the Workspace"}),(0,a.tZ)(v.xv,{multiline:!0,children:"Now, you can scrub through any file history directly in the workspace. You'll see a History button in the bottom right of any file."}),(0,a.tZ)(v.G7,{css:[v.l0.p(4),v.l0.borderRadius(8),v.l0.backgroundColor.backgroundRoot,{border:"solid 1px ".concat(v.TV.backgroundHigher)}],children:(0,a.tZ)("video",{css:v.l0.borderRadius(8),src:"/public/videos/history-demo-new.mp4",autoPlay:!0,muted:!0,playsInline:!0,loop:!0})}),(0,a.tZ)(v.G7,{css:[v.l0.display.flex,v.l0.align.end],children:(0,a.tZ)(v.zx,{text:"Continue Coding",colorway:"primary",onClick:function(){return c()}})})]})})}var Rf={id:"workspace-desktop-tour",steps:[{id:Wr.y.Editor,title:"Code Editor",content:"This is where you write code. Code describes how programs work. The editor helps you write code, by coloring certain types, and giving you suggestions when you type. Click on one of the examples to see how code looks."},{id:Wr.y.Examples,title:"Examples",content:"Click on one of these examples to insert into your editor",autoSkipIfNoTarget:!0},{id:Wr.y.Run,title:"Running Code",content:'This button takes your code and executes, or "runs", it. You can also run your code using the '.concat(qa.V?"Cmd":"Ctrl","+Return shortcut.")},{id:Wr.y.Output,title:"Program Output",content:"This is where the results of the code appear when you run it. Results can be console output (just text), a website, game, or graphics display, depending on the programming language and setup."},{id:Wr.y.Sidepane,title:"Sidepane & Files",content:function(){return(0,a.BX)(v.G7,{css:[{display:"inline"}],children:["The sidepane contains different features for working on your program, like the file-tree ",(0,a.tZ)(Ia.Z,{}),". Sometimes you can also find a tutorial"," ",(0,a.tZ)(hi.Z,{})," and tools like Version Control and Debugger. There\u2019s usually a starter file in the file-tree, but you can make more files and folders as your project grows."]})}},{id:Wr.y.Share,title:"Invite & Collaborate",content:"Invite others to your Repl to collaborate and work together at the same time."}]};function Pf(e){var n=e.src,t=e.autoPlay,r=void 0===t||t,i=e.loop,o=void 0===i||i,l=e.width,s=void 0===l?280:l;return(0,a.tZ)(v.G7,{css:[v.l0.p(4),v.l0.borderRadius(8),v.l0.width(s),v.l0.backgroundColor.backgroundRoot,{border:"solid 1px ".concat(v.TV.outlineDimmest)}],children:(0,a.tZ)("video",{style:{width:"100%"},css:v.l0.borderRadius(8),src:n,autoPlay:r,loop:o,playsInline:!0,muted:!0})})}var Tf=function(e){return"/public/videos/workspace-onboarding/".concat(e,".mp4")},Ef={id:"workspace-desktop-new-user-tour",steps:[{id:Wr.y.Welcome,isModal:!0,title:"Welcome to the Workspace",content:function(){return(0,a.tZ)(v.G7,{css:[v.l0.maxWidth(400)],children:(0,a.BX)(v.xv,{multiline:!0,children:["The Workspace is where you create projects on Replit. These are called"," ",(0,a.tZ)("strong",{children:"Repls."}),(0,a.tZ)("br",{}),"Let's explore around!"]})})}},{id:Wr.y.Editor,title:"Code Editor",content:function(){return(0,a.BX)(v.G7,{css:[v.l0.width("100%"),v.l0.center,v.l0.position.relative],children:[(0,a.tZ)(Pf,{src:Tf("editor"),autoPlay:!0,loop:!0}),(0,a.tZ)(v.G7,{css:[v.l0.colWithGap(8),v.l0.width("100%"),v.l0.py(8)],children:(0,a.tZ)(v.xv,{multiline:!0,children:"This is where you write code. The editor helps you by giving you suggestions and coloring your code."})})]})}},{id:Wr.y.Examples,title:"Examples",content:"Click on one of these examples to insert into your editor",autoSkipIfNoTarget:!0},{id:Wr.y.Run,title:"Run Button",content:function(){return(0,a.BX)(v.G7,{css:[v.l0.width("100%"),v.l0.center,v.l0.position.relative],children:[(0,a.tZ)(Pf,{src:Tf("run-button"),autoPlay:!0,loop:!0}),(0,a.tZ)(v.G7,{css:[v.l0.colWithGap(8),v.l0.width("100%"),v.l0.py(8)],children:(0,a.tZ)(v.xv,{multiline:!0,children:"Tap the Run button to \u201crun\u201d your code and see its output."})})]})}},{id:Wr.y.Output,title:"Output",content:function(){return(0,a.BX)(v.G7,{css:[v.l0.width("100%"),v.l0.center,v.l0.position.relative],children:[(0,a.tZ)(Pf,{src:Tf("output"),autoPlay:!0,loop:!0}),(0,a.tZ)(v.G7,{css:[v.l0.colWithGap(8),v.l0.width("100%"),v.l0.py(8)],children:(0,a.tZ)(v.xv,{multiline:!0,children:"This is where your run output appears. This can be text, websites, games, and more depending on the template you\u2019re using."})})]})}},{id:Wr.y.Sidepane,title:"Sidebar",content:function(){return(0,a.BX)(v.G7,{css:[v.l0.width("100%"),v.l0.center,v.l0.position.relative],children:[(0,a.tZ)(Pf,{src:Tf("sidebar"),autoPlay:!0,loop:!0}),(0,a.BX)(v.G7,{css:[v.l0.colWithGap(8),v.l0.width("100%"),v.l0.p(8)],children:[(0,a.BX)(v.xv,{multiline:!0,children:[(0,a.tZ)("strong",{children:"Files"})," is where all of your Repl\u2019s code is."]}),(0,a.BX)(v.xv,{multiline:!0,children:[(0,a.tZ)("strong",{children:"Dock"})," is where other tools are like Packager, Debugger, and Chat."]}),(0,a.tZ)(v.xv,{multiline:!0,children:"You can drag and drop any file or tool. All tools open as tabs instead of opening in the sidebar."})]})]})}},{id:Wr.y.Share,title:"Invite & Collaborate",content:function(){return(0,a.BX)(v.G7,{css:[v.l0.width("100%"),v.l0.center,v.l0.position.relative],children:[(0,a.tZ)(Pf,{src:Tf("invite-multiplayer"),autoPlay:!0,loop:!0}),(0,a.tZ)(v.G7,{css:[v.l0.colWithGap(8),v.l0.width("100%"),v.l0.py(8)],children:(0,a.tZ)(v.xv,{multiline:!0,children:"Invite others to your Repl to collaborate and work together at the same time."})})]})}}]},Df={id:"workspace-desktop-sidebar-tour",steps:[{id:Wr.y.SidebarAnnouncement,title:"The New Workspace",isModal:!0,content:function(){return(0,a.tZ)(v.G7,{css:[v.l0.maxWidth(400)],children:(0,a.tZ)(v.G7,{css:[v.l0.width("100%"),v.l0.py(8)],children:(0,a.tZ)(v.xv,{multiline:!0,children:"If you\u2019re seeing this, that means you get to test the new Workspace redesign. It has a few key differences we want to show you!"})})})}},{id:Wr.y.Sidepane,title:"Sidebar",content:function(){return(0,a.BX)(v.G7,{css:[v.l0.width("100%"),v.l0.center,v.l0.position.relative],children:[(0,a.tZ)(Pf,{src:(e="sidebar","/public/videos/workspace-onboarding/".concat(e,".mp4")),autoPlay:!0,loop:!0}),(0,a.BX)(v.G7,{css:[v.l0.colWithGap(8),v.l0.width("100%"),v.l0.p(8)],children:[(0,a.BX)(v.xv,{multiline:!0,children:[(0,a.tZ)("strong",{children:"Files"})," is where all of your Repl\u2019s code is."]}),(0,a.BX)(v.xv,{multiline:!0,children:[(0,a.tZ)("strong",{children:"Dock"})," is where other tools are like Packager, Debugger, and Chat."]}),(0,a.tZ)(v.xv,{multiline:!0,children:"You can drag and drop any file or tool. All tools open as tabs instead of opening in the sidebar."})]})]});var e}},{id:Wr.y.SidebarButton,title:"Sidebar Button",content:function(){return(0,a.tZ)(v.G7,{css:[v.l0.width("100%"),v.l0.center,v.l0.position.relative],children:(0,a.tZ)(v.G7,{css:[v.l0.width("100%"),v.l0.py(8)],children:(0,a.tZ)(v.xv,{multiline:!0,children:"Tapping on this quickly opens and closes the entire sidebar."})})})}},{id:Wr.y.GlobalNavButton,title:"Navigation Menu",content:function(){return(0,a.tZ)(v.G7,{css:[v.l0.width("100%"),v.l0.center,v.l0.position.relative],children:(0,a.tZ)(v.G7,{css:[v.l0.width("100%"),v.l0.py(8)],children:(0,a.tZ)(v.xv,{multiline:!0,children:"Tapping on this lets you navigate to other pages on Replit."})})})}},{id:Wr.y.NotificationsButton,title:"Notifications",content:function(){return(0,a.tZ)(v.G7,{children:(0,a.tZ)(v.G7,{css:[v.l0.width("100%"),v.l0.py(8)],children:(0,a.BX)(v.xv,{multiline:!0,children:["You can access all notifications from this menu."," "]})})})}},{id:Wr.y.AvatarButton,title:"Profile Menu",content:function(){return(0,a.tZ)(v.G7,{children:(0,a.tZ)(v.G7,{css:[v.l0.width("100%"),v.l0.py(8)],children:(0,a.tZ)(v.xv,{multiline:!0,children:"You can access your profile and account settings from this menu."})})})}},{id:Wr.y.Feedback,title:"That's all!",isModal:!0,content:function(){return(0,a.tZ)(v.G7,{css:[v.l0.maxWidth(400)],children:(0,a.tZ)(v.G7,{css:[v.l0.width("100%"),v.l0.py(8)],children:(0,a.BX)(v.xv,{multiline:!0,children:["This is the start of many more future updates to the Workspace to help increase the flexibility of Replit.",(0,a.tZ)("br",{}),(0,a.tZ)("br",{}),"If you'd like to leave some feedback, you can"," ",(0,a.tZ)("a",{href:"https://replit.com/@tyler/The-New-Workspace?v=1",target:"_blank",children:(0,a.tZ)("strong",{children:"leave a comment on this Repl"})}),". Happy coding!"]})})})}}]};var Uf=t(86518),_f=t(62913),Bf=t(38630),Mf=t(9517),Gf=t(60081),Af={modal:[v.l0.overflow("hidden"),v.l0.minHeight(540),v.l0.flex.column,{"& > div:first-of-type > div:first-of-type > button":[v.l0.zIndex(2)],"& > div:first-of-type":[v.l0.flex.growAndShrink(1)]}],container:[v.l0.flex.column,v.l0.flex.growAndShrink(1),{gap:0}],imageContainer:[v.l0.flex.growAndShrink(1),v.l0.borderRadius(12),v.l0.overflow("hidden"),{flexBasis:"100%"}],contentContainer:[v.l0.p(16),v.l0.colWithGap(16),v.l0.flex.growAndShrink(1)]},Nf=function(e){var n=e.announcement,t=n.tourId,r=n.slides,i=n.date,o=new Date(i.valueOf()+60*i.getTimezoneOffset()*1e3),s=(0,Gf.Z)(o,"MMMM d, yyyy"),c=(0,xf.o)(t),u=c.isLoading,d=c.isDone,p=c.setAsDone,f=(0,l.useState)(0),h=f[0],m=f[1],g=r[h];return d||u?null:(0,a.tZ)(v.u_,{centered:!0,isOpen:!d,onRequestClose:p,noPadding:!0,maxWidth:420,css:Af.modal,children:(0,a.BX)(v.Tg,{css:Af.container,elevated:!0,children:[(0,a.BX)(v.Tg,{elevated:!0,css:Af.contentContainer,children:[(0,a.BX)(v.G7,{css:[v.l0.colWithGap(4)],children:[(0,a.tZ)(v.xv,{variant:"headerDefault",children:"What's New"}),(0,a.tZ)(v.xv,{variant:"small",color:"dimmer",children:s})]}),(0,a.tZ)(v.G7,{css:[v.l0.minHeight(300)],children:(0,a.tZ)(v.G7,{css:[Af.imageContainer,g.backgroundColor],style:{padding:function(){switch(g.position){case"left":return"12px 12px 0 0";case"right":return"12px 0 0 12px";case"center":return"12px 12px 0 12px"}}()},children:(0,a.tZ)(v.G7,{css:{"& > div":{position:"unset !important"}},style:{maxWidth:"100%",position:"relative",flexGrow:1,flexShrink:1,width:"100%",overflow:"hidden",borderRadius:function(){switch(g.position){case"left":return"0px 12px 0px 0px";case"right":return"12px 0px 0px 0px";case"center":return"12px 12px 0px 0px"}}()},children:(0,a.tZ)(_f.Z,{src:g.backgroundImage,layout:"fill",objectFit:"contain",objectPosition:function(){switch(g.position){case"left":return"bottom left";case"right":return"bottom right";case"center":return"bottom center"}}(),style:{pointerEvents:"none",userSelect:"none",width:"100% !important",position:"relative !important",height:"unset !important"},alt:""})})})}),(0,a.tZ)(v.G7,{css:[v.l0.colWithGap(12)],children:(0,a.BX)(v.xv,{multiline:!0,variant:"subheadDefault",children:[g.title," ",(0,a.BX)(v.xv,{multiline:!0,variant:"subheadDefault",color:"dimmer",css:[v.l0.fontWeight.normal],children:["\u2014 ",g.subtitle]})]})})]}),(0,a.tZ)(v.Tg,{css:[v.l0.p(16)],children:(0,a.BX)(v.G7,{css:[v.l0.flex.row,v.l0.align.center,v.l0.justify.spaceBetween,v.l0.width("100%")],children:[r.length>1?(0,a.BX)(a.HY,{children:[(0,a.tZ)(v.zx,{disabled:0===h,onClick:function(){m(0===h?r.length-1:h-1)},iconLeft:(0,a.tZ)(Bf.Z,{}),text:"Previous"}),(0,a.BX)(v.xv,{variant:"small",color:"dimmer",css:{margin:"auto"},children:[h+1," of ",r.length]})]}):null,h===r.length-1?(0,a.tZ)(v.zx,{text:"Got it",iconRight:(0,a.tZ)(x.Z,{}),colorway:"primary",onClick:p,css:[1===r.length&&{marginLeft:"auto"}]}):(0,a.tZ)(v.zx,{onClick:function(){h===r.length-1?m(0):m(h+1)},text:"Next",iconRight:(0,a.tZ)(Mf.Z,{}),colorway:"primary"})]})})]})})},Xf={slides:[{title:"Repl Chat Tab",subtitle:"Chat has a new home. Open it from the sidebar or the New Tab menu.",backgroundImage:"/public/images/threads/chat.png",backgroundColor:v.l0.backgroundColor.yellowStrongest,position:"center"},{title:"Inline Threads",subtitle:(0,a.BX)("span",{css:{".shortcut":{gridGap:"var(--space-2)"},".shortcut div":[v.l0.backgroundColor.backgroundHighest,v.l0.color.foregroundDefault,{border:"1px solid var(--outline-default)"}]},children:["Right click code to start a discussion, or select code and use the hotkey"," ",(0,a.tZ)(qt.Z,{shortcut:{key:"/",altKey:!0},small:!0})]}),backgroundImage:"/public/images/threads/inline.png",backgroundColor:v.l0.backgroundColor.blurpleStronger,position:"center"},{title:"Threads Inbox Tab",subtitle:"All your threads in one place. Open the inbox from the sidebar or the New Tab menu.",backgroundImage:"/public/images/threads/inbox.png",backgroundColor:v.l0.backgroundColor.blueStronger,position:"center"}],tourId:"threads-2-announcement",date:new Date("2022-11-08")};function Of(){var e=(0,po.c)("threads-feature-announcement"),n=e.enabled;return e.loading||!n?null:(0,a.tZ)(Nf,{announcement:Xf})}function Lf(e){var n=e.repl,t=e.currentUser,r=function(e){var n=e.repl,t=(0,c.useRouter)(),r=(0,kr.C)(),i=(0,et.IY)(),o=(0,l.useState)(!1),a=o[0],s=o[1];return{services:(0,l.useState)((function(){return(0,To.Z)({runnerMode:"html"===n.language?"html":"shellrunner",onUnrecoverableError:function(e){if(e.message.toLowerCase().includes("repl not found"))t.push("/home","~/");else{var n={replenvironmentservices:!0,layoutv2:!0};ka.error(e),Ri.Tb(e,{tags:n}),i({error:e,tags:n})}},openFile:r,onFirewallDenied:function(){return s(!0)}})}))[0],ui:(0,l.useState)((function(){return(0,Uo.fK)({config:xa()})}))[0],isFirewallDenied:a}}({repl:n}),i=r.services,o=r.ui,u=r.isFirewallDenied,d=(0,s.Dv)($n.dD),p=function(){var e=(0,Bc.X)(),n=(0,lr.Z)(e),t=(0,l.useState)(!e),r=t[0],i=t[1],o=Boolean(e&&e.isLoading);return(0,l.useEffect)((function(){if(!o){var e=n.current;e&&i(Boolean(null===e||void 0===e?void 0:e.isDone))}}),[o]),r}(),f=t.flagLayoutNavigator;return(0,a.BX)(za,{ui:o,services:i,replId:n.id,replLanguage:n.language,children:[(0,a.tZ)(zr.h,{}),(0,a.tZ)(Wc,{}),(0,a.tZ)(bc.Z,{}),(0,a.tZ)(Po,{repl:n,currentUser:t}),(0,a.tZ)(Xr,{}),(0,a.tZ)(Fd,{}),(0,a.tZ)(Od,{repl:n,currentUser:t}),(0,a.tZ)(gu.ZP,{}),f?(0,a.tZ)(Hf,{flagLayoutNavigator:!0}):(0,a.BX)(v.G7,{css:[v.l0.flex.row,Ff],children:[(0,a.tZ)(v.G7,{css:[v.l0.py(8),v.l0.pl(8),!d&&v.l0.visibility.hidden],children:(0,a.tZ)(Xa,{})}),(0,a.tZ)(Hf,{})]}),(0,a.tZ)(Nc,{container:i.container}),(0,a.tZ)(hu,{}),(0,a.tZ)(mu,{}),p?(0,a.tZ)(Sf,{}):null,p?(0,a.tZ)(Of,{}):null,(0,a.tZ)(zf,{isMultiplayerSession:n.multiplayers.length>0}),(0,a.tZ)(jf,{image:t.image,username:t.username}),(0,a.tZ)(wf,{isOpen:u}),(0,a.tZ)(qd,{})]})}function jf(e){var n=e.image,t=e.username,r=(0,i.Z)((0,et.yF)(),2),o=r[0],s=r[1],c=(0,fr.n7)();return(0,l.useEffect)((function(){o&&c({})}),[o,c]),o?(0,a.tZ)(u.Z,{devHide:function(){return s(null)},eventId:o,currentUserImage:n,currentUserUsername:t}):null}function zf(e){var n=function(e){var n=(0,i.Z)(l.useState(!1),2),t=n[0],a=n[1],s=(0,Bc.X)(),c=s&&!s.isDone&&!s.isLoading;return l.useEffect((function(){c||e&&"default"===Ic()&&a(!0)}),[e,c]),{shouldShowModal:t,hideModal:l.useCallback((function(){Dc(!0),a(!1)}),[]),confirm:l.useCallback((0,r.Z)((function(){return(0,o.__generator)(this,(function(e){switch(e.label){case 0:return[4,Pc()];case 1:return e.sent(),a(!1),[2]}}))})),[])}}(e.isMultiplayerSession),t=n.shouldShowModal,s=n.hideModal,c=n.confirm;return t?(0,a.tZ)(k,{onCancel:s,onConfirm:c}):null}var Wf=v.KD.div,Ff=(0,Bt.iv)([v.l0.height("calc(100% - ".concat(wi.Mz,"px)")),v.l0.width("100%"),v.l0.top(wi.Mz),v.l0.left(0),v.l0.position.absolute]);function Hf(e){var n=function(){var e=(0,s.b9)(Qn.rR),n=(0,l.useRef)(null),t=(0,yc.Z)((function(t){var r=t.width,i=t.height;if(r&&i&&n.current){var o=n.current.getBoundingClientRect(),a=o.top,l=o.left;e({width:r,height:i,x:l,y:a})}}));return(0,l.useCallback)((function(e){n.current=e,t(e)}),[t])}(),t=(0,s.Dv)($n.dD),r=(0,s.Dv)(qn.gg),i=(0,s.Dv)(qn.g3),o=(0,s.Dv)(qn.If);return(0,a.tZ)(Wf,{ref:n,css:e.flagLayoutNavigator?Ff:[v.l0.position.relative,v.l0.flex.growAndShrink(1)],children:t?(0,a.BX)(a.HY,{children:[(0,a.tZ)(yf,{}),i.map((function(e){return(0,a.tZ)(us,{handleId:e},e)})),o.map((function(e){return(0,a.tZ)(hc,{headerId:e},e)})),r.map((function(e){return(0,a.tZ)(Ol,{paneId:e},e)})),(0,a.tZ)(Zc,{}),(0,a.tZ)(Qd,{})]}):null})}var Vf=(0,Bt.iv)([v.l0.position.fixed,v.l0.top(0),v.l0.left(0),v.l0.height("100%"),v.l0.width("100%"),v.l0.overflow("hidden")]),$f=function(){var e=null,n=(0,c.useRouter)().query;if(!n.replUrl)throw new Error("Expected replUrl to be set");var t=n.replUrl.toString(),r=(0,h.Cd)({variables:{url:t},ssr:Boolean(n.ssr)}),i=r.data,o=r.loading,s=r.error,u=i&&"Repl"===i.repl.__typename?i.repl:null,d=(null===i||void 0===i?void 0:i.currentUser)||void 0,m="https://replit.com".concat(t),g=function(e){if(e){if(e.description)return e.description;var n=f.Z.get(e.language).displayName;return"A ".concat(n," Repl")}}(u),Z=(0,l.useState)(!1),y=Z[0],b=Z[1];(0,l.useEffect)((function(){return b(!0)}),[]),(0,Zu.Z)((null===i||void 0===i?void 0:i.repl)||null,t);var w=null;return s?e=(0,a.tZ)(v.G7,{css:[v.l0.center,v.l0.flex.growAndShrink(1)],children:(0,a.tZ)(v.xv,{children:"Something went wrong loading the Repl. Please reload the page and try again."})}):o||!y?e=(0,a.BX)(v.G7,{css:[v.l0.center,v.l0.flex.growAndShrink(1)],children:[(0,a.tZ)(ao,{}),(0,a.tZ)(Jd.Z,{height:100})]}):u&&d?(e=(0,a.tZ)(Lf,{repl:u,currentUser:d},u.id),w=function(e){var n=e.isLesson,t=e.hasSeenOldWorkspaceTour,r=e.flagLayoutNavigator;return n?null:r?t?Df:Ef:Rf}({isLesson:Boolean(u.lesson),hasSeenOldWorkspaceTour:d.hasSeenOldWorkspaceTour,flagLayoutNavigator:d.flagLayoutNavigator})):e=(0,a.BX)(v.G7,{css:[v.l0.center,v.l0.flex.growAndShrink(1)],children:[(0,a.tZ)(ao,{}),(0,a.tZ)(Jd.Z,{height:100})]}),(0,a.tZ)(Fc,{tour:w,children:(0,a.tZ)(C.Z,{children:(0,a.tZ)(p.Z,{dataCy:"workspace-page",title:"".concat((null===u||void 0===u?void 0:u.title)||""),oembedUrl:m,description:g,noHeader:!0,noFooter:!0,forceDrawer:!0,hideSidebar:!0,hideEmailVerify:!0,children:(0,a.BX)(v.Tg,{css:Vf,children:[(0,a.tZ)(Uf.g,{}),e]})})})})};$f.getInitialProps=function(){var e=(0,r.Z)((function(e){var n,t;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return n=e.req,t=e.store,[4,(0,d.Z)(n,t)];case 1:return r.sent(),[2,{}]}}))}));return function(n){return e.apply(this,arguments)}}();var qf=$f},7900:function(e,n,t){"use strict";t.d(n,{Pc:function(){return b},Pu:function(){return C}});var r=t(26042),i=t(7297),o=t(31230),a=t(21767);function l(){var e=(0,i.Z)(["\n  fragment TeamTemplateReplTemplateMember on TeamMembership {\n    id\n    user {\n      id\n      image\n      username\n      firstName\n      lastName\n    }\n    nickname\n    email\n    permissions\n  }\n"]);return l=function(){return e},e}var s=(0,o.Ps)(l()),c=t(16092),u=t(37887);function d(){var e=(0,i.Z)(["\n  fragment TeamTemplateUser on User {\n    id\n    username\n    displayName\n    fullName\n    image\n    url\n  }\n"]);return d=function(){return e},e}function p(){var e=(0,i.Z)(["\n  fragment TeamTemplateReplSubmission on ReplSubmission {\n    id\n    timeSubmitted\n    timeLastReviewed\n    author {\n      id\n      ...TeamTemplateUser\n    }\n    repl {\n      id\n      title\n      timeCreated\n      template {\n        id\n        dueDate\n      }\n      ...ReplLinkRepl\n    }\n  }\n  ","\n  ","\n"]);return p=function(){return e},e}function f(){var e=(0,i.Z)(["\n  fragment TeamTemplateSubmissionGroup on ReplSubmissionGroup {\n    submission {\n      id\n      timeSubmitted\n      timeLastReviewed\n      isGroupSubmission\n      repl {\n        id\n        url\n        nextPagePathname\n      }\n    }\n    users {\n      id\n      ...TeamTemplateUser\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,i.Z)(["\n  fragment TeamTemplateReplTemplate on ReplTemplate {\n    id\n    isGroupProject\n    isPublished\n    imageUrl\n    url\n    dueDate\n    repl {\n      id\n    }\n    team {\n      id\n      username\n      displayName\n      members {\n        id\n        ...TeamTemplateReplTemplateMember\n      }\n    }\n    author {\n      id\n      username\n      image\n      ...UserLinkUser\n    }\n    submissions {\n      id\n      ...TeamTemplateReplSubmission\n    }\n    submissionGroups {\n      ...TeamTemplateSubmissionGroup\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return h=function(){return e},e}function v(){var e=(0,i.Z)(["\n  fragment TeamTemplateRepl on Repl {\n    id\n    title\n    slug\n    description\n    ...ReplLinkRepl\n    template {\n      id\n      ...TeamTemplateReplTemplate\n    }\n  }\n  ","\n  ","\n"]);return v=function(){return e},e}function m(){var e=(0,i.Z)(["\n  query TeamTemplate($replUrl: String!) {\n    repl(url: $replUrl) {\n      ... on Repl {\n        id\n        ...TeamTemplateRepl\n      }\n      ... on ReplRedirect {\n        replUrl\n        repl {\n          id\n        }\n      }\n      ... on SubscriptionExpiredError {\n        replId\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}var g={},Z=(0,o.Ps)(d()),y=(0,o.Ps)(p(),Z,a.Y),b=(0,o.Ps)(f(),Z),w=(0,o.Ps)(h(),s,c._,y,b),x=(0,o.Ps)(v(),a.Y,w),k=(0,o.Ps)(m(),x);function C(e){var n=(0,r.Z)({},g,e);return u.a(k,n)}}},function(e){var n=function(n){return e(e.s=n)};e.O(0,[3443,2240,6344,6351,62,8966,4778,5395,4470,7485,7651,5499,7828,4837,1674,1889,6202,1463,2027,3520,2995,3414,4718,2350,3497,4967,7737,4710,1630,1822,8253,6272,1683,362,9774,2888,179],(function(){return n(97239),n(60937)}));var t=e.O();_N_E=t}]);
//# sourceMappingURL=replEnvironment2-8f495bf63505cd1a.js.map